/*!
 * This file is part of eyeo's Anti-Circumvention Snippets module (@eyeo/snippets),
 * Copyright (C) 2006-present eyeo GmbH
 * 
 * @eyeo/snippets is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 * 
 * @eyeo/snippets is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with @eyeo/snippets.  If not, see <http://www.gnu.org/licenses/>.
 */

const callback = (environment, ...filters) => {
const e=Proxy,{apply:t,bind:n,call:r}=Function,o=r.bind(t),a=r.bind(n),u=r.bind(r),i={get:(e,t)=>a(r,e[t])},c=t=>new e(t,i),l={get:(e,t)=>a(e[t],e)},s=t=>new e(t,l),{assign:p,defineProperties:f,freeze:h,getOwnPropertyDescriptor:d,getOwnPropertyDescriptors:m,getPrototypeOf:y}=s(Object),{hasOwnProperty:g}=c({}),{species:v}=Symbol,w={get(e,t){const n=e[t];class r extends n{}const o=m(n.prototype);delete o.constructor,h(f(r.prototype,o));const a=m(n);return delete a.length,delete a.prototype,a[v]={value:r},h(f(r,a))}},A=t=>new e(t,w),x="undefined"!=typeof environment?environment:{};"undefined"==typeof globalThis&&(window.globalThis=window);const{apply:b,ownKeys:B}=s(Reflect),E="world"in x,N=E&&"ISOLATED"===x.world,T=E&&"MAIN"===x.world,I="object"==typeof chrome&&!!chrome.runtime,C="object"==typeof browser&&!!browser.runtime,F=!T&&(N||I||C),O=e=>F?e:S(e,U(e)),{create:S,defineProperties:G,defineProperty:D,freeze:R,getOwnPropertyDescriptor:k,getOwnPropertyDescriptors:U}=s(Object),M=s(globalThis),H=F?globalThis:A(globalThis),{Map:P,RegExp:j,Set:X,WeakMap:L,WeakSet:Y}=H,Q=(e,t,n=null)=>{const r=B(t);for(const o of B(e)){if(r.includes(o))continue;const a=k(e,o);if(n&&"value"in a){const{value:e}=a;"function"==typeof e&&(a.value=n(e))}D(t,o,a)}},J=e=>{const t=H[e];class n extends t{}const{toString:r,valueOf:o}=t.prototype;G(n.prototype,{toString:{value:r},valueOf:{value:o}});const a=e.toLowerCase(),u=e=>function(){const t=b(e,this,arguments);return typeof t===a?new n(t):t};return Q(t,n,u),Q(t.prototype,n.prototype,u),n},K=R({frozen:new L,hidden:new Y,iframePropertiesToAbort:{read:new X,write:new X},abortedIframes:new L}),q=new j("^[A-Z]");var _=new Proxy(new P([["chrome",F&&(I&&chrome||C&&browser)||void 0],["isExtensionContext",F],["variables",K],["console",O(console)],["document",globalThis.document],["performance",O(performance)],["JSON",O(JSON)],["Map",P],["Math",O(Math)],["Number",F?Number:J("Number")],["RegExp",j],["Set",X],["String",F?String:J("String")],["WeakMap",L],["WeakSet",Y],["MouseEvent",MouseEvent]]),{get(e,t){if(e.has(t))return e.get(t);let n=globalThis[t];return"function"==typeof n&&(n=(q.test(t)?H:M)[t]),e.set(t,n),n},has:(e,t)=>e.has(t)});const V={WeakSet:WeakSet,WeakMap:WeakMap,WeakValue:class{has(){return!1}set(){}}},{apply:W}=Reflect;const{Map:Z,WeakMap:$,WeakSet:z,setTimeout:ee}=_;let te=!0,ne=e=>{e.clear(),te=!te};var re=function(e){const{WeakSet:t,WeakMap:n,WeakValue:r}=this||V,o=new t,a=new n,u=new r;return function(t){if(o.has(t))return t;if(a.has(t))return a.get(t);if(u.has(t))return u.get(t);const n=W(e,this,arguments);return o.add(n),n!==t&&("object"==typeof t&&t?a:u).set(t,n),n}}.bind({WeakMap:$,WeakSet:z,WeakValue:class extends Z{set(e,t){return te&&(te=!te,ee(ne,0,this)),super.set(e,t)}}});const{concat:oe,includes:ae,join:ue,reduce:ie,unshift:ce}=c([]),le=A(globalThis),{Map:se,WeakMap:pe}=le,fe=new se,he=t=>{const n=(e=>{const t=[];let n=e;for(;n;){if(fe.has(n))ce(t,fe.get(n));else{const e=m(n);fe.set(n,e),ce(t,e)}n=y(n)}return ce(t,{}),o(p,null,t)})("function"==typeof t?t.prototype:t),r={get(e,t){if(t in n){const{value:r,get:o}=n[t];if(o)return u(o,e);if("function"==typeof r)return a(r,e)}return e[t]},set(e,t,r){if(t in n){const{set:o}=n[t];if(o)return u(o,e,r),!0}return e[t]=r,!0}};return t=>new e(t,r)},{isExtensionContext:de,Array:me,Number:ye,String:ge,Object:ve}=_,{isArray:we}=me,{getOwnPropertyDescriptor:Ae,setPrototypeOf:xe}=ve,{toString:be}=ve.prototype,{slice:Be}=ge.prototype,{get:Ee}=Ae(Node.prototype,"nodeType"),Ne=de?{}:{Attr:he(Attr),CanvasRenderingContext2D:he(CanvasRenderingContext2D),CSSStyleDeclaration:he(CSSStyleDeclaration),Document:he(Document),Element:he(Element),HTMLCanvasElement:he(HTMLCanvasElement),HTMLElement:he(HTMLElement),HTMLImageElement:he(HTMLImageElement),HTMLScriptElement:he(HTMLScriptElement),MutationRecord:he(MutationRecord),Node:he(Node),ShadowRoot:he(ShadowRoot),get CSS2Properties(){return Ne.CSSStyleDeclaration}},Te=(e,t)=>{if("Element"!==t&&t in Ne)return Ne[t](e);if(we(e))return xe(e,me.prototype);const n=(e=>u(Be,u(be,e),8,-1))(e);if(n in Ne)return Ne[n](e);if(n in _)return xe(e,_[n].prototype);if("nodeType"in e)switch(u(Ee,e)){case 1:if(!(t in Ne))throw new Error("unknown hint "+t);return Ne[t](e);case 2:return Ne.Attr(e);case 3:return Ne.Node(e);case 9:return Ne.Document(e)}throw new Error("unknown brand "+n)};var Ie=de?e=>e===window||e===globalThis?_:e:re(((e,t="Element")=>{if(e===window||e===globalThis)return _;switch(typeof e){case"object":return e&&Te(e,t);case"string":return new ge(e);case"number":return new ye(e);default:throw new Error("unsupported value")}}));let Ce=!1;function Fe(){return Ce}let{console:Oe,document:Se,getComputedStyle:Ge,isExtensionContext:De,variables:Re,Array:ke,MutationObserver:Ue,Object:Me,XPathEvaluator:He,XPathExpression:Pe,XPathResult:je}=Ie(window);const{querySelectorAll:Xe}=Se,Le=Xe&&a(Xe,Se);function Ye(e,t=!1){try{const n=navigator.userAgent.includes("Firefox")?e.openOrClosedShadowRoot:browser.dom.openOrClosedShadowRoot(e);return null===n&&Fe()&&!t&&Oe.log("Shadow root not found or not added in element yet",e),n}catch(n){return Fe()&&!t&&Oe.log("Error while accessing shadow root",e,n),null}}function Qe(e,t=!1){return qe(e,Le.bind(Se),Se,t)}function Je(e,t,n,r){const o=t.getAttribute("xlink:href")||t.getAttribute("href");if(o){const u=Le(o)[0];if(!u&&Fe())return Oe.log("No elements found matching",o),!1;if(!(a=e)||0===a.length||a.every((e=>""===e.trim()))){const e=r.length>0?r:[];return n.push({element:u,rootParents:[...e,t]}),!1}const i=u.querySelectorAll.bind(u);return{nextBoundElement:u,nestedSelectorsString:e.join("^^"),next$$:i}}var a}function Ke(e,t){const n=Ye(t);if(n){const{querySelectorAll:r}=n,o=r&&a(r,n).bind(n);return{nextBoundElement:t,nestedSelectorsString:":host "+e.join("^^"),next$$:o}}return!1}function qe(e,t,n,r,o=[]){if(e.includes("^^")){const[a,u,...i]=e.split("^^");let c,l;switch(u){case"svg":l=Je;break;case"sh":l=Ke;break;default:return Fe()&&Oe.log(u," is not supported. Supported commands are: \n^^sh^^\n^^svg^^"),[]}c=""===a.trim()?[n]:t(a);const s=[];for(const e of c){const t=l(i,e,s,o);if(!t)continue;const{next$$:n,nestedSelectorsString:a,nextBoundElement:u}=t,c=qe(a,n,u,r,[...o,e]);c&&s.push(...c)}return s}const a=t(e);return r?[...a].map((e=>({element:e,rootParents:o.length>0?o:[]}))):a}function _e(e,t,n=[]){if(t.includes("^^svg^^")&&(t=t.split("^^svg^^")[0]),t.includes("^^sh^^")){const r=t.split("^^sh^^"),o=r.length-1;if(t=`:host ${r[o]}`,o===n.length)return e.closest(t);return n[o].closest(t)}return n[0]?n[0].closest(t):e.closest(t)}const{assign:Ve,setPrototypeOf:We}=Me;class Ze extends Pe{evaluate(...e){return We(o(super.evaluate,this,e),je.prototype)}}class $e extends He{createExpression(...e){return We(o(super.createExpression,this,e),Ze.prototype)}}function ze(e){if(Re.hidden.has(e))return!1;!function(e){De&&"function"==typeof checkElement&&checkElement(e)}(e),Re.hidden.add(e);let{style:t}=Ie(e),n=Ie(t,"CSSStyleDeclaration"),r=Ie([]),{debugCSSProperties:o}=x;for(let[e,t]of o||[["display","none"]])n.setProperty(e,t,"important"),r.push([e,n.getPropertyValue(e)]);return new Ue((()=>{for(let[e,t]of r){let r=n.getPropertyValue(e),o=n.getPropertyPriority(e);r==t&&"important"==o||n.setProperty(e,t,"important")}})).observe(e,{attributes:!0,attributeFilter:["style"]}),!0}function et(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let e=t.slice(6,-1),n=(new $e).createExpression(e,null),r=je.ORDERED_NODE_SNAPSHOT_TYPE;return e=>{if(!e)return;let t=n.evaluate(Se,r,null),{snapshotLength:o}=t;for(let n=0;n<o;n++)e(t.snapshotItem(n))}}return t=>Qe(e).forEach(t)}function tt(e,t,n,r){let o;null==n&&(n=t);const a=()=>{for(const{element:a,rootParents:u}of Qe(n,!0)){const n=_e(Ie(a),t,u);n&&e(a,n,u)&&(o(),ze(n)&&"function"==typeof r&&r(n))}};return Ve(new Ue(a),{race(e){o=e,this.observe(Se,{childList:!0,characterData:!0,subtree:!0}),a()}})}function nt(e,t,n,r){let o=Ie(t,"CSSStyleDeclaration");if("none"==o.getPropertyValue("display"))return!1;let a=o.getPropertyValue("visibility");if("hidden"==a||"collapse"==a)return!1;if(!n||e==n)return!0;let u=Ie(e).parentElement;if(!u){if(!r||!r.length)return!0;u=r[r.length-1],r=r.slice(0,-1)}return nt(u,Ge(u),n,r)}function rt(e){let t=Ge(e),{cssText:n}=t;if(n)return n;for(let e of t)n+=`${e}: ${t[e]}; `;return Ie(n).trim()}let{Math:ot,RegExp:at}=Ie(window);function ut(e){let{length:t}=e;if(t>1&&"/"===e[0]){let n="/"===e[t-1];if(n||t>2&&Ie(e).endsWith("/i")){let t=[Ie(e).slice(1,n?-1:-2)];return n||t.push("i"),new at(...t)}}return new at(Ie(e).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))}const{console:it}=Ie(window),ct=()=>{};function lt(...e){if(Fe()){const t=["%c DEBUG","font-weight: bold;"],n=e.indexOf("error"),r=e.indexOf("warn"),o=e.indexOf("success"),a=e.indexOf("info");-1!==n?(t[0]+=" - ERROR",t[1]+="color: red; border:2px solid red",Ie(e).splice(n,1)):-1!==r?(t[0]+=" - WARNING",t[1]+="color: orange; border:2px solid orange ",Ie(e).splice(r,1)):-1!==o?(t[0]+=" - SUCCESS",t[1]+="color: green; border:2px solid green",Ie(e).splice(o,1)):-1!==a&&(t[1]+="color: black;",Ie(e).splice(a,1)),Ie(e).unshift(...t)}it.log(...e)}function st(e){return a(Fe()?lt:ct,null,e)}let{Array:pt,Error:ft,Map:ht,parseInt:dt}=Ie(window),mt=null,yt=null;function gt(e,t){if(null===mt)return ct;let n=mt,{participants:r}=n;return r.set(o,t),o;function o(){if(n.winners<1)return;if(st("race")("success",`${e} won the race`),n===mt)yt.push(o);else if(r.delete(o),--n.winners<1){for(let e of r.values())e();r.clear()}}}const vt={get(e,t){const n=e;for(;!g(e,t);)e=y(e);const{get:r,set:a}=d(e,t);return function(){return arguments.length?o(a,n,arguments):u(r,n)}}};var wt;function At(e,t,n){var r,o;n?"load"===n?(e("info","Waiting until window.load"),window.addEventListener("load",(()=>{e("info","Window.load fired."),t()}))):"loading"===n||"interactive"===n||"complete"===n?(e("info","Waiting document state until :",n),document.addEventListener("readystatechange",(()=>{e("info","Document state changed:",document.readyState),document.readyState===n&&t()}))):(e("info","Waiting until ",n," event is triggered on document"),(r=document,o=n,new Promise((e=>{const t=()=>{r.removeEventListener(o,t),e()};r.addEventListener(o,t)}))).then((()=>{e("info",n," is triggered on document, starting the snippet"),t()})).catch((t=>{e("error","There was an error while waiting for the event.",t)}))):t()}Ie(window),wt=window,new e(wt,vt),Ie(/^\d+$/);let{MutationObserver:xt,WeakSet:bt,getComputedStyle:Bt}=Ie(window);let{clearTimeout:Et,fetch:Nt,getComputedStyle:Tt,setTimeout:It,Map:Ct,MutationObserver:Ft,Uint8Array:Ot}=Ie(window);let St=new Ct;function Gt(e,{as:t="arrayBuffer",cleanup:n=6e4}={}){let r=t+":"+e,o=St.get(r)||{remove:()=>St.delete(r),result:null,timer:0};return Et(o.timer),o.timer=It(o.remove,n),o.result||(o.result=Nt(e).then((e=>e[t]())).catch(o.remove),St.set(r,o)),o.result}const{parseFloat:Dt,Math:Rt,MutationObserver:kt,WeakSet:Ut}=Ie(window),{min:Mt}=Rt,Ht=(e,t)=>{const n=e.length+1,r=t.length+1,o=[[0]];let a=0,u=0;for(;++a<r;)o[0][a]=a;for(a=0;++a<n;){const n=e[u];let i=0,c=0;for(o[a]=[a];++i<r;)o[a][i]=Mt(o[u][i]+1,o[a][c]+1,o[u][c]+(n!=t[c])),++c;++u}return o[n-1][r-1]};let{getComputedStyle:Pt,Map:jt,WeakSet:Xt,parseFloat:Lt}=Ie(window);const{ELEMENT_NODE:Yt,TEXT_NODE:Qt}=Node;let{MutationObserver:Jt,WeakSet:Kt,getComputedStyle:qt}=Ie(window);let{getComputedStyle:_t,MutationObserver:Vt,WeakSet:Wt}=Ie(window);Ie(window);const Zt={mark(){},end(){},toString:()=>"{mark(){},end(){}}"};function $t(e,t=10){return Zt}let{MutationObserver:zt,WeakSet:en}=Ie(window);const{ELEMENT_NODE:tn}=Node;let{MutationObserver:nn,WeakSet:rn}=Ie(window);const{ELEMENT_NODE:on}=Node;let{parseInt:an,setTimeout:un,Error:cn,MouseEvent:ln,MutationObserver:sn,WeakSet:pn}=Ie(window);const fn=["auxclick","click","dblclick","gotpointercapture","lostpointercapture","mouseenter","mousedown","mouseleave","mousemove","mouseout","mouseover","mouseup","pointerdown","pointerenter","pointermove","pointerover","pointerout","pointerup","pointercancel","pointerleave"];let{isNaN:hn,MutationObserver:dn,parseInt:mn,parseFloat:yn,setTimeout:gn}=Ie(window);const vn={log:lt,race:function(e,t="1"){switch(e){case"start":mt={winners:dt(t,10)||1,participants:new ht},yt=new pt;break;case"end":case"finish":case"stop":mt=null;for(let e of yt)e();yt=null;break;default:throw new ft(`Invalid action: ${e}`)}},debug:function(){Ce=!0},"hide-if-matches-xpath":function(e,t){const{mark:n,end:r}=$t(),o=st("hide-if-matches-xpath"),a=t=>{const a=et(`xpath(${e})`),u=new en,i=()=>{n(),a((t=>{if(u.has(t))return!1;u.add(t),l(),Ie(t).nodeType===tn?ze(t):Ie(t).textContent="",o("success","Matched: ",t," for selector: ",e)})),r()},c=new zt(i),l=gt("hide-if-matches-xpath",(()=>c.disconnect()));c.observe(t,{characterData:!0,childList:!0,subtree:!0}),i()};if(t){let e,n=0;const r=et(`xpath(${t})`),o=()=>{r((e=>{a(e),n++})),n>0&&e.disconnect()};e=new zt(o),e.observe(document,{characterData:!0,childList:!0,subtree:!0}),o()}else a(document)},"hide-if-matches-computed-xpath":function(e,t,n,r){const{mark:o,end:a}=$t(),u=st("hide-if-matches-computed-xpath");if(!t||!e)return void u("error","No query or searchQuery provided.");const i=t=>{const n=(t=>e.replace("{{}}",t))(t);u("info","Starting hiding elements that match query: ",n);const r=et(`xpath(${n})`),i=new rn,c=()=>{o(),r((t=>{if(i.has(t))return!1;i.add(t),s(),Ie(t).nodeType===on?ze(t):Ie(t).textContent="",u("success","Matched: ",t," for selector: ",e)})),a()},l=new nn(c),s=gt("hide-if-matches-computed-xpath",(()=>l.disconnect()));l.observe(document,{characterData:!0,childList:!0,subtree:!0}),c()},c=ut(n);At(u,(()=>{if(t){u("info","Started searching for: ",t);const e=new rn;let n;const r=et(`xpath(${t})`),o=()=>{r((t=>{if(e.has(t))return!1;if(e.add(t),u("info","Found node: ",t),t.innerHTML){u("info","Searching in: ",t.innerHTML);const e=t.innerHTML.match(c);if(e&&e.length){let t="";t=e[1]?e[1]:e[0],u("info","Matched search query: ",t),i(t)}}}))};n=new nn(o),n.observe(document,{characterData:!0,childList:!0,subtree:!0}),o()}}),r)},"hide-if-contains":function(e,t="*",n=null){const r=st("hide-if-contains");let o=ut(e);const a=tt((e=>o.test(Ie(e).textContent)),t,n,(e=>{r("success","Matched: ",e," for selector: ",t,n)}));a.race(gt("hide-if-contains",(()=>{a.disconnect()})))},"hide-if-contains-similar-text":function(e,t,n=null,r=0,o=0){const a=new Ut,u=st("hide-if-contains-similar-text"),i=Ie(e),{length:c}=i,l=c+Dt(r)||0,s=Ie([...i]).sort(),p=Dt(o)||1/0;null==n&&(n=t),u("Looking for similar text: "+i);const f=()=>{for(const{element:e,rootParents:o}of Qe(n,!0)){if(a.has(e))continue;a.add(e);const{innerText:n}=Ie(e),c=Mt(p,n.length-l+1);for(let a=0;a<c;a++){const c=Ie(n).substr(a,l);if(Ht(s,Ie([...c]).sort())-r<=0){const n=_e(Ie(e),t,o);if(u("success","Found similar text: "+i,n),n){d(),ze(n);break}}}}};let h=new kt(f),d=gt("hide-if-contains-similar-text",(()=>h.disconnect()));h.observe(document,{childList:!0,characterData:!0,subtree:!0}),f()},"hide-if-contains-visible-text":function(e,t,n=null,...r){let o=Ie([]);const a=new jt([["-snippet-box-margin","2"],["-disable-bg-color-check","false"],["-check-is-contained","false"]]);for(let e of r){e=Ie(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim().toString(),r=e.slice(t+1).trim().toString();n&&r&&(a.has(n)?a.set(n,r):o.push([n,r]))}let u=Ie([["opacity","0"],["font-size","0px"],["color","rgba(0, 0, 0, 0)"]]),i=new jt(u.concat(o));function c(e,t,{bgColorCheck:n=!0}={}){t||(t=Pt(e)),t=Ie(t);for(const[e,n]of i){if(ut(n).test(t.getPropertyValue(e)))return!1}let r=t.getPropertyValue("color");return!n||t.getPropertyValue("background-color")!=r}function l(e,t,{bgColorCheck:n=!0}={}){let r=Pt(e,t);if(!nt(e,r)||!c(e,r,{bgColorCheck:n}))return"";let{content:o}=Ie(r);if(o&&"none"!==o){let t=Ie([]);return o=Ie(o).trim().replace(/(["'])(?:(?=(\\?))\2.)*?\1/g,(e=>""+(t.push(Ie(e).slice(1,-1))-1))),o=o.replace(/\s*attr\(\s*([^\s,)]+)[^)]*?\)\s*/g,((t,n)=>Ie(e).getAttribute(n)||"")),o.replace(/\x01(\d+)/g,((e,n)=>t[n]))}return""}function s(e,t,{boxMargin:n=2}={}){const r=Ie(e).getBoundingClientRect(),o=Ie(t).getBoundingClientRect(),a=o.left-n,u=o.right+n,i=o.top-n,c=o.bottom+n;return a<=r.left&&r.left<=u&&i<=r.top&&r.top<=c&&i<=r.bottom&&r.bottom<=c&&a<=r.right&&r.right<=u}function p(e,t,n,r,o,a,{boxMargin:u=2,bgColorCheck:i,checkIsContained:f}={}){let h=!n;if(h&&(n=Pt(e)),!nt(e,n,h&&t,a))return"";r||"hidden"!==Ie(n).getPropertyValue("overflow-x")&&"hidden"!==Ie(n).getPropertyValue("overflow-y")||(r=e);let d=l(e,":before",{bgColorCheck:i});for(let t of function(e,t=!0){const n=Ye(e,t);return n?n.childNodes:Ie(e).childNodes}(Ie(e)))switch(Ie(t).nodeType){case Yt:d+=p(t,e,Pt(t),r,o,a,{boxMargin:u,bgColorCheck:i,checkIsContained:f});break;case Qt:if(r)s(e,r,{boxMargin:u})&&c(e,n,{bgColorCheck:i})&&(d+=Ie(t).nodeValue);else if(c(e,n,{bgColorCheck:i})){if(f&&!s(e,o,{boxMargin:u}))continue;d+=Ie(t).nodeValue}}return d+l(e,":after",{bgColorCheck:i})}const f=a.get("-snippet-box-margin"),h=Lt(f)||0,d=!("true"===a.get("-disable-bg-color-check")),m="true"===a.get("-check-is-contained");let y=ut(e),g=new Xt;const v=tt(((e,t,n)=>{if(g.has(e))return!1;g.add(e);let r=p(e,t,null,null,e,n,{boxMargin:h,bgColorCheck:d,checkIsContained:m}),o=y.test(r);return Fe()&&r.length&&lt(o?"success":"info",o,y,r),o}),t,n);v.race(gt("hide-if-contains-visible-text",(()=>{v.disconnect()})))},"hide-if-contains-and-matches-style":function(e,t="*",n=null,r=null,o=null,a,u=null,i=null){const c=st("hide-if-contains-and-matches-style"),l=new bt,s=Fe()&&new bt;null==n&&(n=t);const p=ut(e),f=r?ut(r):null,h=o?ut(o):null;At(c,(()=>{const e=()=>{if(!(u&&window.innerWidth<u||i&&window.innerWidth>i))for(const{element:e,rootParents:r}of Qe(n,!0))if(!l.has(e)&&p.test(Ie(e).textContent))if(!h||h.test(rt(e))){const n=_e(Ie(e),t,r);if(!n)continue;if(!f||f.test(rt(n)))o(),ze(n),l.add(e),c("success","Matched: ",n,"which contains: ",e," for params: ",...arguments);else{if(!s||s.has(n))continue;c("info","In this element the searchStyle matched but style didn't:\n",n,Bt(n),...arguments),s.add(n)}}else{if(!s||s.has(e))continue;c("info","In this element the searchStyle didn't match:\n",e,Bt(e),...arguments),s.add(e)}},r=new xt(e),o=gt("hide-if-contains-and-matches-style",(()=>r.disconnect()));r.observe(document,{childList:!0,characterData:!0,subtree:!0}),e()}),a)},"hide-if-has-and-matches-style":function(e,t="*",n=null,r=null,o=null,a=null,u=null,i=null){const c=st("hide-if-has-and-matches-style"),l=new Kt,s=Fe()&&new Kt;null==n&&(n=t);const p=r?ut(r):null,f=o?ut(o):null;At(c,(()=>{const r=()=>{if(!(u&&window.innerWidth<u||i&&window.innerWidth>i))for(const{element:r,rootParents:o}of Qe(n,!0))if(!l.has(r))if(!Ie(r).querySelector(e)||f&&!f.test(rt(r))){if(!s||s.has(r))continue;c("info","In this element the searchStyle didn't match:\n",r,qt(r),...arguments),s.add(r)}else{const e=_e(Ie(r),t,o);if(!e||p&&!p.test(rt(e))){if(!s||s.has(e))continue;c("info","In this element the searchStyle matchedbut style didn't:\n",e,qt(e),...arguments),s.add(e)}else a(),ze(e),l.add(r),c("success","Matched: ",e,"which contains: ",r," for params: ",...arguments)}},o=new Jt(r),a=gt("hide-if-has-and-matches-style",(()=>o.disconnect()));o.observe(document,{childList:!0,subtree:!0}),r()}),a)},"hide-if-labelled-by":function(e,t,n=null){let r=null==n,o=ut(e),a=new Wt,u=()=>{for(const{element:e,rootParents:u}of Qe(t,!0)){let t=r?e:_e(Ie(e),n,u);if(!t||!nt(e,_t(e),t))continue;let i=Ie(e).getAttribute("aria-labelledby"),l=()=>{a.has(t)||o.test(Ie(e).getAttribute("aria-label")||"")&&(c(),a.add(t),ze(t))};if(i)for(let e of Ie(i).split(/\s+/)){let n=Ie(document).getElementById(e);n?!a.has(n)&&o.test(n.innerText)&&(c(),a.add(n),ze(t)):l()}else l()}},i=new Vt(u),c=gt("hide-if-labelled-by",(()=>i.disconnect()));i.observe(document,{characterData:!0,childList:!0,subtree:!0}),u()},"hide-if-contains-image":function(e,t,n){null==n&&(n=t);let r=ut(e);const o=st("hide-if-contains-image");let a=()=>{for(const{element:e,rootParents:a}of Qe(n,!0)){let n=Tt(e),u=Ie(n["background-image"]).match(/^url\("(.*)"\)$/);u&&Gt(u[1]).then((n=>{if(r.test(new Ot(n).reduce(((e,t)=>e+function(e,t=2){let n=Ie(e).toString(16);n.length<t&&(n=Ie("0").repeat(t-n.length)+n);return n}(t)),""))){let n=_e(Ie(e),t,a);n&&(i(),ze(n),o("success","Matched: ",n," for:",...arguments))}}))}},u=new Ft(a),i=gt("hide-if-contains-image",(()=>u.disconnect()));u.observe(document,{childList:!0,subtree:!0}),a()},"simulate-mouse-event":function(...e){const t=st("simulate-mouse-event");if(e.length<1)throw new cn("[simulate-mouse-event snippet]: No selector provided.");e.length>7&&(e=e.slice(0,7));const n=Ie([]);function r(){return n.forEach((e=>{if(!e.found){(function(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let t=et(e);return()=>{let e=Ie([]);return t((t=>e.push(t))),e}}return()=>ke.from(Qe(e))})(e.selector)().length>0&&(e.found=!0)}})),n.every((e=>e.found))}function o(e,n,r){e&&n&&("click"===n&&e.click?(e.click(),t("success","Clicked on this node:\n",e,"\nwith a delay of",r,"ms")):(e.dispatchEvent(new ln(n,{bubbles:!0,cancelable:!0})),t("success","A",n,"event was dispatched with a delay of",r,"ms on this node:\n",e)))}Ie(e).forEach((e=>{const r=function(e){if(!e)return null;const n={selector:"",continue:!1,trigger:!1,event:"click",delay:"500",clicked:!1,found:!1},r=e.split("$");let o=[];r.length>=2&&(o=r[1].toLowerCase().split(",")),[n.selector]=r;for(const e of o)if("trigger"===e)n.trigger=!0;else if("continue"===e)n.continue=!0;else if(e.startsWith("event")){const t=e.toLowerCase().split("=");t[1]?n.event=t[1]:n.event="click"}else if(e.startsWith("delay")){const t=e.toLowerCase().split("=");t[1]?n.delay=t[1]:n.delay="500"}return fn.includes(n.event)||t("warn",n.event," might be misspelled, check for typos.\n","These are the supported events:",fn),n}(e);n.push(r)}));let a=!1;const[u]=n.slice(-1);u.trigger=!0;let i=new pn;function c(){if(a||(a=r()),a)for(const e of n){const t=et(e.selector),n=an(e.delay,10);e.trigger&&t((t=>{i.has(t)||(i.add(t),e.continue?setInterval((()=>{o(t,e.event,e.delay)}),n):un((()=>{o(t,e.event,e.delay)}),n))}))}}new sn(c).observe(document,{childList:!0,subtree:!0}),c()},"skip-video":function(e,t,...n){const r=new Map([["-max-attempts","10"],["-retry-ms","10"],["-run-once","false"],["-wait-until",""],["-skip-to","-0.1"],["-stop-on-video-end","false"]]);for(let e of n){e=Ie(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim().toString(),o=e.slice(t+1).trim().toString();n&&o&&r.has(n)&&r.set(n,o)}const o=r.get("-max-attempts"),a=mn(o||10,10),u=r.get("-retry-ms"),i=mn(u||10,10),c="true"===r.get("-run-once"),l=r.get("-skip-to"),s=yn(l||-.1),p=r.get("-wait-until"),f="true"===r.get("-stop-on-video-end"),h=st("skip-video"),d=et(`xpath(${t})`);let m=!1;At(h,(()=>{const n=(u=0)=>{m&&c?r&&r.disconnect():d((r=>{h("info","Matched: ",r," for selector: ",t),h("info","Running video skipping logic.");const c=Qe(e)[0];for(;hn(c.duration)&&u<a;)return void gn((()=>{const e=u+1;h("info","Running video skipping logic. Attempt: ",e),n(e)}),i);const l=c.duration-c.currentTime<.5;hn(c.duration)||f&&l||(c.muted=!0,h("success","Muted video..."),s<=0?c.currentTime=c.duration+s:c.currentTime+=s,h("success","Skipped duration..."),c.paused&&c.play(),m=!0,o())}))},r=new dn(n),o=gt("skip-video",(()=>r.disconnect()));r.observe(document,{characterData:!0,childList:!0,subtree:!0}),n()}),p)}};let{MutationObserver:wn}=Ie(window);const{ELEMENT_NODE:An}=Node;const xn=500;async function bn(e,t,n=!1){return new Promise(((r,o)=>{if(!e||!t)return o();let a=e.config,u=a.cutoff||e.topology.graphml.nodes||xn;a=a.filter((e=>e.include));for(let e of a)e.groupName=Object.keys(e)[2];let i=(e,t,n,r)=>{"attributes"===n&&void 0!==e.attributes[r]?t.attributes[r]=e.attributes[r].value:"style"===n&&e.style[r]?t.attributes.style[r]=e.style[r]:"css"===n&&(t.cssSelectors=getComputedStyle(e).cssText||"")},c=e=>{if(n&&!e.clientWidth&&!e.clientHeight)return;if(u-=1,u<0)return;let t={tag:e.tagName,width:e.clientWidth,height:e.clientHeight,attributes:{style:{}},children:[]};for(let n of a)for(let r of n[n.groupName].features)for(let[o,a]of Object.entries(r))if("names"in a)for(let r of a.names)for(let o of r.split("^"))i(e,t,n.groupName,o);else i(e,t,n.groupName,o);if(e.children)for(let n of e.children){let e=c(n);e&&t.children.push(e)}return t};r(c(t))}))}let{WeakSet:Bn,MutationObserver:En}=(void 0!==Ie?Ie:e=>e)(window);class Nn{constructor(){this.digestedElements=new Bn,this.selector="",this.subselector=""}observe(e,t,n){this.selector=e,this.subselector=t,this.callback=n,this.elementObserver=new En(this.digest.bind(this)),this.elementObserver.observe(document,{childList:!0,subtree:!0}),this.digest()}stop(){this.elementObserver&&this.elementObserver.disconnect()}digest(){let e=function(e,t){let n=[document];e=Ie(e).split("..");let r=[];Ie(e).forEach(((e,t)=>{t&&(n=Ie(n).reduce(((e,t)=>t&&Ie(t).parentElement?e.concat(Ie(t).parentElement):e),Ie([]))),n=Ie(n).reduce(((t,n)=>{if(e)try{t=t.concat(...Ie(n).querySelectorAll(e))}catch(e){}else t.push(n);return t}),Ie([]))}));for(let o of n){let n=[o];if(t)try{n=Ie(o).querySelectorAll(t)}catch(e){}r.push([o,n])}return r}(this.selector,this.subselector).filter((([e])=>!this.digestedElements.has(e)));this.callback(e);for(let[t]of e)this.digestedElements.add(t)}}let Tn=!1;function In(e,t=!1,...n){Tn&&console.log("%cMLDBG ♥ %c| %s%c |","color:cyan",t?"color:red":"color:inherit",e,"color:inherit",...n)}let Cn={nodeCount:0,organicCount:0,adCount:0,aaCount:0,times:[]};const Fn=5,On=7,Sn=window.self!==window.top;let{Map:Gn}=(void 0!==Ie?Ie:e=>e)(window),Dn=new Gn,Rn=!1;vn["hide-if-matches-xpath3"]=function(e,t){let{mark:n,end:r}=$t();const o=e=>""===e&&"http://www.w3.org/1999/xhtml";function a(e){return fontoxpath.evaluateXPathToNodes(e,document,null,null,{language:fontoxpath.evaluateXPath.XQUERY_3_1_LANGUAGE,namespaceResolver:o})}let u=st("hide-if-matches-xpath3");const i=t=>{const o=new WeakSet,i=()=>{n();const t=a(e);for(const n of Ie(t)){if(o.has(n))return!1;o.add(n),l(),Ie(n).nodeType===An?ze(n):Ie(n).textContent="",u("success","Matched: ",n," for selector: ",e)}r()},c=new wn(i),l=gt("hide-if-matches-xpath3",(()=>c.disconnect()));c.observe(t,{characterData:!0,childList:!0,subtree:!0}),i()};if(t){let e,n=0;const r=a(t),o=()=>{for(const e of Ie(r))i(e),n++;n>0&&e.disconnect()};e=new wn(o),e.observe(document,{characterData:!0,childList:!0,subtree:!0}),o()}else i(document)},vn["hide-if-classifies"]=function(...e){let{debug:t,frameonly:n,failsafe:r,denoise:o,silent:a,model:u,selector:i,subselector:c}=function(e){if(!e||!Array.isArray(e)||!e.length)return{};let t=[],n={debug:!1,frameonly:!1,failsafe:!1,denoise:!1,silent:!1,model:"",selector:"",subselector:""};for(let r of e)r&&r in n?n[r]=!0:t.push(r);return t.length<2?{}:(n.model=t[0],t.splice(0,1),(t.length>2||t.some((e=>e&&e.startsWith('"'))))&&(t=t.join(" ").split('"').map((e=>e.trim())).filter((e=>e))),n.selector=t[0]||"",n.subselector=t[1]||"",n)}(e||[]);if(function(e){Tn=!!e}(t),"undefined"==typeof chrome||!chrome.runtime||!chrome.runtime.sendMessage)return In("environmental support",!1);if(!u||!i)return In("Invalid filter",!0);if(n&&!Sn)return;Sn||In(`Filter hit for ${u}: ${i} ${c}`);let l=new Nn,s=gt("hide-if-graph-matches",(()=>l.stop())),p=()=>{if(Dn.has(u))return Dn.get(u);In(`Preparing worker with model ${u}`);let e=new Promise(((e,t)=>{let n=setTimeout((()=>{t(`Worker preparation with ${u} failed: service worker timeout`)}),1e4);h({type:"ML:prepare",debug:Tn,model:u},(r=>{clearTimeout(n),r&&"config"in r?(In(`Received config for ${u}`,!1,"config:",r.config),r.config.cutoff=r.cutoff,e(r.config)):t(`Worker preparation with ${u} failed`)}))}));return e.catch((e=>{})),Dn.set(u,e),e},f=(e,t)=>{if(r&&Cn.nodeCount>=10&&Cn.adCount/Cn.nodeCount>=1)return In("Ad to non-ad ratio is 100%/0%. Stopping inference.",!0),l.stop();In(`Requesting inference with ${u}`,!1,"graph:",e),h({type:"ML:inference",debug:Tn,model:u,graph:e},(n=>{if(n&&"prediction"in n&&"boolean"==typeof n.prediction){if(In(`Received ${n.prediction} inference results with ${u}`,!1,"graph:",e),n.allowlisted&&!Rn&&(Rn=!0),function(e=!1,t=!1,n){Tn&&(Cn.nodeCount||Ie(document).head.insertAdjacentHTML("beforeend",'\n        <style>body::before { display: block; position: fixed; pointer-events: none; top: 0; left: 0; z-index: 999999; background-color: rgba(0, 0, 0, 0.7); padding: 5px; content: "ad:\\9\\9 " var(--dbg-ad) "\\A nad:\\9\\9 " var(--dbg-nad) "\\A aa:\\9\\9 " var(--dbg-aa) "\\A time:\\9 " var(--dbg-t); font-size: 10px; white-space: pre-wrap; color: #fff; }</style>\n      ')),Cn.nodeCount++,t?Cn.aaCount++:e?Cn.adCount++:Cn.organicCount++,n&&Cn.times.push(n)}(n.prediction,n.allowlisted,n.digestTime-n.startTime),Rn&&!Tn)return l.stop();!n.prediction||Tn||a?Tn&&(n.allowlisted?Ie(t).style.border="3px solid #00ffff":n.prediction?Ie(t).style.border="3px solid #ff0000":n.prediction||(Ie(t).style.border="3px solid #00ff00"),Tn&&(Ie(document).body.style.setProperty("--dbg-ad",`"${Cn.adCount}"`),Ie(document).body.style.setProperty("--dbg-nad",`"${Cn.organicCount}"`),Ie(document).body.style.setProperty("--dbg-aa",`"${Cn.aaCount}"`),Ie(document).body.style.setProperty("--dbg-t",`"${Cn.times.reduce(((e,t,n)=>e+(!n||n%3?t+"ms ":"\\A\\9\\9 "+t+"ms ")),"")}"`))):(s(),ze(t))}else In(`Inference with ${u} failed`,!0,"graph:",e,"response:",n),!("error"in n)||n.error!==Fn&&n.error!==On||l.stop()}))},h=(e,t)=>{Rn?Tn&&t({prediction:!1,allowlisted:!0}):chrome.runtime.sendMessage(e,t)};l.observe(i,c,(e=>{if((!e||!e.length)&&Sn)return p();p().then((t=>{if(!t)return Promise.reject(`Config file for ${u} corrupted`);for(let[n,r]of e)for(let e of r)In(`Preparing inference with ${u}`,!1,"target:",n),bn({config:t},e,o).then((n=>o&&!n?bn({config:t},e,!1):n)).then((e=>f(e,n))).catch((e=>In(`domToGraph failed with error "${e}"`,!0,"target:",n)))})).catch((e=>{In(e,!0),l.stop()}))}))};
const snippets=vn;
let context;
for (const [name, ...args] of filters) {
if (snippets.hasOwnProperty(name)) {
try { context = snippets[name].apply(context, args); }
catch (error) { console.error(error); }
}
}
context = void 0;
};
const graph = new Map([["log",null],["race",null],["debug",null],["hide-if-matches-xpath",null],["hide-if-matches-computed-xpath",null],["hide-if-contains",null],["hide-if-contains-similar-text",null],["hide-if-contains-visible-text",null],["hide-if-contains-and-matches-style",null],["hide-if-has-and-matches-style",null],["hide-if-labelled-by",null],["hide-if-contains-image",null],["simulate-mouse-event",null],["skip-video",null],["hide-if-matches-xpath3",function(){var e,t,n,r,o,a;e=this,function(e){function t(e,t,n,r){const o={op:t,func:n,data:r};return e.push(o),o}function n(e,t){return e}class r{constructor(){this.program=[]}test(e,n){return t(this.program,5,e,void 0===n?null:n)}jump(e){return t(this.program,3,null,e)}record(e,r){return t(this.program,4,void 0===r?n:r,e)}bad(e=1){return t(this.program,1,null,e)}accept(){return t(this.program,0,null,null)}fail(e){return t(this.program,2,e||null,null)}}class o{constructor(e,t,n){this.programLength=e,this.maxFromByPc=t,this.maxSurvivorFromByPc=n}static fromProgram(e){const t=e.length,n=[],r=[];return e.forEach((e=>{n.push(0),r.push(0)})),e.forEach(((e,o)=>{switch(e.op){case 2:if(null===e.func)return;if(o+1>=t)throw new Error("Invalid program: program could run past end");n[o+1]+=1;break;case 1:case 4:if(o+1>=t)throw new Error("Invalid program: program could run past end");n[o+1]+=1;break;case 3:e.data.forEach((e=>{if(e<0||e>=t)throw new Error("Invalid program: program could run past end");n[e]+=1}));break;case 5:if(o+1>=t)throw new Error("Invalid program: program could run past end");r[o+1]+=1;break;case 0:r[o]+=1}})),new o(t,n,r)}static createStub(e){const t=[],n=[];for(let r=0;r<e;++r)t.push(e),n.push(e);return new o(e,t,n)}}class a{constructor(e){this.acceptingTraces=e,this.success=e.length>0}}const u=255;class i{constructor(e){this.t=0,this.i=0,this.h=new Uint16Array(e),this.l=new Uint8Array(e)}getBadness(e){return this.l[e]}add(e,t){this.l[e]=t>u?u:t;const n=function(e,t,n,r,o){let a=r,u=o;for(;a<u;){const r=a+u>>>1;n<t[e[r]]?u=r:a=r+1}return a}(this.h,this.l,t,this.i,this.t);this.h.copyWithin(n+1,n,this.t),this.h[n]=e,this.t+=1}reschedule(e,t){const n=Math.max(this.l[e],t>u?u:t);if(this.l[e]!==n){const t=this.h.indexOf(e,this.i);if(t<0||t>=this.t)return void(this.l[e]=n);this.h.copyWithin(t,t+1,this.t),this.t-=1,this.add(e,n)}}getNextPc(){return this.i>=this.t?null:this.h[this.i++]}reset(){this.t=0,this.i=0,this.l.fill(0)}}class c{constructor(e){this.o=[];let t=e.length;e.forEach((e=>{this.o.push(e>0?t:-1),t+=e})),this.u=new Uint16Array(t)}clear(){this.u.fill(0,0,this.o.length)}add(e,t){const n=this.u[t],r=this.o[t];this.u[t]+=1,this.u[r+n]=e}has(e){return this.u[e]>0}forEach(e,t){const n=this.u[e],r=this.o[e];for(let e=r;e<r+n;++e)t(this.u[e])}}function l(e,t,n=!1){return null===e?t:Array.isArray(e)?(-1===e.indexOf(t)&&(n&&(e=e.slice()),e.push(t)),e):e===t?e:[e,t]}class s{constructor(e,t){this.prefixes=e,this.record=t}}function p(e,t){let n;if(null===t){if(!Array.isArray(e))return e;n=e}else n=e===s.EMPTY?[]:Array.isArray(e)?e:[e];return new s(n,t)}s.EMPTY=new s([],null);class f{constructor(e){this.p=[],this.v=[];for(let t=0;t<e;++t)this.p.push(0),this.v.push(null)}mergeTraces(e,t,n,r,o,a){let u=!1;return n.forEach(t,(t=>{const n=this.trace(t,r,o,a);var i,c,s;c=n,s=u,e=null===(i=e)?c:null===c?i:Array.isArray(c)?c.reduce(((e,t)=>l(e,t,e===c)),i):l(i,c,s),u=e===n})),e}trace(e,t,n,r){switch(this.p[e]){case 2:return this.v[e];case 1:return null}this.p[e]=1;let o=null;const a=t[e];if(null!==a)o=a;else if(!n.has(e))throw new Error(`Trace without source at pc ${e}`);if(o=this.mergeTraces(o,e,n,t,n,r),null!==o){const t=r[e];null!==t&&(o=p(o,t))}return this.v[e]=o,this.p[e]=2,o}buildSurvivorTraces(e,t,n,r,o){for(let a=0,u=e.length;a<u;++a){if(!n.has(a)){t[a]=null;continue}this.v.fill(null),this.p.fill(0);const u=this.mergeTraces(null,a,n,e,r,o);if(null===u)throw new Error(`No non-cyclic paths found to survivor ${a}`);t[a]=p(u,null)}this.v.fill(null)}}class h{constructor(e){this.g=[],this.k=[],this.m=[],this.A=new c(e.maxFromByPc),this.T=new c(e.maxSurvivorFromByPc),this.S=new f(e.programLength);for(let t=0;t<e.programLength;++t)this.g.push(null),this.k.push(null),this.m.push(null);this.k[0]=s.EMPTY}reset(e){this.A.clear(),this.T.clear(),this.g.fill(null),e&&(this.k.fill(null),this.m.fill(null),this.k[0]=s.EMPTY)}record(e,t){this.g[e]=t}has(e){return this.A.has(e)||null!==this.k[e]}add(e,t){this.A.add(e,t)}hasSurvivor(e){return this.T.has(e)}addSurvivor(e,t){this.T.add(e,t)}buildSurvivorTraces(){const e=this.k;this.S.buildSurvivorTraces(e,this.m,this.T,this.A,this.g),this.k=this.m,this.m=e}getTraces(e){const t=e.reduce(((e,t)=>l(e,this.k[t])),null);return null===t?[]:Array.isArray(t)?t:[t]}}class d{constructor(e){this.I=[],this.M=new i(e.programLength),this.N=new i(e.programLength),this.j=new h(e)}reset(){this.M.reset(),this.M.add(0,0),this.I.length=0,this.j.reset(!0)}getNextThreadPc(){return this.M.getNextPc()}step(e,t,n){const r=this.j.has(t);this.j.add(e,t);const o=this.M.getBadness(e)+n;r?this.M.reschedule(t,o):this.M.add(t,o)}stepToNextGeneration(e,t){const n=this.j.hasSurvivor(t);this.j.addSurvivor(e,t);const r=this.M.getBadness(e);n?this.N.reschedule(t,r):this.N.add(t,r)}accept(e){this.I.push(e),this.j.addSurvivor(e,e)}fail(e){}record(e,t){this.j.record(e,t)}nextGeneration(){this.j.buildSurvivorTraces(),this.j.reset(!1);const e=this.M;e.reset(),this.M=this.N,this.N=e}getAcceptingTraces(){return this.j.getTraces(this.I)}}class m{constructor(e){this.P=[],this.U=e,this.G=o.fromProgram(e),this.P.push(new d(this.G))}execute(e,t){const n=this.P.pop()||new d(this.G);n.reset();const r=e.length;let o,u=-1;do{let a=n.getNextThreadPc();if(null===a)break;for(++u,o=u>=r?null:e[u];null!==a;){const e=this.U[a];switch(e.op){case 0:null===o?n.accept(a):n.fail(a);break;case 2:{const r=e.func;if(null===r||r(t)){n.fail(a);break}n.step(a,a+1,0);break}case 1:n.step(a,a+1,e.data);break;case 5:if(null===o){n.fail(a);break}if(!(0,e.func)(o,e.data,t)){n.fail(a);break}n.stepToNextGeneration(a,a+1);break;case 3:{const t=e.data,r=t.length;if(0===r){n.fail(a);break}for(let e=0;e<r;++e)n.step(a,t[e],0);break}case 4:{const r=(0,e.func)(e.data,u,t);null!=r&&n.record(a,r),n.step(a,a+1,0);break}}a=n.getNextThreadPc()}n.nextGeneration()}while(null!==o);const i=new a(n.getAcceptingTraces());return n.reset(),this.P.push(n),i}}function y(e){const t=new r;return e(t),new m(t.program)}var g={Assembler:r,VM:m,compileVM:y};e.Assembler=r,e.VM=m,e.compileVM=y,e.default=g,Object.defineProperty(e,"V",{value:!0})}((e="undefined"!=typeof globalThis?globalThis:e||self).whynot={}),t=this,function(e){function t(e,t){return{success:!0,offset:e,value:t}}function n(e){return t(e,void 0)}function r(e,t,n=!1){return{success:!1,offset:e,expected:t,fatal:n}}function o(e){return e>65535?2:1}function a(e,t){return(a,u)=>{const i=a.codePointAt(u);return void 0!==i&&e(i)?n(u+o(i)):r(u,t)}}function u(e,n){return(r,o)=>{const a=e(r,o);return a.success?t(a.offset,n(a.value)):a}}function i(e){return(n,r)=>{let o=[],a=r;for(;;){const t=e(n,a);if(!t.success){if(t.fatal)return t;break}if(o.push(t.value),t.offset===a)break;a=t.offset}return t(a,o)}}function c(e){return(t,r)=>{let o=r;for(;;){const n=e(t,o);if(!n.success){if(n.fatal)return n;break}if(n.offset===o)break;o=n.offset}return n(o)}}function l(e,n,r){return(o,a)=>{const u=e(o,a);if(!u.success)return u;const i=n(o,u.offset);return i.success?t(i.offset,r(u.value,i.value)):i}}function s(e,t){return e}function p(e,t){return t}function f(e,t){return l(e,t,p)}function h(e,t){return l(e,t,s)}function d(e,t){return(o,a)=>e(o,a).success?r(a,t):n(a)}function m(e){return(t,n)=>{const o=e(t,n);return o.success?o:r(o.offset,o.expected,!0)}}const y=(e,t)=>e.length===t?n(t):r(t,["end of input"]);function g(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return[t,n.value]}e.codepoint=a,e.codepoints=function(e,t){return(o,a)=>{const u=a;for(;;){const t=o.codePointAt(a);if(void 0===t)break;if(!e(t))break;a+=t>65535?2:1}return void 0!==t&&a===u?r(a,t):n(a)}},e.collect=g,e.complete=function(e){return l(e,y,s)},e.consume=function(e){return u(e,(()=>{}))},e.cut=m,e.delimited=function(e,t,n,r=!1){return f(e,r?m(h(t,n)):h(t,n))},e.dispatch=function(e,t,n=0,o=[]){return(a,u)=>{const i=a.codePointAt(u+n);if(void 0===i)return r(u,o);const c=e[i];return void 0===c?void 0===t?r(u,o):t(a,u):c(a,u)}},e.end=y,e.error=r,e.except=function(e,t,n){return f(d(t,n),e)},e.filter=function(e,t,n,o){return(a,u)=>{const i=e(a,u);return i.success?t(i.value)?i:r(u,n,o):i}},e.filterUndefined=function(e){return u(e,(e=>e.filter((e=>void 0!==e))))},e.first=s,e.followed=h,e.map=u,e.not=d,e.ok=n,e.okWithValue=t,e.optional=function(e){return(n,r)=>{const o=e(n,r);return o.success||o.fatal?o:t(r,null)}},e.or=function(e,t){return(n,o)=>{let a=null;for(const r of e){const e=r(n,o);if(e.success)return e;if(null===a||e.offset>a.offset?a=e:e.offset===a.offset&&void 0===t&&(a.expected=a.expected.concat(e.expected)),e.fatal)return e}return t=t||(null==a?void 0:a.expected)||[],a&&(a.expected=t),a||r(o,t)}},e.peek=function(e){return(n,r)=>{const o=e(n,r);return o.success?t(r,o.value):o}},e.plus=function(e){return l(e,i(e),((e,t)=>[e].concat(t)))},e.plusConsumed=function(e){return l(e,c(e),p)},e.preceded=f,e.range=function(e,t,n){return a((n=>e<=n&&n<=t),n||[`${String.fromCodePoint(e)}-${String.fromCodePoint(t)}`])},e.recognize=function(e){return(n,r)=>{const o=e(n,r);return o.success?t(o.offset,n.slice(r,o.offset)):o}},e.second=p,e.sequence=function(...e){return(n,r)=>{const o=[];for(const t of e){const e=t(n,r);if(!e.success)return e;r=e.offset,o.push(e.value)}return t(r,o)}},e.sequenceConsumed=function(...e){return(t,r)=>{for(const n of e){const e=n(t,r);if(!e.success)return e;r=e.offset}return n(r)}},e.skipChars=function(e){return(t,a)=>{let u=e;for(;u>0;){const e=t.codePointAt(a);if(void 0===e)return r(a,["any character"]);a+=o(e),u-=1}return n(a)}},e.star=i,e.starConsumed=c,e.start=(e,t)=>0===t?n(t):r(t,["start of input"]),e.streaming=function(e){return function*(t,n){const r=e(t,n);return r.success&&(yield r.value),r}},e.streamingComplete=function(e){return function*(t,n){const r=yield*e(t,n);return r.success?y(t,r.offset):r}},e.streamingFilterUndefined=function(e){return function*(t,n){const r=e(t,n);let o=r.next();for(;!o.done;){const e=o.value;void 0!==e&&(yield e),o=r.next()}return o.value}},e.streamingOptional=function(e){return function*(t,r){const[o,a]=g(e(t,r));return a.success?(yield*o,a):a.fatal?a:n(r)}},e.streamingStar=function(e){return function*(t,r){for(;;){const[o,a]=g(e(t,r));if(!a.success)return a.fatal?a:n(r);if(yield*o,r===a.offset)return n(r);r=a.offset}}},e.streamingThen=function(e,t){return function*(n,r){const o=yield*e(n,r);return o.success?yield*t(n,o.offset):o}},e.then=l,e.token=function(e){return(n,o)=>{const a=o+e.length;return n.slice(o,a)===e?t(a,e):r(o,[e])}},Object.defineProperty(e,"__esModule",{value:!0})}((t="undefined"!=typeof globalThis?globalThis:t||self).prsc={}),n=this,function(e,t){function n(e){return t=>t===e}function r(e,t){if(null===e||null===t)throw new Error("unescaped hyphen may not be used as a range endpoint");if(t<e)throw new Error("character range is in the wrong order");return n=>e<=n&&n<=t}function o(e){return!0}function a(){return!1}function u(e,t){return n=>e(n)||t(n)}const i=-1,c=-2;function l(e,t){switch(t.kind){case"predicate":return void e.test(t.value);case"regexp":return void p(e,t.value,!1)}}function s(e,t){t.forEach((t=>{!function(e,t){const[n,{min:r,max:o}]=t;if(null!==o){for(let t=0;t<r;++t)l(e,n);for(let t=r;t<o;++t){const t=e.jump([]);t.data.push(e.program.length),l(e,n),t.data.push(e.program.length)}}else if(r>0){for(let t=0;t<r-1;++t)l(e,n);const t=e.program.length;l(e,n),e.jump([t]).data.push(e.program.length)}else{const t=e.program.length,r=e.jump([]);r.data.push(e.program.length),l(e,n),e.jump([t]),r.data.push(e.program.length)}}(e,t)}))}function p(e,t,n){const r=e.program.length,o=e.jump([]);n&&(o.data.push(e.program.length),e.test((()=>!0)),e.jump([r]));const a=[];if(t.forEach((t=>{o.data.push(e.program.length),s(e,t),a.push(e.jump([]))})),a.forEach((t=>{t.data.push(e.program.length)})),n){const t=e.program.length,n=e.jump([]);n.data.push(e.program.length),e.test((()=>!0)),e.jump([t]),n.data.push(e.program.length)}}function f(e,t){return{success:!0,offset:e,value:t}}function h(e){return f(e,void 0)}function d(e,t,n=!1){return{success:!1,offset:e,expected:t,fatal:n}}function m(e){return(t,n)=>{const r=n+e.length;return t.slice(n,r)===e?f(r,e):d(n,[e])}}function y(e,t){return(n,r)=>{const o=e(n,r);return o.success?f(o.offset,t(o.value)):o}}function g(e,t,n,r){return(o,a)=>{const u=e(o,a);return u.success?t(u.value)?u:d(a,n,r):u}}function v(e,t){return(n,r)=>{let o=null;for(const a of e){const e=a(n,r);if(e.success)return e;if(null===o||e.offset>o.offset?o=e:e.offset===o.offset&&void 0===t&&(o.expected=o.expected.concat(e.expected)),e.fatal)return e}return t=t||(null==o?void 0:o.expected)||[],o&&(o.expected=t),o||d(r,t)}}function w(e){return(t,n)=>{const r=e(t,n);return r.success||r.fatal?r:f(n,null)}}function A(e){return(t,n)=>{let r=[],o=n;for(;;){const n=e(t,o);if(!n.success){if(n.fatal)return n;break}if(r.push(n.value),n.offset===o)break;o=n.offset}return f(o,r)}}function x(e,t,n){return(r,o)=>{const a=e(r,o);if(!a.success)return a;const u=t(r,a.offset);return u.success?f(u.offset,n(a.value,u.value)):u}}function b(e){return x(e,A(e),((e,t)=>[e].concat(t)))}function B(e,t){return e}function E(e,t){return t}function N(e,t){return x(e,t,E)}function T(e,t){return x(e,t,B)}function I(e,t,n,r=!1){return N(e,r?F(T(t,n)):T(t,n))}function C(e,t){return(n,r)=>e(n,r).success?d(r,t):h(r)}function F(e){return(t,n)=>{const r=e(t,n);return r.success?r:d(r.offset,r.expected,!0)}}const O=(e,t)=>e.length===t?h(t):d(t,["end of input"]),S=["Lu","Ll","Lt","Lm","Lo","Mn","Mc","Me","Nd","Nl","No","Pc","Pd","Ps","Pe","Pi","Pf","Po","Zs","Zl","Zp","Sm","Sc","Sk","So","Cc","Cf","Co","Cn"],G={};function D(e){return e.codePointAt(0)}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(((e,t)=>{G[e]=t}));const R=e=>e===i||e===c;function k(e){return t=>!R(t)&&!e(t)}function U(e,t){return null===t?e:n=>e(n)&&!t(n)}const M=function(e,t){const n=new Map;let o=0;return e.forEach(((e,a)=>{const i=t[a];null!==e&&e.split("|").forEach((e=>{const t=n.get(e),a=r(o,o+i-1);n.set(e,t?u(t,a):a)})),o+=i})),n}(["BasicLatin","Latin-1Supplement","LatinExtended-A","LatinExtended-B","IPAExtensions","SpacingModifierLetters","CombiningDiacriticalMarks","GreekandCoptic|Greek","Cyrillic","CyrillicSupplement","Armenian","Hebrew","Arabic","Syriac","ArabicSupplement","Thaana","NKo","Samaritan","Mandaic","SyriacSupplement","ArabicExtended-B","ArabicExtended-A","Devanagari","Bengali","Gurmukhi","Gujarati","Oriya","Tamil","Telugu","Kannada","Malayalam","Sinhala","Thai","Lao","Tibetan","Myanmar","Georgian","HangulJamo","Ethiopic","EthiopicSupplement","Cherokee","UnifiedCanadianAboriginalSyllabics","Ogham","Runic","Tagalog","Hanunoo","Buhid","Tagbanwa","Khmer","Mongolian","UnifiedCanadianAboriginalSyllabicsExtended","Limbu","TaiLe","NewTaiLue","KhmerSymbols","Buginese","TaiTham","CombiningDiacriticalMarksExtended","Balinese","Sundanese","Batak","Lepcha","OlChiki","CyrillicExtended-C","GeorgianExtended","SundaneseSupplement","VedicExtensions","PhoneticExtensions","PhoneticExtensionsSupplement","CombiningDiacriticalMarksSupplement","LatinExtendedAdditional","GreekExtended","GeneralPunctuation","SuperscriptsandSubscripts","CurrencySymbols","CombiningDiacriticalMarksforSymbols|CombiningMarksforSymbols","LetterlikeSymbols","NumberForms","Arrows","MathematicalOperators","MiscellaneousTechnical","ControlPictures","OpticalCharacterRecognition","EnclosedAlphanumerics","BoxDrawing","BlockElements","GeometricShapes","MiscellaneousSymbols","Dingbats","MiscellaneousMathematicalSymbols-A","SupplementalArrows-A","BraillePatterns","SupplementalArrows-B","MiscellaneousMathematicalSymbols-B","SupplementalMathematicalOperators","MiscellaneousSymbolsandArrows","Glagolitic","LatinExtended-C","Coptic","GeorgianSupplement","Tifinagh","EthiopicExtended","CyrillicExtended-A","SupplementalPunctuation","CJKRadicalsSupplement","KangxiRadicals",null,"IdeographicDescriptionCharacters","CJKSymbolsandPunctuation","Hiragana","Katakana","Bopomofo","HangulCompatibilityJamo","Kanbun","BopomofoExtended","CJKStrokes","KatakanaPhoneticExtensions","EnclosedCJKLettersandMonths","CJKCompatibility","CJKUnifiedIdeographsExtensionA","YijingHexagramSymbols","CJKUnifiedIdeographs","YiSyllables","YiRadicals","Lisu","Vai","CyrillicExtended-B","Bamum","ModifierToneLetters","LatinExtended-D","SylotiNagri","CommonIndicNumberForms","Phags-pa","Saurashtra","DevanagariExtended","KayahLi","Rejang","HangulJamoExtended-A","Javanese","MyanmarExtended-B","Cham","MyanmarExtended-A","TaiViet","MeeteiMayekExtensions","EthiopicExtended-A","LatinExtended-E","CherokeeSupplement","MeeteiMayek","HangulSyllables","HangulJamoExtended-B","HighSurrogates","HighPrivateUseSurrogates","LowSurrogates","PrivateUseArea|PrivateUse","CJKCompatibilityIdeographs","AlphabeticPresentationForms","ArabicPresentationForms-A","VariationSelectors","VerticalForms","CombiningHalfMarks","CJKCompatibilityForms","SmallFormVariants","ArabicPresentationForms-B","HalfwidthandFullwidthForms","Specials","LinearBSyllabary","LinearBIdeograms","AegeanNumbers","AncientGreekNumbers","AncientSymbols","PhaistosDisc",null,"Lycian","Carian","CopticEpactNumbers","OldItalic","Gothic","OldPermic","Ugaritic","OldPersian",null,"Deseret","Shavian","Osmanya","Osage","Elbasan","CaucasianAlbanian","Vithkuqi",null,"LinearA","LatinExtended-F",null,"CypriotSyllabary","ImperialAramaic","Palmyrene","Nabataean",null,"Hatran","Phoenician","Lydian",null,"MeroiticHieroglyphs","MeroiticCursive","Kharoshthi","OldSouthArabian","OldNorthArabian",null,"Manichaean","Avestan","InscriptionalParthian","InscriptionalPahlavi","PsalterPahlavi",null,"OldTurkic",null,"OldHungarian","HanifiRohingya",null,"RumiNumeralSymbols","Yezidi","ArabicExtended-C","OldSogdian","Sogdian","OldUyghur","Chorasmian","Elymaic","Brahmi","Kaithi","SoraSompeng","Chakma","Mahajani","Sharada","SinhalaArchaicNumbers","Khojki",null,"Multani","Khudawadi","Grantha",null,"Newa","Tirhuta",null,"Siddham","Modi","MongolianSupplement","Takri",null,"Ahom",null,"Dogra",null,"WarangCiti","DivesAkuru",null,"Nandinagari","ZanabazarSquare","Soyombo","UnifiedCanadianAboriginalSyllabicsExtended-A","PauCinHau","DevanagariExtended-A",null,"Bhaiksuki","Marchen",null,"MasaramGondi","GunjalaGondi",null,"Makasar","Kawi",null,"LisuSupplement","TamilSupplement","Cuneiform","CuneiformNumbersandPunctuation","EarlyDynasticCuneiform",null,"Cypro-Minoan","EgyptianHieroglyphs","EgyptianHieroglyphFormatControls",null,"AnatolianHieroglyphs",null,"BamumSupplement","Mro","Tangsa","BassaVah","PahawhHmong",null,"Medefaidrin",null,"Miao",null,"IdeographicSymbolsandPunctuation","Tangut","TangutComponents","KhitanSmallScript","TangutSupplement",null,"KanaExtended-B","KanaSupplement","KanaExtended-A","SmallKanaExtension","Nushu",null,"Duployan","ShorthandFormatControls",null,"ZnamennyMusicalNotation",null,"ByzantineMusicalSymbols","MusicalSymbols","AncientGreekMusicalNotation",null,"KaktovikNumerals","MayanNumerals","TaiXuanJingSymbols","CountingRodNumerals",null,"MathematicalAlphanumericSymbols","SuttonSignWriting",null,"LatinExtended-G","GlagoliticSupplement","CyrillicExtended-D",null,"NyiakengPuachueHmong",null,"Toto","Wancho",null,"NagMundari",null,"EthiopicExtended-B","MendeKikakui",null,"Adlam",null,"IndicSiyaqNumbers",null,"OttomanSiyaqNumbers",null,"ArabicMathematicalAlphabeticSymbols",null,"MahjongTiles","DominoTiles","PlayingCards","EnclosedAlphanumericSupplement","EnclosedIdeographicSupplement","MiscellaneousSymbolsandPictographs","Emoticons","OrnamentalDingbats","TransportandMapSymbols","AlchemicalSymbols","GeometricShapesExtended","SupplementalArrows-C","SupplementalSymbolsandPictographs","ChessSymbols","SymbolsandPictographsExtended-A","SymbolsforLegacyComputing",null,"CJKUnifiedIdeographsExtensionB",null,"CJKUnifiedIdeographsExtensionC","CJKUnifiedIdeographsExtensionD","CJKUnifiedIdeographsExtensionE","CJKUnifiedIdeographsExtensionF",null,"CJKCompatibilityIdeographsSupplement",null,"CJKUnifiedIdeographsExtensionG","CJKUnifiedIdeographsExtensionH",null,"Tags",null,"VariationSelectorsSupplement",null,"SupplementaryPrivateUseArea-A|PrivateUse","SupplementaryPrivateUseArea-B|PrivateUse"],[128,128,128,208,96,80,112,144,256,48,96,112,256,80,48,64,64,64,32,16,48,96,128,128,128,128,128,128,128,128,128,128,128,128,256,160,96,256,384,32,96,640,32,96,32,32,32,32,128,176,80,80,48,96,32,32,144,80,128,64,64,80,48,16,48,16,48,128,64,64,256,256,112,48,48,48,80,64,112,256,256,64,32,160,128,32,96,256,192,48,16,256,128,128,256,256,96,32,128,48,80,96,32,128,128,224,16,16,64,96,96,48,96,16,32,48,16,256,256,6592,64,20992,1168,64,48,320,96,96,32,224,48,16,64,96,32,48,48,32,96,32,96,32,96,32,48,64,80,64,11184,80,896,128,1024,6400,512,80,688,16,16,16,32,32,144,240,16,128,128,64,80,64,48,128,32,64,32,48,32,48,32,64,32,80,48,48,80,48,64,80,64,384,64,64,64,32,32,48,48,32,32,32,64,32,96,96,32,32,32,64,64,32,32,48,80,80,48,128,64,288,32,64,64,48,64,64,48,32,128,80,48,80,48,96,32,80,48,48,80,128,128,128,96,160,128,96,32,80,48,80,176,80,80,96,96,64,96,80,96,16,64,96,160,112,80,64,96,80,304,32,96,80,16,64,1024,128,208,2624,112,1072,48,4e3,640,8576,576,48,96,48,144,688,96,96,160,64,32,6144,768,512,128,8816,16,256,48,64,400,2304,160,16,4688,208,48,256,256,80,112,32,32,96,32,128,1024,688,1104,256,48,96,112,80,320,48,64,464,48,736,32,224,32,96,784,80,64,80,176,256,256,48,112,96,256,256,768,80,48,128,128,128,256,256,112,144,256,1024,42720,32,4160,224,5776,7488,3088,544,1504,4944,4192,711760,128,128,240,65040,65536,65536]),H=function(e){const t=new Map,o=e.split(""),i=S.map((()=>[]));let c=0,l=0;for(;l<o.length;){const e=G[o[l]],t=(31&e)-2;let a=1+G[o[l+1]];switch(32&e?(a+=G[o[l+2]]<<6,a+=G[o[l+3]]<<12,a+=G[o[l+4]]<<18,l+=5):l+=2,t){case-2:{let e=0;for(let t=c;t<c+a;++t)i[e].push(n(t)),e=(e+1)%2;break}case-1:break;default:{const e=i[t];1===a?e.push(n(c)):e.push(r(c,c+a-1));break}}c+=a}const s=new Map;return S.forEach(((e,n)=>{const r=i[n].reduce(u,a);t.set(e,r);const o=e.charAt(0),c=s.get(o)||[];s.set(o,c),c.push(r)})),s.forEach(((e,n)=>{t.set(n,e.reduce(u,a))})),t}("bfUATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAbgUATAYDaATAZAaAGARAXAcAaAZAaAXAMBZADATBZAMAGASAMCTACWXACGDXXADHA3DAAPDAAtCAAFDBCAADCAABCCDBCCABCAABCCDCCAABCAAFCAADDAABCAABCBADCBDBGACADCGDCAEADACAEADACAEADAAPDAARDACAEADAABCBA7DFCAABCBDBABCCAJjDBAAGADaFRZDFLZNFEZGFAZAFAZQnvBAAADFAZACADABBFADCTACABDZBCATACCBACABACAABCQBACIDiCADBCCDCAXDDCADAXAABCBDBCyDvAhaAHEJBA1CAANDAgfBAABAClBBFATFDoTAOABBaBYABAHsOAHATAHBTAHBTAHABHGaBDGDTBBKcFXCTBYATBaBHKTAcATCGfFAGJHUKJTDGBHAmiBAATAGAHGcAaAHFFBHBaAHDGBKJGCaBGATNBAcAGAHAGdHaBBmYBAAHKGABNKJGgHIFBaATCFABBHAYBGVHDFAHIFAHCFAHEBBTOBAGYHCBBTABAGKBEGXZAGFBAcBBFHHGoFAHXcAHfIAG1HAIAHAGAICHHIDHAIBGAHGGJHBTBKJTAFAGOHAIBBAGHBBGBBBGVBAGGBAGABCGDBBHAGAICHDBBIBBBIBHAGABHIABDGBBAGCHBBBKJGBYBMFaAYAGATAHABBHBIABAGFBDGBBBGVBAGGBAGBBAGBBAGBBBHABAICHBBDHBBBHCBCHABGGDBAGABGKJHBGCHATABJHBIABAGIBAGCBAGVBAGGBAGBBAGEBBHAGAICHEBAHBIABAIBHABBGABOGBHBBBKJTAYABGGAHFBAHAIBBAGHBBGBBBGVBAGGBAGBBAGEBBHAGAIAHAIAHDBBIBBBIBHABGHBIABDGBBAGCHBBBKJaAGAMFBJHAGABAGFBCGCBAGDBCGBBAGABAGBBCGBBCGCBCGLBDIBHAIBBCICBAICHABBGABFIABNKJMCaFYAaABEHAICHAGHBAGCBAGWBAGPBBHAGAHCIDBAHCBAHDBGHBBAGCBBGABBGBHBBBKJBGTAMGaAGAHAIBTAGHBAGCBAGWBAGJBAGEBBHAGAIAHAIEBAHAIBBAIBHBBGIBBFGBBAGBHBBBKJBAGBIABLHBIBGIBAGCBAGoHBGAICHDBAICBAICHAGAaABDGCIAMGGCHBBBKJMIaAGFBAHAIBBAGRBCGXBAGIBAGABBGGBCHABDICHCBAHABAIHBFKJBBIBTABLGvHAGBHGBDYAGFFAHHTAKJTBBkGBBAGABAGEBAGXBAGABAGJHAGBHIGABBGEBAFABAHGBAKJBBGDBfGAaCTOaATAaCHBaFKJMJaAHAaAHAaAHAPAQAPAQAIBGHBAGjBDHNIAHETAHBGEHKBAHjBAaHHAaFBAaBTEaDTBBkGqIBHDIAHFIAHBIBHBGAKJTFGFIBHBGDHCGAICGBIGGCHDGMHAIBHBIFHAGAIAKJICHAaBClBACABECABBDqTAFADCmIFAABAGDBBGGBAGABAGDBBGoBAGDBBGgBAGDBBGGBAGABAGDBBGOBAG4BAGDBBmCBAABBHCTIMTBCGPaJBFiVBAABBDFBBOAmrJAAaATAGQUAGZPAQABCmKBAATCLCGHBGGRHCIABIGSHBIATBBIGRHBBLGMBAGCBAHBBLGzHBIAHGIHHAIBHKTCFATCYAGAHABBKJBFMJBFTFOATDHCcAHAKJBFGiFAG0BGGEHBGhHAGABEmFBAABJGeBAHCIDHBICBDIBHAIFHCBDaABCTBKJGdBBGEBKGrBDGZBFKJMABCahGWHBIBHABBTBG0IAHAIAHGBAHAIAHAIBHHIFHJBBHAKJBFKJBFTGFATFBBHNJAHPBwHDIAGuHAIAHEIAHAIEHAIBGHBCKJTGaJHIaITBBAHBIAGdIAHDIBHBIAHCGBKJGrHAIAHBICHAIAHCIBBHTDGjIHHHIBHBBCTEKJBCGCKJGdFFTBDIBGCqBBCCTHBHHCTAHMIAHGGDHAGFHAGBIAHBGABEDrF+DMFADhFkH/gVCAADHghBAADHCHDFBBCFBBDHCHDHCHDFBBCFBBDHBACABACABACABACADHCHDNBBDHEHDHEHDHEHDEBADBCDEAZADAZCDCBADBCDEAZCDDBBDBCDBAZCDHCEZCBBDCBADBCDEAZBBAUKcEOFTBRASAPARBSAPARATHVAWAcEUATIRASATDNBTCXAPAQATKXATANATJUAcEBAcJMAFABBMFXCPAQAFAMJXCPAQABAFMBCYgBOHMJDHAJCHLBOaBCAaDCAaBDACCDBCCDAaACAaBXACEaFCAaACAaACAaACDaADACDDAGDDAaBDBCBXECADDaAXAaBDAaAMPLiCADALDMAaBBDXEaEXBaDXAaBXAaBXAaGXAaeXBaBXAaAXAae3LEAAaHPAQAPAQAaTXBaGPAQA6QBAAXAadXYanXF6EBAABYaKBUM76NBAAMV62CAAXAaIXAa1XH6uBAAXA63DAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAMdarXEPAQAXePAQAPAQAPAQAPAQAPAQAXP6/DAA3CCAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAX+PAQAPAQAXfPAQA3BEAAavXUaBXFamBBafBA6oBAACvDvABCCDBAFCCADDACADFFBCBgjBAADAaFADHCCADABETDMATBDlBADABEDABBG3BGFATABNHAGWBIGGBAGGBAGGBAGGBAGGBAGGBAGGBAGGBAHfTBRASARASATCRASATARASATIOATBOATARASATBRASAPAQAPAQAPAQAPAQATEFATJOBTDOATAPATMaBTCPAQAPAQAPAQAPAQAOABhaZBA6YBAABL6VDAABZaLBDUATCaAFAGALAPAQAPAQAPAQAPAQAPAQAaBPAQAPAQAPAQAPAQAOAPAQBaALIHDIBOAFEaBLCFAGATAaBBAmVBAABBHBZBFBGAOAmZBAATAFCGABEGqBAmdBAABAaBMDaJGfajBLGPaeBAMJadMHaAMOafMJamMO6/EAAm/mBAa/mUIFAFAm2RAABCa2BIGnFFTBmLEAAFATCGPKJGBBTAtGAHAJCTAHJTAFAAbFBHBmFBAALJHBTFBHZWFIZBANDBA9FADHADCAAJFAZBADGAADDBATCDABCDAPCCADBECADABADABADAADBXFCCADAGAFBDAGGHAGCHAGDHAGWIBHBIAaDHABCMFaBYAaABFGzTDBHIBGxIPHBBHTBKJBFHRGFTCGATAGBHAKJGbHHTBGWHKIBBKTAGcBCHCIAGuHAIBHDIBHBICTMBAFAKJBDTBGEHAFAGIKJGEBAGoHFIBHBIBHBBIGCHAGHHAIABBKJBBTDGPFAGFaCGAIAHAIAGxHAGAHCGBHBGEHBGAHAGABXGBFATBGKIAHBIBTBGAFBIAHABJGFBBGFBBGFBIGGBAGGBADqZAFDDIFAZBBDjPBAAGiIBHAIBHAIBTAIAHABBKJBFmjuCABLGWBDGwhDgAA9/jBAmtFAABBmpBAABlDGBLDEBEGAHAGJXAGMBAGEBAGABAGBBAGBBAmrBAAZQBPmqFAAQAPAaPG/BBG1BGaABfGLYAaCHPTGPAQATABFHPTAOBNBPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQATBPAQATDNCTCBATDOAPAQAPAQAPAQATCXAOAXCBATAYATBBDGEBAmGCAABBcABATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAPAQATAPAQATBGJFAGsFBGeBCGFBBGFBBGFBBGCBCYBXAZAaAYBBAaAXDaBBJcCaBBBGLBAGZBAGSBAGBBAGOBBGNBhm6BAABETCBDMsBCaIL0MDaQMBaCBAaMBCaABuasHAhBCAAGcBCGwBOHAMaBDGfMDBIGTLAGHLABEGlHEBEGdBATAGjBDGHTALEBpCnDnmNBAABBKJBFCjBDDjBDGnBHGzBKTACKBACOBACGBACBBADKBADOBADGBADBhCBAAm2EAABIGVBJGHBXFFBAFpBAFIhEBAAGFBBGABAGrBAGBBCGABBGWBATAMHGWaBMGGeBHMIBvGSBAGBBEMEGVMFBCTAGZBETAB/G3BDMBGBMPBBMtGAHCBAHBBEHDGDBAGCBAGcBBHCBDHAMIBGTIBGGcMBTAGcMCBfGHaAGbHBBDMETGBIG1BCTGGVBBMHGSBEMHGRBGTDBLMGhPBAAmIBAAB2CyBMDyBGMFGjHDBHKJhlEAAMeBAGpBAHBOABBGBhKBAAHCGcMJGABHGVHKMDTEBVGRHDTDBlGUMGBTGWBIIAHAIAG0HOTGBDMTKJHAGBHBGABIHCIAGsICHDIBHBTBcATDHABJcABBGYBGKJBFHCGjHEIAHHBAKJTDGAIBGABHGiHATBGABIHBIAGvICHIIBGDTDHDTAIAHAKJGATAGATCBAMTBKGRBAGYICHCIBHAIAHBTFHAGBHAB9GGBAGABAGDBAGOBAGJTABFGuHAICHHBEKJBFHBIBBAGHBBGBBBGVBAGGBAGBBAGEBAHBGAIBHAIDBBIBBBICBBGABFIABEGEIBBBHGBCHEhKCAAG0ICHHIBHCIAHAGDTEKJTBBATAHAGCBdGvICHFIAHAIDHBIAHBGBTAGABHKJhlCAAGuICHDBBIDHBIAHBTWGDHBBhGvICHHIBHAIAHBTCGABKKJBFTMBSGqHAIAHAIBHFIAHAGATABFKJB1GaBBHCIBHDIAHEBDKJMBTCaAGGh4CAAGrICHIIAHBTAhjBAACfDfKJMIBLGHBBGABBGHBAGBBAGXIFBAIBBBHBIAHAGAIAGAIAHATCBIKJhFBAAGHBBGmICHDBBHBIDHAGATAGAIABaGAHJGnHFIAGAHDTHHABHGAHFIBHCGtHMIAHBTCGATEBMmIBAABGTJh1DAAGIBAGkIAHGBAHFIAHAGATEBJKJMSBCTBGdBBHVBAIAHGIAHBIAHBhIBAAGGBAGBBAGlHFBCHABAHBBAHGGAHABHKJBFGFBAGBBAGfIEBAHBBAIBHAIAHAGABGKJh1EAAGSHBIBTBBGHBGAIAGMBAGhIBHEBCIBHAIAHATMKJhVBAAGABOMUaHYDaQBMTAmZOAAhlBAAruBAABATEBKmDDAAhLpAAmgBAATBBMmvQAAcPHAGFHOhp+AAmGJAAh4GCAm4IAABGGeBAKJBDTBmOBAABAKJBFGdBBHETABJGvHGTEaDFDTAaABJKJBAMGBAGUBEGShvKAACfDfMWTDhkBAAmKBAABDHAGAI2BGHDFMB/FBTAFAHABKIBBNm3fBABHmVTAABpGIhmLCAFDBAFGBAFBBAmiEAABOGABcGCBBGABNGDBHmLGAAhDkAAmqBAABEGMBCGIBGGJBBaAHBTAcDhbJBAHtBBHWBI6zBAAB761DAABJamBBa7IBHCaCIFcHHHaBHGadHDa8BU6BBAAHCaAh5BAAMTBLMTBL6WBAABIMYhGCAACZDZCZDGBADRCZDZCABACBBBCABBCBBBCDBACHDDBADABADGBADKCZDZCBBACDBBCHBACGBADZCBBACDBACEBACABCCGBADZCZDZCZDZCZDZCZDZCZDZCZDbBBCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCADABBKx6/HAAH2aDHxaHHAaNHAaBTEBOHEBAHOhPRAADJGADTBFDFhUDAAHGBAHQBBHGBAHBBAHEBEF9BgHAhvBAAGsBCHGFGBBKJBDGAaAh/EAAGdHABQGrHDKJBEYAhPHAAGaFAHDKJhlLAAGGBAGDBAGBBAGOBAmEDAABBMIHGBoChDhHGFABDKJBDTBhQMAAM6aAMCYAMDhLBAAMsaAMOhBDAAGDBAGaBAGBBAGABBGABAGJBAGDBAGABAGABFGABDGABAGABAGABAGCBAGBBAGABBGABAGABAGABAGABAGABAGBBAGABBGDBAGGBAGDBAGDBAGABAGJBAGQBEGCBAGEBAGQBzXBhNEAAarBD6jBAABLaOBBaOBAaOBAakBJMM6gCAAB3acBMarBDaIBGaBBNaFhZCAA66DAAZE6XLAABDaQBCaMBC62BAABD6eBAABFaLBDaABOaLBDa3BHaJBFanBHadBBaBhNBAA6TFAABLaNBBaMBCaIBGatBAaGBHaNBDaIBGaIBG6SCAABAa2BkKJhFQAAmfbKABfm5ABABFmdDAABBmBaBABNmw0BAhewAAmdIAAhhXAAmKNBABEmfBBAhQxtCcABd8fBAAh/BAAnvDAAhP4PA99/PABB99/PA");function P(e){return 32===e||9===e||10===e||13===e}const j=[n(D(":")),r(D("A"),D("Z")),n(D("_")),r(D("a"),D("z")),r(192,214),r(216,246),r(192,214),r(216,246),r(248,767),r(880,893),r(895,8191),r(8204,8205),r(8304,8591),r(11264,12271),r(12289,55295),r(63744,64975),r(65008,65533),r(65536,983039)].reduce(u),X=[j,n(D("-")),n(D(".")),r(D("0"),D("9")),n(183),r(768,879),r(8255,8256)].reduce(u),L=H.get("Nd"),Y=k(L),Q=U(r(0,1114111),[H.get("P"),H.get("Z"),H.get("C")].reduce(u)),J=k(Q);function K(e){return 10!==e&&13!==e&&!R(e)}const q={s:P,S:k(P),i:j,I:k(j),c:X,C:k(X),d:L,D:Y,w:Q,W:J},_=m("*"),V=m("\\"),W=m("{"),Z=m("}"),$=m("["),z=m("]"),ee=m("^"),te=m("$"),ne=m(","),re=m("-"),oe=m("("),ae=m(")"),ue=m("."),ie=m("|"),ce=m("+"),le=m("?"),se=m("-["),pe=D("0");function fe(e){function t(e){return new Set(e.split("").map((e=>D(e))))}function a(e,t){const n=e.codePointAt(t);return void 0===n?d(t,["any character"]):f(t+String.fromCodePoint(n).length,n)}const l="xpath"===e.language?N(V,v([y(m("n"),(()=>10)),y(m("r"),(()=>13)),y(m("t"),(()=>9)),y(v([V,ie,ue,re,ee,le,_,ce,W,Z,te,oe,ae,$,z]),(e=>D(e)))])):N(V,v([y(m("n"),(()=>10)),y(m("r"),(()=>13)),y(m("t"),(()=>9)),y(v([V,ie,ue,re,ee,le,_,ce,W,Z,oe,ae,$,z]),(e=>D(e)))]));function s(e,n){const r=t(n);return x(m(e),w(g(a,(e=>r.has(e)),n.split(""))),((e,t)=>function(e){const t=H.get(e);if(null==t)throw new Error(`${e} is not a valid unicode category`);return t}(null===t?e:e+String.fromCodePoint(t))))}const p=v([s("L","ultmo"),s("M","nce"),s("N","dlo"),s("P","cdseifo"),s("Z","slp"),s("S","mcko"),s("C","cfon")]),h=[r(D("a"),D("z")),r(D("A"),D("Z")),r(D("0"),D("9")),n(45)].reduce(u),E=y(N(m("Is"),function(e){return(t,n)=>{const r=e(t,n);return r.success?f(r.offset,t.slice(n,r.offset)):r}}(b(g(a,h,["block identifier"])))),(t=>function(e,t){const n=M.get(e);if(void 0===n){if(t)return o;throw new Error(`The unicode block identifier "${e}" is not known.`)}return n}(t,"xpath"!==e.language))),S=v([p,E]),G=I(m("\\p{"),S,Z,!0),R=y(I(m("\\P{"),S,Z,!0),k),P=N(V,y(v("sSiIcCdDwW".split("").map((e=>m(e)))),(e=>q[e]))),j=y(ue,(()=>K)),X=v([P,G,R]),L=t("\\[]"),Y=g(a,(e=>!L.has(e)),["unescaped character"]),Q=v([l,Y]),J=v([y(re,(()=>null)),Q]),fe=x(J,N(re,J),r);function he(e,t){return[e].concat(t||[])}const de=y(function(e){return(t,n)=>{const r=e(t,n);return r.success?f(n,r.value):r}}(v([z,se])),(()=>null)),me=D("-"),ye=v([y(T(T(re,C($,["not ["])),de),(()=>me)),N(C(re,["not -"]),Q)]),ge=v([x(y(ye,n),v([function(e,t){return ge(e,t)},de]),he),x(v([fe,X]),v([we,de]),he)]),ve=v([x(y(Q,n),v([ge,de]),he),x(v([fe,X]),v([we,de]),he)]);function we(e,t){return ve(e,t)}const Ae=y(ve,(e=>e.reduce(u))),xe=y(N(ee,Ae),k),be=x(v([N(C(ee,["not ^"]),Ae),xe]),w(N(re,(function(e,t){return Be(e,t)}))),U),Be=I($,be,z,!0),Ee="xpath"===e.language?v([y(l,n),X,Be,j,y(ee,(()=>e=>e===i)),y(te,(()=>e=>e===c))]):v([y(l,n),X,Be,j]),Ne="xpath"===e.language?t(".\\?*+{}()|^$[]"):t(".\\?*+{}()|[]"),Te=g(a,(e=>!Ne.has(e)),["NormalChar"]),Ie=y(N(V,x(y(g(a,r(D("1"),D("9")),["digit"]),(e=>e-pe)),A(y(g(a,r(pe,D("9")),["digit"]),(e=>e-pe))),((e,t)=>{t.reduce(((e,t)=>10*e+t),e)}))),(e=>{throw new Error("Backreferences in XPath patterns are not yet implemented.")})),Ce="xpath"===e.language?v([y(Te,(e=>({kind:"predicate",value:n(e)}))),y(Ee,(e=>({kind:"predicate",value:e}))),y(I(oe,N(w(m("?:")),ke),ae,!0),(e=>({kind:"regexp",value:e}))),Ie]):v([y(Te,(e=>({kind:"predicate",value:n(e)}))),y(Ee,(e=>({kind:"predicate",value:e}))),y(I(oe,ke,ae,!0),(e=>({kind:"regexp",value:e})))]),Fe=y(b(y(g(a,r(pe,D("9")),["digit"]),(e=>e-pe))),(e=>e.reduce(((e,t)=>10*e+t)))),Oe=v([x(Fe,N(ne,Fe),((e,t)=>{if(t<e)throw new Error("quantifier range is in the wrong order");return{min:e,max:t}})),x(Fe,ne,(e=>({min:e,max:null}))),y(Fe,(e=>({min:e,max:e})))]),Se="xpath"===e.language?x(v([y(le,(()=>({min:0,max:1}))),y(_,(()=>({min:0,max:null}))),y(ce,(()=>({min:1,max:null}))),I(W,Oe,Z,!0)]),w(le),((e,t)=>e)):v([y(le,(()=>({min:0,max:1}))),y(_,(()=>({min:0,max:null}))),y(ce,(()=>({min:1,max:null}))),I(W,Oe,Z,!0)]),Ge=x(Ce,y(w(Se),(e=>null===e?{min:1,max:1}:e)),((e,t)=>[e,t])),De=A(Ge),Re=x(De,A(N(ie,F(De))),((e,t)=>[e].concat(t)));function ke(e,t){return Re(e,t)}const Ue=function(e){return x(e,O,B)}(Re);return function(e){let t;try{t=Ue(e,0)}catch(t){throw new Error(`Error parsing pattern "${e}": ${t instanceof Error?t.message:t}`)}return t.success?t.value:function(e,t,n){const r=n.map((e=>`"${e}"`));throw new Error(`Error parsing pattern "${e}" at offset ${t}: expected ${r.length>1?"one of "+r.join(", "):r[0]} but found "${e.slice(t,t+1)}"`)}(e,t.offset,t.expected)}}function he(e){return[...e].map((e=>e.codePointAt(0)))}e.compile=function(e,n={language:"xsd"}){const r=fe(n)(e),o=t.compileVM((e=>{p(e,r,"xpath"===n.language),e.accept()}));return function(e){const t="xpath"===n.language?[i,...he(e),c]:he(e);return o.execute(t).success}},Object.defineProperty(e,"__esModule",{value:!0})}((n="undefined"!=typeof globalThis?globalThis:n||self).xspattern={},n.whynot),(r=this).fontoxpath=(o=r.xspattern,a=r.prsc,function(e,t){const n="3.29.0",r={};var o;function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var u="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function i(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var c=i(this);function l(e,t){if(t)e:{var n=c;e=e.split(".");for(var r=0;r<e.length-1;r++){var o=e[r];if(!(o in n))break e;n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&u(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function p(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:a(e)}}function f(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function h(e){return e instanceof Array?e:f(p(e))}l("Symbol",(function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(e||"")+"_"+o++,e)}function n(e,t){this.h=e,u(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.h};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",o=0;return t})),l("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=c[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&u(r.prototype,e,{configurable:!0,writable:!0,value:function(){return s(a(this))}})}return e})),l("Symbol.asyncIterator",(function(e){return e||Symbol("Symbol.asyncIterator")}));var d,m="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)d=Object.setPrototypeOf;else{var y;e:{var g={a:!0},v={};try{v.__proto__=g,y=v.a;break e}catch(e){}y=!1}d=y?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var w=d;function A(e,t){if(e.prototype=m(t.prototype),e.prototype.constructor=e,w)w(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.zc=t.prototype}function x(){this.B=!1,this.o=null,this.l=void 0,this.h=1,this.da=0,this.v=null}function b(e){if(e.B)throw new TypeError("Generator is already running");e.B=!0}function B(e,t){e.v={kc:t,mc:!0},e.h=e.da}function E(e){this.h=new x,this.o=e}function N(e,t){b(e.h);var n=e.h.o;return n?T(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.h.return):(e.h.return(t),I(e))}function T(e,t,n,r){try{var o=t.call(e.h.o,n);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return e.h.B=!1,o;var a=o.value}catch(t){return e.h.o=null,B(e.h,t),I(e)}return e.h.o=null,r.call(e.h,a),I(e)}function I(e){for(;e.h.h;)try{var t=e.o(e.h);if(t)return e.h.B=!1,{value:t.value,done:!1}}catch(t){e.h.l=void 0,B(e.h,t)}if(e.h.B=!1,e.h.v){if(t=e.h.v,e.h.v=null,t.mc)throw t.kc;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function C(e){this.next=function(t){return b(e.h),e.h.o?t=T(e,e.h.o.next,t,e.h.s):(e.h.s(t),t=I(e)),t},this.throw=function(t){return b(e.h),e.h.o?t=T(e,e.h.o.throw,t,e.h.s):(B(e.h,t),t=I(e)),t},this.return=function(t){return N(e,t)},this[Symbol.iterator]=function(){return this}}function F(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,o){function a(e){e.done?r(e.value):Promise.resolve(e.value).then(t,n).then(a,o)}a(e.next())}))}function O(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}x.prototype.s=function(e){this.l=e},x.prototype.return=function(e){this.v={return:e},this.h=this.da},l("Promise",(function(e){function t(e){this.o=0,this.v=void 0,this.h=[],this.da=!1;var t=this.B();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.h=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.o=function(e){if(null==this.h){this.h=[];var t=this;this.v((function(){t.l()}))}this.h.push(e)};var o=c.setTimeout;n.prototype.v=function(e){o(e,0)},n.prototype.l=function(){for(;this.h&&this.h.length;){var e=this.h;this.h=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.B(e)}}}this.h=null},n.prototype.B=function(e){this.v((function(){throw e}))},t.prototype.B=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.la),reject:e(this.l)}},t.prototype.la=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.ab(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.S(e):this.s(e)}},t.prototype.S=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.Ba(t,e):this.s(e)},t.prototype.l=function(e){this.ta(2,e)},t.prototype.s=function(e){this.ta(1,e)},t.prototype.ta=function(e,t){if(0!=this.o)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.o);this.o=e,this.v=t,2===this.o&&this.pa(),this.A()},t.prototype.pa=function(){var e=this;o((function(){if(e.K()){var t=c.console;void 0!==t&&t.error(e.v)}}),1)},t.prototype.K=function(){if(this.da)return!1;var e=c.CustomEvent,t=c.Event,n=c.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=c.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.v,n(e))},t.prototype.A=function(){if(null!=this.h){for(var e=0;e<this.h.length;++e)a.o(this.h[e]);this.h=null}};var a=new n;return t.prototype.ab=function(e){var t=this.B();e.rb(t.resolve,t.reject)},t.prototype.Ba=function(e,t){var n=this.B();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{o(e(t))}catch(e){a(e)}}:t}var o,a,u=new t((function(e,t){o=e,a=t}));return this.rb(r(e,o),r(n,a)),u},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.rb=function(e,t){function n(){switch(r.o){case 1:e(r.v);break;case 2:t(r.v);break;default:throw Error("Unexpected state: "+r.o)}}var r=this;null==this.h?a.o(n):this.h.push(n),this.da=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var o=p(e),a=o.next();!a.done;a=o.next())r(a.value).rb(t,n)}))},t.all=function(e){var n=p(e),o=n.next();return o.done?r([]):new t((function(e,t){function a(t){return function(n){u[t]=n,0==--i&&e(u)}}var u=[],i=0;do{u.push(void 0),i++,r(o.value).rb(a(u.length-1),t),o=n.next()}while(!o.done)}))},t}));var G="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var o in r)S(r,o)&&(e[o]=r[o])}return e};function D(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function R(e,t){return e=void 0!==e?String(e):" ",0<t&&e?e.repeat(Math.ceil(t/e.length)).substring(0,t):""}function k(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,o=0;o<r;o++){var a=e[o];if(t.call(n,a,o,e))return{Jb:o,Qb:a}}return{Jb:-1,Qb:void 0}}function U(e){return e||Array.prototype.fill}function M(e,t){e instanceof String&&(e+="");var n=0,r=!1,o={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o}function H(e,t){if(!("0"!==e&&"-0"!==e||"0"!==t&&"-0"!==t))return 0;var n=/(?:\+|(-))?(\d+)?(?:\.(\d+))?/;e=n.exec(e+"");var r=n.exec(t+""),o=!e[1],a=!r[1];return t=(e[2]||"").replace(/^0*/,""),n=(r[2]||"").replace(/^0*/,""),e=e[3]||"",r=r[3]||"",o&&!a?1:!o&&a?-1:(o=o&&a,t.length>n.length?o?1:-1:t.length<n.length?o?-1:1:t>n?o?1:-1:t<n?o?-1:1:(t=Math.max(e.length,r.length),(n=e.padEnd(t,"0"))>(t=r.padEnd(t,"0"))?o?1:-1:n<t?o?-1:1:0))}function P(e,t){return!(-1<(e=e.toString()).indexOf(".")&&0===t)&&(!(e=/^[-+]?0*([1-9]\d*)?(?:\.((?:\d*[1-9])*)0*)?$/.exec(e))[2]||e[2].length<=t)}function j(){return function(e,t){return 1>H(e,t)}}function X(){return function(e,t){return 0>H(e,t)}}function L(){return function(e,t){return-1<H(e,t)}}function Y(){return function(e,t){return 0<H(e,t)}}function Q(e,t){switch(t){case"required":return/(Z)|([+-])([01]\d):([0-5]\d)$/.test(e.toString());case"prohibited":return!/(Z)|([+-])([01]\d):([0-5]\d)$/.test(e.toString());case"optional":return!0}}function J(e){switch(e){case 1:case 0:case 6:case 3:case 18:case 22:case 21:case 20:case 23:case 44:return{};case 4:return{na:P,ya:j(),xc:X(),za:L(),yc:Y()};case 9:case 8:case 7:case 11:case 12:case 13:case 15:case 14:return{Ea:Q};default:return null}}l("Object.assign",(function(e){return e||G})),l("String.prototype.repeat",(function(e){return e||function(e){var t=D(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),l("String.prototype.padEnd",(function(e){return e||function(e,t){var n=D(this,null,"padStart");return n+R(t,e-n.length)}})),l("WeakMap",(function(e){function t(e){if(this.h=(c+=Math.random()+1).toString(),e){e=p(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function o(e){if(!S(e,i)){var t=new n;u(e,i,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&o(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var i="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var c=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(o(e),!S(e,i))throw Error("WeakMap key fail: "+e);return e[i][this.h]=t,this},t.prototype.get=function(e){return r(e)&&S(e,i)?e[i][this.h]:void 0},t.prototype.has=function(e){return r(e)&&S(e,i)&&S(e[i],this.h)},t.prototype.delete=function(e){return!!(r(e)&&S(e,i)&&S(e[i],this.h))&&delete e[i][this.h]},t})),l("Map",(function(e){function t(){var e={};return e.Ga=e.next=e.head=e}function n(e,t){var n=e.h;return s((function(){if(n){for(;n.head!=e.h;)n=n.Ga;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++u,a.set(t,n)):n="p_"+t;var r=e.o[n];if(r&&S(e.o,n))for(e=0;e<r.length;e++){var o=r[e];if(t!=t&&o.key!=o.key||t===o.key)return{id:n,list:r,index:e,ka:o}}return{id:n,list:r,index:-1,ka:void 0}}function o(e){if(this.o={},this.h=t(),this.size=0,e){e=p(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(p([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&"s"==o.value[1]&&!((o=r.next()).done||4!=o.value[0].x||"t"!=o.value[1]||!r.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;o.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.o[n.id]=[]),n.ka?n.ka.value=t:(n.ka={next:this.h,Ga:this.h.Ga,head:this.h,key:e,value:t},n.list.push(n.ka),this.h.Ga.next=n.ka,this.h.Ga=n.ka,this.size++),this},o.prototype.delete=function(e){return!(!(e=r(this,e)).ka||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.o[e.id],e.ka.Ga.next=e.ka.next,e.ka.next.Ga=e.ka.Ga,e.ka.head=null,this.size--,0))},o.prototype.clear=function(){this.o={},this.h=this.h.Ga=t(),this.size=0},o.prototype.has=function(e){return!!r(this,e).ka},o.prototype.get=function(e){return(e=r(this,e).ka)&&e.value},o.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},o.prototype.keys=function(){return n(this,(function(e){return e.key}))},o.prototype.values=function(){return n(this,(function(e){return e.value}))},o.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},o.prototype[Symbol.iterator]=o.prototype.entries;var u=0;return o})),l("Array.prototype.find",(function(e){return e||function(e,t){return k(this,e,t).Qb}})),l("String.prototype.startsWith",(function(e){return e||function(e,t){var n=D(this,e,"startsWith"),r=n.length,o=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<o&&t<r;)if(n[t++]!=e[a++])return!1;return a>=o}})),l("Array.prototype.fill",(function(e){return e||function(e,t,n){var r=this.length||0;for(0>t&&(t=Math.max(0,r+t)),(null==n||n>r)&&(n=r),0>(n=Number(n))&&(n=Math.max(0,r+n)),t=Number(t||0);t<n;t++)this[t]=e;return this}})),l("Int8Array.prototype.fill",U),l("Uint8Array.prototype.fill",U),l("Uint8ClampedArray.prototype.fill",U),l("Int16Array.prototype.fill",U),l("Uint16Array.prototype.fill",U),l("Int32Array.prototype.fill",U),l("Uint32Array.prototype.fill",U),l("Float32Array.prototype.fill",U),l("Float64Array.prototype.fill",U),l("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],o="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof o){e=o.call(e);for(var a=0;!(o=e.next()).done;)r.push(t.call(n,o.value,a++))}else for(o=e.length,a=0;a<o;a++)r.push(t.call(n,e[a],a));return r}})),l("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),l("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var o=n[t];if(o===e||Object.is(o,e))return!0}return!1}})),l("String.prototype.includes",(function(e){return e||function(e,t){return-1!==D(this,e,"includes").indexOf(e,t||0)}})),l("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991})),l("Number.MIN_SAFE_INTEGER",(function(){return-9007199254740991})),l("Math.trunc",(function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}})),l("Number.isFinite",(function(e){return e||function(e){return"number"==typeof e&&!isNaN(e)&&1/0!==e&&-1/0!==e}})),l("String.prototype.padStart",(function(e){return e||function(e,t){var n=D(this,null,"padStart");return R(t,e-n.length)+n}})),l("Array.prototype.keys",(function(e){return e||function(){return M(this,(function(e){return e}))}})),l("Number.isInteger",(function(e){return e||function(e){return!!Number.isFinite(e)&&e===Math.floor(e)}})),l("Number.isSafeInteger",(function(e){return e||function(e){return Number.isInteger(e)&&Math.abs(e)<=Number.MAX_SAFE_INTEGER}})),l("Array.prototype.findIndex",(function(e){return e||function(e,t){return k(this,e,t).Jb}})),l("String.prototype.endsWith",(function(e){return e||function(e,t){var n=D(this,e,"endsWith");void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;0<r&&0<t;)if(n[--t]!=e[--r])return!1;return 0>=r}})),l("String.fromCodePoint",(function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var r=Number(arguments[n]);if(0>r||1114111<r||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);65535>=r?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(r>>>10&1023|55296),t+=String.fromCharCode(1023&r|56320))}return t}})),l("String.prototype.codePointAt",(function(e){return e||function(e){var t=D(this,null,"codePointAt"),n=t.length;if(0<=(e=Number(e)||0)&&e<n){e|=0;var r=t.charCodeAt(e);return 55296>r||56319<r||e+1===n||56320>(e=t.charCodeAt(e+1))||57343<e?r:1024*(r-55296)+e+9216}}})),l("Set",(function(e){function t(e){if(this.h=new Map,e){e=p(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.h.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(p([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&o.value[1]==t&&!(o=r.next()).done&&o.value[0]!=t&&4==o.value[0].x&&o.value[1]==o.value[0]&&r.next().done}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.h.set(e,e),this.size=this.h.size,this},t.prototype.delete=function(e){return e=this.h.delete(e),this.size=this.h.size,e},t.prototype.clear=function(){this.h.clear(),this.size=0},t.prototype.has=function(e){return this.h.has(e)},t.prototype.entries=function(){return this.h.entries()},t.prototype.values=function(){return this.h.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.h.forEach((function(r){return e.call(t,r,r,n)}))},t)})),l("Math.log10",(function(e){return e||function(e){return Math.log(e)/Math.LN10}})),l("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)S(e,t)&&n.push(e[t]);return n}})),l("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),l("Array.prototype.values",(function(e){return e||function(){return M(this,(function(e,t){return t}))}})),l("Object.getOwnPropertySymbols",(function(e){return e||function(){return[]}}));var K={},q={};function _(e){return/^([+-]?(\d*(\.\d*)?([eE][+-]?\d*)?|INF)|NaN)$/.test(e)}function V(e){return/^[_:A-Za-z][-._:A-Za-z0-9]*$/.test(e)}function W(e){return V(e)&&/^[_A-Za-z]([-._A-Za-z0-9])*$/.test(e)}function Z(e){return 1===(e=e.split(":")).length?W(e[0]):2===e.length&&W(e[0])&&W(e[1])}function $(e){return!/[\u0009\u000A\u000D]/.test(e)}function z(e){return W(e)}var ee=new Map([[45,function(){return!0}],[46,function(){return!0}],[1,function(){return!0}],[0,function(e){return/^(0|1|true|false)$/.test(e)}],[6,function(e){return _(e)}],[3,_],[4,function(e){return/^[+-]?\d*(\.\d*)?$/.test(e)}],[18,function(e){return/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.test(e)}],[9,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[8,function(e){return/^(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[7,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[11,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[12,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[13,function(e){return/^--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[15,function(e){return/^---(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[14,function(e){return/^--(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[22,function(e){return/^([0-9A-Fa-f]{2})*$/.test(e)}],[21,function(e){return new RegExp(/^((([A-Za-z0-9+/] ?){4})*((([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/])|(([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=)|(([A-Za-z0-9+/] ?)[AQgw] ?= ?=)))?$/).test(e)}],[20,function(){return!0}],[44,Z],[48,$],[52,function(e){return $(e)&&!/^ | {2,}| $/.test(e)}],[51,function(e){return/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/.test(e)}],[50,function(e){return/^[-._:A-Za-z0-9]+$/.test(e)}],[25,V],[23,Z],[24,W],[42,z],[41,z],[26,function(e){return W(e)}],[5,function(e){return/^[+-]?\d+$/.test(e)}],[16,function(e){return/^-?P[0-9]+(Y([0-9]+M)?|M)$/.test(e)}],[17,function(e){return/^-?P([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9]+)?S)?)?$/.test(e)}]]),te=Object.create(null);function ne(e,t){if(!te[t])throw Error("Unknown type");return{type:t,value:e}}[{D:0,name:59},{D:0,name:46,parent:59,L:{whiteSpace:"preserve"}},{D:0,name:19,parent:46},{D:0,name:1,parent:46},{D:0,name:0,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:4,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:6,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:3,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:18,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:9,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:8,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:7,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:11,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:12,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:13,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:15,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:14,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:22,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:21,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:20,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:23,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:44,parent:46,L:{whiteSpace:"collapse"}},{D:1,name:10,T:9,L:{whiteSpace:"collapse",Ea:"required"}},{D:1,name:48,T:1,L:{whiteSpace:"replace"}},{D:1,name:52,T:48,L:{whiteSpace:"collapse"}},{D:1,name:51,T:52,L:{whiteSpace:"collapse"}},{D:1,name:50,T:52,L:{whiteSpace:"collapse"}},{D:2,name:49,type:50,L:{minLength:1,whiteSpace:"collapse"}},{D:1,name:25,T:52,L:{whiteSpace:"collapse"}},{D:1,name:24,T:25,L:{whiteSpace:"collapse"}},{D:1,name:42,T:24,L:{whiteSpace:"collapse"}},{D:1,name:41,T:24,L:{whiteSpace:"collapse"}},{D:2,name:43,type:41,L:{minLength:1,whiteSpace:"collapse"}},{D:1,name:26,T:24,L:{whiteSpace:"collapse"}},{D:2,name:40,type:26,L:{minLength:1,whiteSpace:"collapse"}},{D:0,name:5,parent:4,L:{na:0,whiteSpace:"collapse"}},{D:1,name:27,T:5,L:{na:0,ya:"0",whiteSpace:"collapse"}},{D:1,name:28,T:27,L:{na:0,ya:"-1",whiteSpace:"collapse"}},{D:1,name:31,T:5,L:{na:0,ya:"9223372036854775807",za:"-9223372036854775808",whiteSpace:"collapse"}},{D:1,name:32,T:31,L:{na:0,ya:"2147483647",za:"-2147483648",whiteSpace:"collapse"}},{D:1,name:33,T:32,L:{na:0,ya:"32767",za:"-32768",whiteSpace:"collapse"}},{D:1,name:34,T:33,L:{na:0,ya:"127",za:"-128",whiteSpace:"collapse"}},{D:1,name:30,T:5,L:{na:0,za:"0",whiteSpace:"collapse"}},{D:1,name:36,T:30,L:{na:0,ya:"18446744073709551615",za:"0",whiteSpace:"collapse"}},{D:1,name:35,T:36,L:{na:0,ya:"4294967295",za:"0",whiteSpace:"collapse"}},{D:1,name:38,T:35,L:{na:0,ya:"65535",za:"0",whiteSpace:"collapse"}},{D:1,name:37,T:38,L:{na:0,ya:"255",za:"0",whiteSpace:"collapse"}},{D:1,name:29,T:30,L:{na:0,za:"1",whiteSpace:"collapse"}},{D:1,name:16,T:18,L:{whiteSpace:"collapse"}},{D:1,name:17,T:18,L:{whiteSpace:"collapse"}},{D:1,name:60,T:59},{D:3,name:39,Fa:[]},{D:1,name:61,T:60},{D:1,name:62,T:60},{D:0,name:53,parent:59},{D:1,name:54,T:53},{D:1,name:58,T:53},{D:1,name:47,T:53},{D:1,name:56,T:53},{D:1,name:57,T:53},{D:1,name:55,T:53},{D:3,name:2,Fa:[4,5,6,3]},{D:3,name:63,Fa:[]}].forEach((function(e){var t=e.name,n=e.L||{};switch(e.D){case 0:e=e.parent?te[e.parent]:null;var r=ee.get(t)||null;te[t]={D:0,type:t,Na:n,parent:e,kb:r,Pa:J(t),Fa:[]};break;case 1:e=te[e.T],r=ee.get(t)||null,te[t]={D:1,type:t,Na:n,parent:e,kb:r,Pa:e.Pa,Fa:[]};break;case 2:te[t]={D:2,type:t,Na:n,parent:te[e.type],kb:null,Pa:K,Fa:[]};break;case 3:e=e.Fa.map((function(e){return te[e]})),te[t]={D:3,type:t,Na:n,parent:null,kb:null,Pa:q,Fa:e}}}));var re=ne(!0,0),oe=ne(!1,0);function ae(e){return Error("FORG0006: "+(void 0===e?"A wrong argument type was specified in a function call.":e))}function ue(e,t){this.done=e,this.value=t}var ie=new ue(!0,void 0);function ce(e){return new ue(!1,e)}function le(e,t){if(3===t.D)return!!t.Fa.find((function(t){return le(e,t)}));for(;e;){if(e.type===t.type)return!0;if(3===e.D)return!!e.Fa.find((function(e){return se(e.type,t.type)}));e=e.parent}return!1}function se(e,t){return e===t||le(te[e],te[t])}function pe(e){this.o=Ie,this.h=e;var t=-1;this.value={next:function(){return++t>=e.length?ie:ce(e[t])}}}function fe(){this.value={next:function(){return ie}}}function he(e,t){this.type=e,this.value=t}(o=pe.prototype).sb=function(){return this},o.filter=function(e){var t=this,n=-1;return this.o.create({next:function(){for(n++;n<t.h.length&&!e(t.h[n],n,t);)n++;return n>=t.h.length?ie:ce(t.h[n])}})},o.first=function(){return this.h[0]},o.O=function(){return this.h},o.ha=function(){if(se(this.h[0].type,53))return!0;throw ae("Cannot determine the effective boolean value of a sequence with a length higher than one.")},o.Qa=function(){return this.h.length},o.G=function(){return!1},o.wa=function(){return!1},o.map=function(e){var t=this,n=-1;return this.o.create({next:function(){return++n>=t.h.length?ie:ce(e(t.h[n],n,t))}},this.h.length)},o.M=function(e){return e(this.h)},o.Z=function(e){return e.multiple?e.multiple(this):e.default(this)},(o=fe.prototype).sb=function(){return this},o.filter=function(){return this},o.first=function(){return null},o.O=function(){return[]},o.ha=function(){return!1},o.Qa=function(){return 0},o.G=function(){return!0},o.wa=function(){return!1},o.map=function(){return this},o.M=function(e){return e([])},o.Z=function(e){return e.empty?e.empty(this):e.default(this)};var de={},me=(de[0]="xs:boolean",de[1]="xs:string",de[2]="xs:numeric",de[3]="xs:double",de[4]="xs:decimal",de[5]="xs:integer",de[6]="xs:float",de[7]="xs:date",de[8]="xs:time",de[9]="xs:dateTime",de[10]="xs:dateTimeStamp",de[11]="xs:gYearMonth",de[12]="xs:gYear",de[13]="xs:gMonthDay",de[14]="xs:gMonth",de[15]="xs:gDay",de[16]="xs:yearMonthDuration",de[17]="xs:dayTimeDuration",de[18]="xs:duration",de[19]="xs:untypedAtomic",de[20]="xs:anyURI",de[21]="xs:base64Binary",de[22]="xs:hexBinary",de[23]="xs:QName",de[24]="xs:NCName",de[25]="xs:Name",de[26]="xs:ENTITY",de[27]="xs:nonPositiveInteger",de[28]="xs:negativeInteger",de[29]="xs:positiveInteger",de[30]="xs:nonNegativeInteger",de[31]="xs:long",de[32]="xs:int",de[33]="xs:short",de[34]="xs:byte",de[35]="xs:unsignedInt",de[36]="xs:unsignedLong",de[37]="xs:unsignedByte",de[38]="xs:unsignedShort",de[39]="xs:error",de[40]="xs:ENTITIES",de[41]="xs:IDREF",de[42]="xs:ID",de[43]="xs:IDREFS",de[44]="xs:NOTATION",de[45]="xs:anySimpleType",de[46]="xs:anyAtomicType",de[47]="attribute()",de[48]="xs:normalizedString",de[49]="xs:NMTOKENS",de[50]="xs:NMTOKEN",de[51]="xs:language",de[52]="xs:token",de[53]="node()",de[54]="element()",de[55]="document-node()",de[56]="text()",de[57]="processing-instruction()",de[58]="comment()",de[59]="item()",de[60]="function(*)",de[61]="map(*)",de[62]="array(*)",de[63]="none",de),ye={"xs:boolean":0,"xs:string":1,"xs:numeric":2,"xs:double":3,"xs:decimal":4,"xs:integer":5,"xs:float":6,"xs:date":7,"xs:time":8,"xs:dateTime":9,"xs:dateTimeStamp":10,"xs:gYearMonth":11,"xs:gYear":12,"xs:gMonthDay":13,"xs:gMonth":14,"xs:gDay":15,"xs:yearMonthDuration":16,"xs:dayTimeDuration":17,"xs:duration":18,"xs:untypedAtomic":19,"xs:anyURI":20,"xs:base64Binary":21,"xs:hexBinary":22,"xs:QName":23,"xs:NCName":24,"xs:Name":25,"xs:ENTITY":26,"xs:nonPositiveInteger":27,"xs:negativeInteger":28,"xs:positiveInteger":29,"xs:nonNegativeInteger":30,"xs:long":31,"xs:int":32,"xs:short":33,"xs:byte":34,"xs:unsignedInt":35,"xs:unsignedLong":36,"xs:unsignedByte":37,"xs:unsignedShort":38,"xs:error":39,"xs:ENTITIES":40,"xs:IDREF":41,"xs:ID":42,"xs:IDREFS":43,"xs:NOTATION":44,"xs:anySimpleType":45,"xs:anyAtomicType":46,"attribute()":47,"xs:normalizedString":48,"xs:NMTOKENS":49,"xs:NMTOKEN":50,"xs:language":51,"xs:token":52,"node()":53,"element()":54,"document-node()":55,"text()":56,"processing-instruction()":57,"comment()":58,"item()":59,"function(*)":60,"map(*)":61,"array(*)":62};function ge(e){return 2===e.g?me[e.type]+"*":1===e.g?me[e.type]+"+":0===e.g?me[e.type]+"?":me[e.type]}function ve(e){if("none"===e)throw Error('XPST0051: The type "none" could not be found');if(!e.startsWith("xs:")&&0<=e.indexOf(":"))throw Error("XPST0081: Invalid prefix for input "+e);var t=ye[e];if(void 0===t)throw Error('XPST0051: The type "'+e+'" could not be found');return t}function we(e){switch(e[e.length-1]){case"*":return{type:ve(e.substr(0,e.length-1)),g:2};case"?":return{type:ve(e.substr(0,e.length-1)),g:0};case"+":return{type:ve(e.substr(0,e.length-1)),g:1};default:return{type:ve(e),g:3}}}function Ae(e){switch(e){case"*":return 2;case"?":return 0;case"+":return 1;default:return 3}}function xe(e){var t=e.value;if(se(e.type,53))return!0;if(se(e.type,0))return t;if(se(e.type,1)||se(e.type,20)||se(e.type,19))return 0!==t.length;if(se(e.type,2))return!isNaN(t)&&0!==t;throw ae("Cannot determine the effective boolean value of a value with the type "+me[e.type])}function be(e,t){var n=this;this.B=Ie,this.value={next:function(t){return null!==n.o&&n.h>=n.o?ie:void 0!==n.v[n.h]?ce(n.v[n.h++]):(t=e.next(t)).done?(n.o=n.h,t):((n.l||2>n.h)&&(n.v[n.h]=t.value),n.h++,t)}},this.l=!1,this.v=[],this.h=0,this.o=void 0===t?null:t}function Be(e,t){e.h=void 0===t?0:t}function Ee(e){this.v=Ie,this.h=e;var t=!1;this.value={next:function(){return t?ie:(t=!0,ce(e))}},this.o=null}(o=be.prototype).sb=function(){return this.B.create(this.O())},o.filter=function(e){var t=this,n=-1,r=this.value;return this.B.create({next:function(o){for(n++,o=r.next(o);!o.done&&!e(o.value,n,t);)n++,o=r.next(0);return o}})},o.first=function(){if(void 0!==this.v[0])return this.v[0];var e=this.value.next(0);return Be(this),e.done?null:e.value},o.O=function(){if(this.h>this.v.length&&this.o!==this.v.length)throw Error("Implementation error: Sequence Iterator has progressed.");var e=this.value;this.l=!0;for(var t=e.next(0);!t.done;)t=e.next(0);return this.v},o.ha=function(){var e=this.value,t=this.h;Be(this);var n=e.next(0);if(n.done)return Be(this,t),!1;if(se((n=n.value).type,53))return Be(this,t),!0;if(!e.next(0).done)throw ae("Cannot determine the effective boolean value of a sequence with a length higher than one.");return Be(this,t),xe(n)},o.Qa=function(e){if(null!==this.o)return this.o;if(void 0!==e&&e)return-1;e=this.h;var t=this.O().length;return Be(this,e),t},o.G=function(){return 0===this.o||null===this.first()},o.wa=function(){if(null!==this.o)return 1===this.o;var e=this.value,t=this.h;return Be(this),e.next(0).done?(Be(this,t),!1):(e=e.next(0),Be(this,t),e.done)},o.map=function(e){var t=this,n=0,r=this.value;return this.B.create({next:function(o){return(o=r.next(o)).done?ie:ce(e(o.value,n++,t))}},this.o)},o.M=function(e,t){var n,r=this.value,o=[],a=!0;return function(){for(var u=r.next(a?0:t);!u.done;u=r.next(t))a=!1,o.push(u.value);n=e(o).value}(),this.B.create({next:function(){return n.next(0)}})},o.Z=function(e){function t(e){r=e.value,-1!==(e=e.Qa(!0))&&(n.o=e)}var n=this,r=null;return this.B.create({next:function(o){return r?r.next(o):n.G()?(t(e.empty?e.empty(n):e.default(n)),r.next(o)):n.wa()?(t(e.m?e.m(n):e.default(n)),r.next(o)):(t(e.multiple?e.multiple(n):e.default(n)),r.next(o))}})},(o=Ee.prototype).sb=function(){return this},o.filter=function(e){return e(this.h,0,this)?this:this.v.create()},o.first=function(){return this.h},o.O=function(){return[this.h]},o.ha=function(){return null===this.o&&(this.o=xe(this.h)),this.o},o.Qa=function(){return 1},o.G=function(){return!1},o.wa=function(){return!0},o.map=function(e){return this.v.create(e(this.h,0,this))},o.M=function(e){return e([this.h])},o.Z=function(e){return e.m?e.m(this):e.default(this)};var Ne=new fe;function Te(e,t){if(null===(e=void 0===e?null:e))return Ne;if(Array.isArray(e))switch(e.length){case 0:return Ne;case 1:return new Ee(e[0]);default:return new pe(e)}return e.next?new be(e,void 0===t?null:t):new Ee(e)}var Ie={create:Te,m:function(e){return new Ee(e)},empty:function(){return Te()},ba:function(){return Te(re)},W:function(){return Te(oe)}};function Ce(e){var t=[],n=e.value;return function(){var e=0;return Ie.create({next:function(){if(void 0!==t[e])return t[e++];var r=n.next(0);return r.done?r:t[e++]=r}})}}function Fe(e,t,n){this.namespaceURI=t||null,this.prefix=e||"",this.localName=n}function Oe(e){var t=e.j,n=e.arity,r=void 0!==e.Sa&&e.Sa,o=void 0!==e.I&&e.I,a=e.localName,u=e.namespaceURI,i=e.i;for(e=e.value,he.call(this,60,null),this.value=e,this.I=o,o=-1,e=0;e<t.length;e++)4===t[e]&&(o=e);-1<o&&(e=Array(n-(t.length-1)).fill(t[o-1]),t=t.slice(0,o).concat(e)),this.o=t,this.v=n,this.da=r,this.B=a,this.l=u,this.s=i}function Se(e,t){var n=e.value,r=t.map((function(e){return null===e?null:Ce(e)}));return t=new Oe({j:t=t.reduce((function(t,n,r){return null===n&&t.push(e.o[r]),t}),[]),arity:t.length,Sa:!0,I:e.I,localName:"boundFunction",namespaceURI:e.l,i:e.s,value:function(e,t,o){var a=Array.from(arguments).slice(3),u=r.map((function(e){return null===e?a.shift():e()}));return n.apply(void 0,[e,t,o].concat(u))}}),Ie.m(t)}function Ge(e,t){var n=[];return 2!==e&&1!==e||n.push("type-1-or-type-2"),n.push("type-"+e),t&&n.push("name-"+t),n}function De(e){var t=e.node.nodeType;if(2===t||1===t)var n=e.node.localName;return Ge(t,n)}function Re(e){var t=e.nodeType;if(2===t||1===t)var n=e.localName;return Ge(t,n)}function ke(){}function Ue(){}Fe.prototype.Ca=function(){return this.prefix?this.prefix+":"+this.localName:this.localName},A(Oe,he),Oe.prototype.Sa=function(){return this.da},ke.prototype.getAllAttributes=function(e,t){return t=void 0===t?null:t,1!==e.nodeType?[]:(e=Array.from(e.attributes),null===t?e:e.filter((function(e){return Re(e).includes(t)})))},ke.prototype.getAttribute=function(e,t){return 1!==e.nodeType?null:e.getAttribute(t)},ke.prototype.getChildNodes=function(e,t){return t=void 0===t?null:t,e=Array.from(e.childNodes),null===t?e:e.filter((function(e){return Re(e).includes(t)}))},ke.prototype.getData=function(e){return 2===e.nodeType?e.value:e.data},ke.prototype.getFirstChild=function(e,t){for(t=void 0===t?null:t,e=e.firstChild;e;e=e.nextSibling)if(null===t||Re(e).includes(t))return e;return null},ke.prototype.getLastChild=function(e,t){for(t=void 0===t?null:t,e=e.lastChild;e;e=e.previousSibling)if(null===t||Re(e).includes(t))return e;return null},ke.prototype.getNextSibling=function(e,t){for(t=void 0===t?null:t,e=e.nextSibling;e;e=e.nextSibling)if(null===t||Re(e).includes(t))return e;return null},ke.prototype.getParentNode=function(e,t){return t=void 0===t?null:t,(e=2===e.nodeType?e.ownerElement:e.parentNode)&&(null===t||Re(e).includes(t))?e:null},ke.prototype.getPreviousSibling=function(e,t){for(t=void 0===t?null:t,e=e.previousSibling;e;e=e.previousSibling)if(null===t||Re(e).includes(t))return e;return null},(o=Ue.prototype).insertBefore=function(e,t,n){return e.insertBefore(t,n)},o.removeAttributeNS=function(e,t,n){return e.removeAttributeNS(t,n)},o.removeChild=function(e,t){return e.removeChild(t)},o.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},o.setData=function(e,t){e.data=t};var Me=new Ue;function He(e){this.h=e}function Pe(e){return void 0!==e.Ta}function je(e,t,n){var r=null;return t&&(Pe(t.node)?r={F:t.F,offset:n,parent:t.node}:t.F&&(r=t.F)),{node:e,F:r}}function Xe(e){this.h=e,this.o=[]}function Le(e,t,n){return e.getAllAttributes(t.node,void 0===n?null:n).map((function(e){return je(e,t,e.nodeName)}))}function Ye(e,t,n){return Pe(t=t.node)?(e=t.attributes.find((function(e){return n===e.name})))?e.value:null:(e=e.h.getAttribute(t,n))?e:null}function Qe(e,t,n){return e.getChildNodes(t.node,void 0===n?null:n).map((function(e,n){return je(e,t,n)}))}function Je(e,t){return e.getData(t.node)}function Ke(e,t,n){var r=t.node;return Pe(r)?e=r.childNodes[0]:((n=e.h.getFirstChild(r,void 0===n?null:n))&&10===n.nodeType&&(n=e.h.getNextSibling(n)),e=n),e?je(e,t,0):null}function qe(e,t,n){n=void 0===n?null:n;var r=t.node;return Pe(r)?(e=r.childNodes.length-1,r=r.childNodes[e]):((r=e.h.getLastChild(r,n))&&10===r.nodeType&&(r=e.h.getPreviousSibling(r)),e=e.getChildNodes(t.node,n).length-1),r?je(r,t,e):null}function _e(e,t,n){n=void 0===n?null:n;var r=t.node,o=t.F;if(Pe(r)){if(o)var a=o.offset+1,u=o.parent.childNodes[a]}else{if(!o){for(u=r;u&&(!(u=e.h.getNextSibling(u,n))||10===u.nodeType););return u?{node:u,F:null}:null}a=o.offset+1;var i=Ve(e,t,null);u=e.getChildNodes(i.node,n)[a]}return u?je(u,i||Ve(e,t,n),a):null}function Ve(e,t,n){n=void 0===n?null:n;var r=t.node,o=t.F;if(o)"number"==typeof o.offset&&r===o.parent.childNodes[o.offset]||"string"==typeof o.offset&&r===o.parent.attributes.find((function(e){return o.offset===e.nodeName}))?(e=o.parent,t=o.F):(e=e.getParentNode(r,n),t=o);else{if(Pe(r))return null;e=e.getParentNode(r,n),t=null}return e?{node:e,F:t}:null}function We(e,t,n){n=void 0===n?null:n;var r=t.node,o=t.F;if(Pe(r)){if(o)var a=o.offset-1,u=o.parent.childNodes[a]}else{if(!o){for(u=r;u&&(!(u=e.h.getPreviousSibling(u,n))||10===u.nodeType););return u?{node:u,F:null}:null}a=o.offset-1;var i=Ve(e,t,null);u=e.getChildNodes(i.node,n)[a]}return u?je(u,i||Ve(e,t,n),a):null}function Ze(e,t,n,r,o){return o.M((function(e){var t=p(e).next().value;return r.M((function(e){e=p(e).next().value;var n=t.value;if(0>=n||n>e.P.length)throw Error("FOAY0001: array position out of bounds.");return e.P[n-1]()}))}))}function $e(e){Oe.call(this,{value:function(e,n,r,o){return Ze(e,n,r,Ie.m(t),o)},localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/array",j:[{type:5,g:3}],arity:1,i:{type:59,g:2}});var t=this;this.type=62,this.P=e}function ze(e){switch(e.node.nodeType){case 2:return 47;case 1:return 54;case 3:case 4:return 56;case 7:return 57;case 8:return 58;case 9:return 55;default:return 53}}function et(e){return{type:ze(e),value:e}}function tt(e,t){return e=e.map((function(e){return e.first()})),t(e)}function nt(e,t){var n=se(e.type,1)||se(e.type,20)||se(e.type,19),r=se(t.type,1)||se(t.type,20)||se(t.type,19);return n&&r?e.value===t.value:(n=se(e.type,4)||se(e.type,3)||se(e.type,6),r=se(t.type,4)||se(t.type,3)||se(t.type,6),n&&r?!(!isNaN(e.value)||!isNaN(t.value))||e.value===t.value:(n=se(e.type,0)||se(e.type,22)||se(e.type,18)||se(e.type,23)||se(e.type,44),r=se(t.type,0)||se(t.type,22)||se(t.type,18)||se(t.type,23)||se(t.type,44),!(!n||!r)&&e.value===t.value))}function rt(e,t,n,r,o){return tt([r,o],(function(e){var t=(e=p(e)).next().value,n=e.next().value;return(e=t.h.find((function(e){return nt(e.key,n)})))?e.value():Ie.empty()}))}function ot(e){Oe.call(this,{j:[{type:59,g:3}],arity:1,localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/map",value:function(e,n,r,o){return rt(e,n,r,Ie.m(t),o)},i:{type:59,g:2}});var t=this;this.type=61,this.h=e}function at(){}function ut(e,t){return e.eb()===t.eb()&&e.fb()===t.fb()}function it(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of seconds given to construct DayTimeDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ea=e}function ct(e){var t=Math.abs(e.bb()),n=Math.abs(e.getHours()),r=Math.abs(e.getMinutes());return n=(n?n+"H":"")+(r?r+"M":"")+((e=Math.abs(e.getSeconds()))?e+"S":""),(t=t?t+"D":"")&&n?t+"T"+n:t||(n?"T"+n:"T0S")}function lt(e,t,n,r,o,a){return e=86400*e+3600*t+60*n+r+o,new it(a||0===e?e:-e)}function st(e){return(e=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(e))?lt(e[4]?parseInt(e[4],10):0,e[5]?parseInt(e[5],10):0,e[6]?parseInt(e[6],10):0,e[7]?parseInt(e[7],10):0,e[8]?parseFloat(e[8]):0,!e[1]):null}function pt(e){return"Z"===(e=/^(Z)|([+-])([01]\d):([0-5]\d)$/.exec(e))[1]?lt(0,0,0,0,0,!0):lt(0,e[3]?parseInt(e[3],10):0,e[4]?parseInt(e[4],10):0,0,0,"+"===e[2])}function ft(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot multiply xs:dayTimeDuration by NaN");if((e=e.ea*t)>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while multiplying xs:dayTimeDuration");return new it(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)}function ht(e){return e?parseInt(e,10):null}function dt(e){var t=(e+="").startsWith("-");return t&&(e=e.substring(1)),(t?"-":"")+e.padStart(4,"0")}function mt(e){return(e+"").padStart(2,"0")}function yt(e){return 1===(e+="").split(".")[0].length&&(e=e.padStart(e.length+1,"0")),e}function gt(e){return 0===e.getHours()&&0===e.getMinutes()?"Z":(e.qa()?"+":"-")+mt(Math.abs(e.getHours()))+":"+mt(Math.abs(e.getMinutes()))}function vt(e,t,n,r,o,a,u,i,c){this.v=e,this.h=t,this.o=n+(24===r?1:0),this.l=24===r?0:r,this.s=o,this.B=a,this.sa=u,this.Y=i,this.type=void 0===c?9:c}function wt(e){var t=/^(?:(-?\d{4,}))?(?:--?(\d\d))?(?:-{1,3}(\d\d))?(T)?(?:(\d\d):(\d\d):(\d\d))?(\.\d+)?(Z|(?:[+-]\d\d:\d\d))?$/.exec(e);e=t[1]?parseInt(t[1],10):null;var n=ht(t[2]),r=ht(t[3]),o=t[4],a=ht(t[5]),u=ht(t[6]),i=ht(t[7]),c=t[8]?parseFloat(t[8]):0;if(t=t[9]?pt(t[9]):null,e&&(-271821>e||273860<e))throw Error("FODT0001: Datetime year is out of bounds");return o?new vt(e,n,r,a,u,i,c,t,9):null!==a&&null!==u&&null!==i?new vt(1972,12,31,a,u,i,c,t,8):null!==e&&null!==n&&null!==r?new vt(e,n,r,0,0,0,0,t,7):null!==e&&null!==n?new vt(e,n,1,0,0,0,0,t,11):null!==n&&null!==r?new vt(1972,n,r,0,0,0,0,t,13):null!==e?new vt(e,1,1,0,0,0,0,t,12):null!==n?new vt(1972,n,1,0,0,0,0,t,14):new vt(1972,12,r,0,0,0,0,t,15)}function At(e,t){switch(t){case 15:return new vt(1972,12,e.o,0,0,0,0,e.Y,15);case 14:return new vt(1972,e.h,1,0,0,0,0,e.Y,14);case 12:return new vt(e.v,1,1,0,0,0,0,e.Y,12);case 13:return new vt(1972,e.h,e.o,0,0,0,0,e.Y,13);case 11:return new vt(e.v,e.h,1,0,0,0,0,e.Y,11);case 8:return new vt(1972,12,31,e.l,e.s,e.B,e.sa,e.Y,8);case 7:return new vt(e.v,e.h,e.o,0,0,0,0,e.Y,7);default:return new vt(e.v,e.h,e.o,e.l,e.s,e.B,e.sa,e.Y,9)}}function xt(e,t){return t=e.Y||t||pt("Z"),new Date(Date.UTC(e.v,e.h-1,e.o,e.l-t.getHours(),e.s-t.getMinutes(),e.B,1e3*e.sa))}function bt(e,t,n){var r=xt(e,n).getTime();return r===(n=xt(t,n).getTime())?e.sa===t.sa?0:e.sa>t.sa?1:-1:r>n?1:-1}function Bt(e,t,n){return 0===bt(e,t,n)}function Et(e,t,n){return new it(e=(xt(e,n).getTime()-xt(t,n).getTime())/1e3)}function Nt(e){throw Error("Not implemented: adding durations to "+me[e.type])}function Tt(e){throw Error("Not implemented: subtracting durations from "+me[e.type])}function It(e,t){if(null===e)return null;switch(typeof e){case"boolean":return e?re:oe;case"number":return ne(e,3);case"string":return ne(e,1);case"object":if("nodeType"in e)return et({node:e,F:null});if(Array.isArray(e))return new $e(e.map((function(e){return void 0===e?function(){return Ie.empty()}:Ce(e=null===(e=It(e))?Ie.empty():Ie.m(e))})));if(e instanceof Date){var n=wt(e.toISOString());return ne(n,n.type)}return new ot(Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){var n=It(e[t]);return n=null===n?Ie.empty():Ie.m(n),{key:ne(t,1),value:Ce(n)}})))}throw Error("Value "+String(e)+' of type "'+typeof e+'" is not adaptable to an XPath value.')}function Ct(e,t){if("number"!=typeof e&&("string"!=typeof e||!ee.get(t)(e)))throw Error("Cannot convert JavaScript value '"+e+"' to the XPath type "+me[t]+" since it is not valid.")}function Ft(e,t,n){if(null===t)return null;switch(e){case 0:return t?re:oe;case 1:return ne(t+"",1);case 3:case 2:return Ct(t,3),ne(+t,3);case 4:return Ct(t,e),ne(+t,4);case 5:return Ct(t,e),ne(0|t,5);case 6:return Ct(t,e),ne(+t,6);case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:if(!(t instanceof Date))throw Error("The JavaScript value "+t+" with type "+typeof t+" is not a valid type to be converted to an XPath "+me[e]+".");return ne(At(wt(t.toISOString()),e),e);case 53:case 47:case 55:case 54:case 56:case 57:case 58:if("object"!=typeof t||!("nodeType"in t))throw Error("The JavaScript value "+t+" with type "+typeof t+" is not a valid type to be converted to an XPath "+me[e]+".");return et({node:t,F:null});case 59:case 61:return It(t);default:throw Error('Values of the type "'+me[e]+'" can not be adapted from JavaScript to equivalent XPath values.')}}function Ot(e,t,n){if(0===n.g)return null===(t=Ft(n.type,t))?[]:[t];if(2===n.g||1===n.g){if(!Array.isArray(t))throw Error("The JavaScript value "+t+" should be an array if it is to be converted to "+ge(n)+".");return t.map((function(e){return Ft(n.type,e)})).filter((function(e){return null!==e}))}var r=Ft(n.type,t);if(null===r)throw Error("The JavaScript value "+t+" should be a single entry if it is to be converted to "+ge(n)+".");return[r]}function St(e,t,n){return n=void 0===n?{type:59,g:0}:n,Ie.create(Ot(e,t,n))}function Gt(){var e=void 0===e?Math.floor(Math.random()*Dt):e;this.h=Math.abs(e%Dt)}(o=He.prototype).insertBefore=function(e,t,n){return this.h.insertBefore(e,t,n)},o.removeAttributeNS=function(e,t,n){return this.h.removeAttributeNS(e,t,n)},o.removeChild=function(e,t){return this.h.removeChild(e,t)},o.setAttributeNS=function(e,t,n,r){this.h.setAttributeNS(e,t,n,r)},o.setData=function(e,t){this.h.setData(e,t)},Xe.prototype.getAllAttributes=function(e,t){return Pe(e)?e.attributes:this.h.getAllAttributes(e,void 0===t?null:t)},Xe.prototype.getChildNodes=function(e,t){return t=Pe(e)?e.childNodes:this.h.getChildNodes(e,void 0===t?null:t),9===e.nodeType?t.filter((function(e){return 10!==e.nodeType})):t},Xe.prototype.getData=function(e){return Pe(e)?2===e.nodeType?e.value:e.data:this.h.getData(e)||""},Xe.prototype.getParentNode=function(e,t){return this.h.getParentNode(e,void 0===t?null:t)},A($e,Oe),A(ot,Oe),(o=at.prototype).bb=function(){return 0},o.getHours=function(){return 0},o.getMinutes=function(){return 0},o.cb=function(){return 0},o.eb=function(){return 0},o.fb=function(){return 0},o.getSeconds=function(){return 0},o.gb=function(){return 0},o.qa=function(){return!0},A(it,at),(o=it.prototype).bb=function(){return Math.trunc(this.ea/86400)},o.getHours=function(){return Math.trunc(this.ea%86400/3600)},o.getMinutes=function(){return Math.trunc(this.ea%3600/60)},o.fb=function(){return this.ea},o.getSeconds=function(){var e=this.ea%60;return Object.is(-0,e)?0:e},o.qa=function(){return!Object.is(-0,this.ea)&&0<=this.ea},o.toString=function(){return(this.qa()?"P":"-P")+ct(this)},(o=vt.prototype).getDay=function(){return this.o},o.getHours=function(){return this.l},o.getMinutes=function(){return this.s},o.getMonth=function(){return this.h},o.getSeconds=function(){return this.B},o.getYear=function(){return this.v},o.toString=function(){switch(this.type){case 9:return dt(this.v)+"-"+mt(this.h)+"-"+mt(this.o)+"T"+mt(this.l)+":"+mt(this.s)+":"+yt(this.B+this.sa)+(this.Y?gt(this.Y):"");case 7:return dt(this.v)+"-"+mt(this.h)+"-"+mt(this.o)+(this.Y?gt(this.Y):"");case 8:return mt(this.l)+":"+mt(this.s)+":"+yt(this.B+this.sa)+(this.Y?gt(this.Y):"");case 15:return"---"+mt(this.o)+(this.Y?gt(this.Y):"");case 14:return"--"+mt(this.h)+(this.Y?gt(this.Y):"");case 13:return"--"+mt(this.h)+"-"+mt(this.o)+(this.Y?gt(this.Y):"");case 12:return dt(this.v)+(this.Y?gt(this.Y):"");case 11:return dt(this.v)+"-"+mt(this.h)+(this.Y?gt(this.Y):"")}throw Error("Unexpected subType")};var Dt=Math.pow(2,32);function Rt(e,t,n){t=void 0===t?{yb:null,Db:null,tb:!1}:t,n=void 0===n?new Gt:n,this.h=t,this.Ka=e.Ka,this.Da=e.Da,this.N=e.N,this.Aa=e.Aa||Object.create(null),this.o=n}function kt(e,t){var n=0,r=t.value;return{next:function(o){return(o=r.next(o)).done?ie:ce(Pt(e,n++,o.value,t))}}}function Ut(e){return e.h.tb||(e.h.tb=!0,e.h.yb=wt((new Date).toISOString()),e.h.Db=st("PT0S")),e.h.yb}function Mt(e){return e.h.tb||(e.h.tb=!0,e.h.yb=wt((new Date).toISOString()),e.h.Db=st("PT0S")),e.h.Db}function Ht(e,t){return e=29421*(null!=(t=void 0===t?null:t)?t:e.o.h)%Dt,{zb:Math.floor(e),jc:e/Dt}}function Pt(e,t,n,r){return new Rt({N:n,Ka:t,Da:r||e.Da,Aa:e.Aa},e.h,e.o)}function jt(e,t){return new Rt({N:e.N,Ka:e.Ka,Da:e.Da,Aa:Object.assign(Object.create(null),e.Aa,t)},e.h,e.o)}function Xt(e,t,n,r,o,a,u,i,c){this.debug=e,this.La=t,this.h=n,this.o=r,this.B=o,this.l=a,this.da=u,this.s=i,this.v=c}function Lt(e){var t=0,n=null,r=!0;return Ie.create({next:function(o){for(;t<e.length;){n||(n=e[t].value,r=!0);var a=n.next(r?0:o);if(r=!1,!a.done)return a;t++,n=null}return ie}})}function Yt(e,t,n){return Error("FORG0001: Cannot cast "+e+" to "+me[t]+(n?", "+n:""))}function Qt(e){return Error("XPDY0002: "+e)}function Jt(e){return Error("XPTY0004: "+e)}function Kt(e){return Error("FOTY0013: Atomization is not supported for "+me[e]+".")}function qt(e){return Error("XPST0081: The prefix "+e+" could not be resolved.")}function _t(e,t){if(se(e.type,46)||se(e.type,19)||se(e.type,0)||se(e.type,4)||se(e.type,3)||se(e.type,6)||se(e.type,5)||se(e.type,2)||se(e.type,23)||se(e.type,1))return Ie.create(e);var n=t.h;if(se(e.type,53)){var r=e.value;if(2===r.node.nodeType||3===r.node.nodeType)return Ie.create(ne(Je(n,r),19));if(8===r.node.nodeType||7===r.node.nodeType)return Ie.create(ne(Je(n,r),1));var o=[];return function e(t){if(8!==r.node.nodeType&&7!==r.node.nodeType){var a=t.nodeType;3===a||4===a?o.push(n.getData(t)):1!==a&&9!==a||n.getChildNodes(t).forEach((function(t){e(t)}))}}(r.node),Ie.create(ne(o.join(""),19))}if(se(e.type,60)&&!se(e.type,62))throw Kt(e.type);if(se(e.type,62))return Lt(e.P.map((function(e){return Vt(e(),t)})));throw Error("Atomizing "+e.type+" is not implemented.")}function Vt(e,t){var n=!1,r=e.value,o=null;return Ie.create({next:function(){for(;!n;){if(!o){var e=r.next(0);if(e.done){n=!0;break}o=_t(e.value,t).value}if(!(e=o.next(0)).done)return e;o=null}return ie}})}function Wt(e){for(e=te[e];e&&0!==e.D;)e=e.parent;return e?e.type:null}function Zt(e,t){var n=(t=te[t]).Na;if(!n||!n.whiteSpace)return t.parent?Zt(e,t.parent.type):e;switch(t.Na.whiteSpace){case"replace":return e.replace(/[\u0009\u000A\u000D]/g," ");case"collapse":return e.replace(/[\u0009\u000A\u000D]/g," ").replace(/ {2,}/g," ").replace(/^ | $/g,"")}return e}function $t(e,t){for(t=te[t];t&&null===t.kb;){if(2===t.D||3===t.D)return!0;t=t.parent}return!t||t.kb(e)}function zt(e,t){for(;e;){if(e.Pa&&e.Pa[t])return e.Pa[t];e=e.parent}return function(){return!0}}function en(e,t){for(var n=te[t];n;){if(n.Na&&!Object.keys(n.Na).every((function(t){if("whiteSpace"===t)return!0;var r=zt(n,t);return!r||r(e,n.Na[t])})))return!1;n=n.parent}return!0}function tn(e){return!e||2===e.g||0===e.g}function nn(e){return e(1)||e(19)?function(e){return{u:!0,value:ne(e,20)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:anyURI or any of its derived types.")}}}function rn(e){return e(22)?function(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return{u:!0,value:ne(btoa(t),21)}}:e(1)||e(19)?function(e){return{u:!0,value:ne(e,21)}}:function(){return{error:Error("XPTY0004: Casting not supported from given type to xs:base64Binary or any of its derived types."),u:!1}}}function on(e){return e(2)?function(e){return{u:!0,value:0===e||isNaN(e)?oe:re}}:e(1)||e(19)?function(e){switch(e){case"true":case"1":return{u:!0,value:re};case"false":case"0":return{u:!0,value:oe};default:return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}}function an(e){return e(9)?function(e){return{u:!0,value:ne(At(e,7),7)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),7)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:date or any of its derived types.")}}}function un(e){return e(7)?function(e){return{u:!0,value:ne(At(e,9),9)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),9)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dateTime or any of its derived types.")}}}function cn(e){return e(18)&&!e(16)?function(e){return{u:!0,value:ne(e.Ja,17)}}:e(16)?function(){return{u:!0,value:ne(st("PT0.0S"),17)}}:e(19)||e(1)?function(e){var t=st(e);return t?{u:!0,value:ne(t,17)}:{u:!1,error:Error("FORG0001: Can not cast "+e+" to xs:dayTimeDuration")}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dayTimeDuration or any of its derived types.")}}}function ln(e){return e(5)?function(e){return{u:!0,value:ne(e,4)}}:e(6)||e(3)?function(e){return isNaN(e)||!isFinite(e)?{u:!1,error:Error("FOCA0002: Can not cast "+e+" to xs:decimal")}:Math.abs(e)>Number.MAX_VALUE?{u:!1,error:Error("FOAR0002: Can not cast "+e+" to xs:decimal, it is out of bounds for JavaScript numbers")}:{u:!0,value:ne(e,4)}}:e(0)?function(e){return{u:!0,value:ne(e?1:0,4)}}:e(1)||e(19)?function(e){var t=parseFloat(e);return!isNaN(t)||isFinite(t)?{u:!0,value:ne(t,4)}:{u:!1,error:Error("FORG0001: Can not cast "+e+" to xs:decimal")}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:decimal or any of its derived types.")}}}function sn(e,t){return e(2)?function(e){return{u:!0,value:e}}:e(0)?function(e){return{u:!0,value:e?1:0}}:e(1)||e(19)?function(e){switch(e){case"NaN":return{u:!0,value:NaN};case"INF":case"+INF":return{u:!0,value:1/0};case"-INF":return{u:!0,value:-1/0};case"0":case"+0":return{u:!0,value:0};case"-0":return{u:!0,value:-0}}var n=parseFloat(e);return isNaN(n)?{u:!1,error:Yt(e,t)}:{u:!0,value:n}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to "+t+" or any of its derived types.")}}}function pn(e){var t=sn(e,3);return function(e){return(e=t(e)).u?{u:!0,value:ne(e.value,3)}:e}}function fn(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of months given to construct YearMonthDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ga=e}function hn(e){var t=Math.abs(e.gb());return(t?t+"Y":"")+((e=Math.abs(e.cb()))?e+"M":"")||"0M"}function dn(e){var t=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(e);if(t){if(e=!t[1],(t=12*(t[2]?parseInt(t[2],10):0)+(t[3]?parseInt(t[3],10):0))>Number.MAX_SAFE_INTEGER||!Number.isFinite(t))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");e=new fn(e||0===t?t:-t)}else e=null;return e}function mn(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot multiply xs:yearMonthDuration by NaN");if((e=Math.round(e.ga*t))>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");return new fn(e<Number.MIN_SAFE_INTEGER||0===e?0:e)}function yn(e,t){this.Wa=e,this.Ja=t}function gn(e){return e(16)?function(e){return{u:!0,value:ne(new yn(e,new it(e.qa()?0:-0)),18)}}:e(17)?function(e){return{u:!0,value:ne(e=new yn(new fn(e.qa()?0:-0),e),18)}}:e(18)?function(e){return{u:!0,value:ne(e,18)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(new yn(dn(e),st(e)),18)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:duration or any of its derived types.")}}}function vn(e){var t=sn(e,6);return function(e){return(e=t(e)).u?{u:!0,value:ne(e.value,6)}:e}}function wn(e){return e(7)||e(9)?function(e){return{u:!0,value:ne(At(e,15),15)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),15)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gDay or any of its derived types.")}}}function An(e){return e(7)||e(9)?function(e){return{u:!0,value:ne(At(e,14),14)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),14)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonth or any of its derived types.")}}}function xn(e){return e(7)||e(9)?function(e){return{u:!0,value:ne(At(e,13),13)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),13)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonthDay or any of its derived types.")}}}function bn(e){return e(7)||e(9)?function(e){return{u:!0,value:ne(At(e,12),12)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),12)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYear or any of its derived types.")}}}function Bn(e){return e(7)||e(9)?function(e){return{u:!0,value:ne(At(e,11),11)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),11)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYearMonth or any of its derived types.")}}}function En(e){return e(21)?function(e){for(var t="",n=0,r=(e=atob(e)).length;n<r;n++)t+=Number(e.charCodeAt(n)).toString(16);return{u:!0,value:ne(t.toUpperCase(),22)}}:e(1)||e(19)?function(e){return{u:!0,value:ne(e,22)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:hexBinary or any of its derived types.")}}}function Nn(e){return e(0)?function(e){return{u:!0,value:ne(e?1:0,5)}}:e(2)?function(e){var t=Math.trunc(e);return!isFinite(t)||isNaN(t)?{u:!1,error:Error("FOCA0002: can not cast "+e+" to xs:integer")}:Number.isSafeInteger(t)?{u:!0,value:ne(t,5)}:{u:!1,error:Error("FOAR0002: can not cast "+e+" to xs:integer, it is out of bounds for JavaScript numbers.")}}:e(1)||e(19)?function(e){var t=parseInt(e,10);return isNaN(t)?{u:!1,error:Yt(e,5)}:Number.isSafeInteger(t)?{u:!0,value:ne(t,5)}:{u:!1,error:Error("FOCA0003: can not cast "+e+" to xs:integer, it is out of bounds for JavaScript numbers.")}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:integer or any of its derived types.")}}}A(fn,at),(o=fn.prototype).cb=function(){var e=this.ga%12;return 0===e?0:e},o.eb=function(){return this.ga},o.gb=function(){return Math.trunc(this.ga/12)},o.qa=function(){return!Object.is(-0,this.ga)&&0<=this.ga},o.toString=function(){return(this.qa()?"P":"-P")+hn(this)},A(yn,at),(o=yn.prototype).bb=function(){return this.Ja.bb()},o.getHours=function(){return this.Ja.getHours()},o.getMinutes=function(){return this.Ja.getMinutes()},o.cb=function(){return this.Wa.cb()},o.eb=function(){return this.Wa.eb()},o.fb=function(){return this.Ja.fb()},o.getSeconds=function(){return this.Ja.getSeconds()},o.gb=function(){return this.Wa.gb()},o.qa=function(){return this.Wa.qa()&&this.Ja.qa()},o.toString=function(){var e=this.qa()?"P":"-P",t=hn(this.Wa),n=ct(this.Ja);return"0M"===t?e+n:"T0S"===n?e+t:e+t+n};var Tn=[3,6,4,5];function In(e){var t=Rn;return function(n){for(var r=p(Tn),o=r.next();!o.done;o=r.next())if((o=t(e,o.value)(n)).u)return o;return{u:!1,error:Error('XPTY0004: Casting not supported from "'+n+'" given type to xs:numeric or any of its derived types.')}}}function Cn(e){if(e(1)||e(19))return function(e){return{u:!0,value:e+""}};if(e(20))return function(e){return{u:!0,value:e}};if(e(23))return function(e){return{u:!0,value:e.prefix?e.prefix+":"+e.localName:e.localName}};if(e(44))return function(e){return{u:!0,value:e.toString()}};if(e(2)){if(e(5)||e(4))return function(e){return{u:!0,value:(e+"").replace("e","E")}};if(e(6)||e(3))return function(e){return isNaN(e)?{u:!0,value:"NaN"}:isFinite(e)?Object.is(e,-0)?{u:!0,value:"-0"}:{u:!0,value:(e+"").replace("e","E").replace("E+","E")}:{u:!0,value:(0>e?"-":"")+"INF"}}}return e(9)||e(7)||e(8)||e(15)||e(14)||e(13)||e(12)||e(11)||e(16)||e(17)||e(18)?function(e){return{u:!0,value:e.toString()}}:e(22)?function(e){return{u:!0,value:e.toUpperCase()}}:function(e){return{u:!0,value:e+""}}}function Fn(e){var t=Cn(e);return function(e){return(e=t(e)).u?{u:!0,value:ne(e.value,1)}:e}}function On(e){return e(9)?function(e){return{u:!0,value:ne(At(e,8),8)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),8)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:time or any of its derived types.")}}}function Sn(e){var t=Cn(e);return function(e){return(e=t(e)).u?{u:!0,value:ne(e.value,19)}:e}}function Gn(e){return e(18)&&!e(17)?function(e){return{u:!0,value:ne(e.Wa,16)}}:e(17)?function(){return{u:!0,value:ne(dn("P0M"),16)}}:e(19)||e(1)?function(e){var t=dn(e);return t?{u:!0,value:ne(t,16)}:{u:!1,error:Yt(e,16)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:yearMonthDuration or any of its derived types.")}}}var Dn=[2,5,17,16];function Rn(e,t){function n(t){return se(e,t)}if(39===t)return function(){return{u:!1,error:Error("FORG0001: Casting to xs:error is always invalid.")}};switch(t){case 19:return Sn(n);case 1:return Fn(n);case 6:return vn(n);case 3:return pn(n);case 4:return ln(n);case 5:return Nn(n);case 2:return In(e);case 18:return gn(n);case 16:return Gn(n);case 17:return cn(n);case 9:return un(n);case 8:return On(n);case 7:return an(n);case 11:return Bn(n);case 12:return bn(n);case 13:return xn(n);case 15:return wn(n);case 14:return An(n);case 0:return on(n);case 21:return rn(n);case 22:return En(n);case 20:return nn(n);case 23:throw Error("Casting to xs:QName is not implemented.")}return function(){return{u:!1,error:Error("XPTY0004: Casting not supported from "+e+" to "+t+".")}}}var kn=Object.create(null);function Un(e,t){if(19===e&&1===t)return function(e){return{u:!0,value:ne(e,1)}};if(44===t)return function(){return{u:!1,error:Error("XPST0080: Casting to xs:NOTATION is not permitted.")}};if(39===t)return function(){return{u:!1,error:Error("FORG0001: Casting to xs:error is not permitted.")}};if(45===e||45===t)return function(){return{u:!1,error:Error("XPST0080: Casting from or to xs:anySimpleType is not permitted.")}};if(46===e||46===t)return function(){return{u:!1,error:Error("XPST0080: Casting from or to xs:anyAtomicType is not permitted.")}};if(se(e,60)&&1===t)return function(){return{u:!1,error:Error("FOTY0014: Casting from function item to xs:string is not permitted.")}};if(e===t)return function(e){return{u:!0,value:{type:t,value:e}}};var n=Dn.includes(e)?e:Wt(e),r=Dn.includes(t)?t:Wt(t);if(null===r||null===n)return function(){return{u:!1,error:Error("XPST0081: Can not cast: type "+(r?me[e]:me[t])+" is unknown.")}};var o=[];return 1!==n&&19!==n||o.push((function(e){var n=Zt(e,t);return $t(n,t)?{u:!0,value:n}:{u:!1,error:Yt(e,t,"pattern validation failed.")}})),n!==r&&(o.push(Rn(n,r)),o.push((function(e){return{u:!0,value:e.value}}))),19!==r&&1!==r||o.push((function(e){return $t(e,t)?{u:!0,value:e}:{u:!1,error:Yt(e,t,"pattern validation failed.")}})),o.push((function(e){return en(e,t)?{u:!0,value:e}:{u:!1,error:Yt(e,t,"pattern validation failed.")}})),o.push((function(e){return{u:!0,value:{type:t,value:e}}})),function(e){e={u:!0,value:e};for(var t=0,n=o.length;t<n&&!1!==(e=o[t](e.value)).u;++t);return e}}function Mn(e,t){var n=e.type+1e4*t,r=kn[n];return r||(r=kn[n]=Un(e.type,t)),r.call(void 0,e.value,t)}function Hn(e,t){if(!0===(e=Mn(e,t)).u)return e.value;throw e.error}function Pn(e){var t=!1;return{next:function(){return t?ie:(t=!0,ce(e))}}}function jn(e,t){return e===t||!(!e||!t||e.offset!==t.offset||e.parent!==t.parent)&&jn(e.F,t.F)}function Xn(e,t){return!!(e===t||e.node===t.node&&jn(e.F,t.F))}function Ln(e,t,n){var r=Ve(e,t,null);e=Qe(e,r,null),r=0;for(var o=e.length;r<o;++r){var a=e[r];if(Xn(a,t))return-1;if(Xn(a,n))return 1}}function Yn(e,t){for(var n=[];t;t=Ve(e,t,null))n.unshift(t);return n}function Qn(e,t){for(var n=[];t;t=e.getParentNode(t,null))n.unshift(t);return n}function Jn(e,t,n,r){if(n.F||r.F||Pe(n.node)||Pe(r.node)){if(Xn(n,r))return 0;n=Yn(t,n),r=Yn(t,r);var o=n[0],a=r[0];if(!Xn(o,a))return t=e.findIndex((function(e){return Xn(e,o)})),n=e.findIndex((function(e){return Xn(e,a)})),-1===t&&(t=e.push(o)),-1===n&&(n=e.push(a)),t-n;e=1;for(var u=Math.min(n.length,r.length);e<u&&Xn(n[e],r[e]);++e);return n[e]?r[e]?Ln(t,n[e],r[e]):1:-1}if((n=n.node)===(r=r.node))return 0;if(n=Qn(t,n),r=Qn(t,r),n[0]!==r[0]){var i={node:n[0],F:null},c={node:r[0],F:null};return t=e.findIndex((function(e){return Xn(e,i)})),n=e.findIndex((function(e){return Xn(e,c)})),-1===t&&(t=e.push(i)),-1===n&&(n=e.push(c)),t-n}for(u=1,e=Math.min(n.length,r.length);u<e&&n[u]===r[u];++u);if(e=n[u],n=r[u],!e)return-1;if(!n)return 1;for(t=t.getChildNodes(r[u-1],null),r=0,u=t.length;r<u;++r){var l=t[r];if(l===e)return-1;if(l===n)return 1}}function Kn(e,t,n,r){var o=se(n.type,47),a=se(r.type,47);if(o&&!a){if(Xn(n=Ve(t,n.value),r=r.value))return 1}else if(a&&!o){if(Xn(n=n.value,r=Ve(t,r.value)))return-1}else if(o&&a){if(Xn(Ve(t,r.value),Ve(t,n.value)))return n.value.node.localName>r.value.node.localName?1:-1;n=Ve(t,n.value),r=Ve(t,r.value)}else n=n.value,r=r.value;return Jn(e,t,n,r)}function qn(e,t,n){return Kn(e.o,e,t,n)}function _n(e,t){return Wn(t,(function(t,n){return Kn(e.o,e,t,n)})).filter((function(e,t,n){return 0===t||!Xn(e.value,n[t-1].value)}))}function Vn(e,t){return e<t?-1:0}function Wn(e,t){if(t=void 0===t?Vn:t,1>=e.length)return e;var n=Math.floor(e.length/2),r=Wn(e.slice(0,n),t);for(e=Wn(e.slice(n),t),n=[];r.length&&e.length;)0>t(r[0],e[0])?n.push(r.shift()):n.push(e.shift());return n.concat(r.concat(e))}var Zn=e;function $n(e,t){if(se(e.type,2)){if(se(e.type,6))return 3===t?ne(e.value,3):null;if(se(e.type,4)){if(6===t)return ne(e.value,6);if(3===t)return ne(e.value,3)}return null}return se(e.type,20)&&1===t?ne(e.value,1):null}function zn(e,t,n,r,o){if(se(e.type,t.type))return e;if(se(t.type,46)&&se(e.type,53)&&(e=_t(e,n).first()),se(e.type,t.type)||46===t.type)return e;if(se(e.type,19)){if(!(n=Hn(e,t.type)))throw Error("XPTY0004 Unable to convert "+(o?"return":"argument")+" of type "+me[e.type]+" to type "+ge(t)+" while calling "+r);return n}if(!(n=$n(e,t.type)))throw Error("XPTY0004 Unable to cast "+(o?"return":"argument")+" of type "+me[e.type]+" to type "+ge(t)+" while calling "+r);return n}function er(e){switch(e){case 2:return"*";case 1:return"+";case 0:return"?";case 3:return""}}function tr(e,t,n,r,o){return 0===e.g?t.Z({default:function(){return t.map((function(t){return zn(t,e,n,r,o)}))},multiple:function(){throw Error("XPTY0004: Multiplicity of "+(o?"function return value":"function argument")+" of type "+me[e.type]+er(e.g)+" for "+r+' is incorrect. Expected "?", but got "+".')}}):1===e.g?t.Z({empty:function(){throw Error("XPTY0004: Multiplicity of "+(o?"function return value":"function argument")+" of type "+me[e.type]+er(e.g)+" for "+r+' is incorrect. Expected "+", but got "empty-sequence()"')},default:function(){return t.map((function(t){return zn(t,e,n,r,o)}))}}):2===e.g?t.map((function(t){return zn(t,e,n,r,o)})):t.Z({m:function(){return t.map((function(t){return zn(t,e,n,r,o)}))},default:function(){throw Error("XPTY0004: Multiplicity of "+(o?"function return value":"function argument")+" of type "+me[e.type]+er(e.g)+" for "+r+" is incorrect. Expected exactly one")}})}function nr(e,t){return se(e,5)?ne(t,5):se(e,6)?ne(t,6):se(e,3)?ne(t,3):ne(t,4)}var rr=[{oa:"M",ma:1e3},{oa:"CM",ma:900},{oa:"D",ma:500},{oa:"CD",ma:400},{oa:"C",ma:100},{oa:"XC",ma:90},{oa:"L",ma:50},{oa:"XL",ma:40},{oa:"X",ma:10},{oa:"IX",ma:9},{oa:"V",ma:5},{oa:"IV",ma:4},{oa:"I",ma:1}];function or(e,t){var n=parseInt(e,10);if(e=0>n,!(n=Math.abs(n)))return"-";var r=rr.reduce((function(e,t){var r=Math.floor(n/t.ma);return n-=r*t.ma,e+t.oa.repeat(r)}),"");return t&&(r=r.toLowerCase()),e&&(r="-"+r),r}var ar="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function ur(e,t){var n=0>(e=parseInt(e,10));if(!(e=Math.abs(e)))return"-";for(var r,o="";0<e;)r=(e-1)%ar.length,o=ar[r]+o,e=(e-r)/ar.length|0;return t&&(o=o.toLowerCase()),n&&(o="-"+o),o}function ir(e){if(Math.floor(e)===e||isNaN(e))return 0;var t=(e=/\d+(?:\.(\d*))?(?:[Ee](-)?(\d+))*/.exec(""+e))[1]?e[1].length:0;return e[3]?e[2]?t+parseInt(e[3],10):0>(e=t-parseInt(e[3],10))?0:e:t}function cr(e,t,n){return t&&0==e*n%1%.5?0==Math.floor(e*n)%2?Math.floor(e*n)/n:Math.ceil(e*n)/n:Math.round(e*n)/n}function lr(e,t,n,r,o,a){var u=!1;return Ie.create({next:function(){if(u)return ie;var t,n=o.first();if(!n)return u=!0,ie;if((se(n.type,6)||se(n.type,3))&&(0===n.value||isNaN(n.value)||1/0===n.value||-1/0===n.value))return u=!0,ce(n);if(t=a?a.first().value:0,u=!0,ir(n.value)<t)return ce(n);var r=[5,4,3,6].find((function(e){return se(n.type,e)}));switch(t=cr(Hn(n,4).value,e,Math.pow(10,t)),r){case 4:return ce(ne(t,4));case 3:return ce(ne(t,3));case 6:return ce(ne(t,6));case 5:return ce(ne(t,5))}}})}function sr(e,t,n,r){return Vt(r,t).Z({empty:function(){return Ie.m(ne(NaN,3))},m:function(){var e=Mn(r.first(),3);return e.u?Ie.m(e.value):Ie.m(ne(NaN,3))},multiple:function(){throw Error("fn:number may only be called with zero or one values")}})}function pr(e){for(var t=5381,n=0;n<e.length;++n)t=33*t+e.charCodeAt(n),t%=Number.MAX_SAFE_INTEGER;return t}function fr(e,t,n,r){function o(t){function n(n,r,o,a){if(a.G()||a.wa())return a;for(n=a.O(),r=t,o=n.length-1;1<o;o--){var u=n[a=(r=Ht(e,r).zb)%o];n[a]=n[o],n[o]=u}return Ie.create(n)}return Ie.m(new ot([{key:ne("number",1),value:function(){return Ie.m(ne(Ht(e,t).jc,3))}},{key:ne("next",1),value:function(){return Ie.m(new Oe({value:function(){return o(Ht(e,t).zb)},Sa:!0,localName:"",namespaceURI:"",j:[],arity:0,i:{type:61,g:3}}))}},{key:ne("permute",1),value:function(){return Ie.m(new Oe({value:n,Sa:!0,localName:"",namespaceURI:"",j:[{type:59,g:2}],arity:1,i:{type:59,g:2}}))}}]))}return o(((r=void 0===r?Ie.empty():r).G()?Ht(e):Ht(e,pr(Hn(r.first(),1).value))).zb)}var hr=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"abs",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return nr(e.type,Math.abs(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"format-integer",j:[{type:5,g:0},{type:1,g:3}],i:{type:1,g:3},callFunction:function(e,t,n,r,o){if(e=r.first(),o=o.first(),r.G())return Ie.m(ne("",1));switch(o.value){case"I":return r=or(e.value),Ie.m(ne(r,1));case"i":return r=or(e.value,!0),Ie.m(ne(r,1));case"A":return Ie.m(ne(ur(e.value),1));case"a":return Ie.m(ne(ur(e.value,!0),1));default:throw Error("Picture: "+o.value+' is not implemented yet. The supported picture strings are "A", "a", "I", and "i"')}}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ceiling",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return nr(e.type,Math.ceil(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"floor",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return nr(e.type,Math.floor(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:lr.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",j:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},callFunction:lr.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:lr.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",j:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},callFunction:lr.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",j:[{type:46,g:0}],i:{type:3,g:3},callFunction:sr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",j:[],i:{type:3,g:3},callFunction:function(e,t,n){var r=e.N&&tr({type:46,g:0},Ie.m(e.N),t,"fn:number",!1);if(!r)throw Qt("fn:number needs an atomizable context item.");return sr(e,t,n,r)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",j:[],i:{type:61,g:3},callFunction:fr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",j:[{type:46,g:0}],i:{type:61,g:3},callFunction:fr}];function dr(){throw Error("FOCH0002: No collations are supported")}function mr(e,t,n,r){if(null===t.N)throw Qt("The function which was called depends on dynamic context, which is absent.");return e(t,n,r,Ie.m(t.N))}function yr(e,t,n,r){return r.Z({empty:function(){return Ie.m(ne("",1))},default:function(){return r.map((function(e){if(se(e.type,53)){var n=_t(e,t).first();return se(e.type,47)?Hn(n,1):n}return Hn(e,1)}))}})}function gr(e,t,n,r,o){return tt([o],(function(e){var n=p(e).next().value;return Vt(r,t).M((function(e){return e=e.map((function(e){return Hn(e,1).value})).join(n.value),Ie.m(ne(e,1))}))}))}function vr(e,t,n,r){return r.G()?Ie.m(ne(0,5)):(e=r.first().value,Ie.m(ne(Array.from(e).length,5)))}function wr(e,t,n,r,o,a){var u=lr(!1,e,t,n,o,null),i=null!==a?lr(!1,e,t,n,a,null):null,c=!1,l=null,s=null,p=null;return Ie.create({next:function(){return c?ie:l||null!==(l=r.first())?(s||(s=u.first()),!p&&a&&(p=null,p=i.first()),c=!0,ce(ne(Array.from(l.value).slice(Math.max(s.value-1,0),a?s.value+p.value-1:void 0).join(""),1))):(c=!0,ce(ne("",1)))}})}function Ar(e,t,n,r,o){return r.G()||0===r.first().value.length?Ie.empty():(e=r.first().value,o=Er(o=o.first().value),Ie.create(e.split(o).map((function(e){return ne(e,1)}))))}function xr(e,t,n,r){return r.G()?Ie.m(ne("",1)):(e=r.first().value.trim(),Ie.m(ne(e.replace(/\s+/g," "),1)))}var br=new Map,Br=new Map;function Er(e){if(Br.has(e))return Br.get(e);try{var t=new RegExp(e,"g")}catch(e){throw Error("FORX0002: "+e)}if(t.test(""))throw Error("FORX0003: the pattern "+e+" matches the zero length string");return Br.set(e,t),t}var Nr=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",j:[{type:1,g:0},{type:1,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r,o){return r.G()||o.G()?Ie.empty():(e=r.first().value)>(o=o.first().value)?Ie.m(ne(1,5)):e<o?Ie.m(ne(-1,5)):Ie.m(ne(0,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:5,g:0},callFunction:dr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"concat",j:[{type:46,g:0},{type:46,g:0},4],i:{type:1,g:3},callFunction:function(e,t,n){var r=O.apply(3,arguments);return tt(r=r.map((function(e){return Vt(e,t).M((function(e){return Ie.m(ne(e.map((function(e){return null===e?"":Hn(e,1).value})).join(""),1))}))})),(function(e){return Ie.m(ne(e.map((function(e){return e.value})).join(""),1))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",j:[{type:1,g:0},{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:dr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:function(e,t,n,r,o){return e=r.G()?"":r.first().value,0===(o=o.G()?"":o.first().value).length?Ie.ba():0===e.length?Ie.W():e.includes(o)?Ie.ba():Ie.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:function(e,t,n,r,o){return 0===(e=o.G()?"":o.first().value).length?Ie.ba():0===(r=r.G()?"":r.first().value).length?Ie.W():r.endsWith(e)?Ie.ba():Ie.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},callFunction:dr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:xr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",j:[],i:{type:1,g:3},callFunction:mr.bind(null,(function(e,t,n,r){return xr(e,t,n,yr(e,t,n,r))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:function(e,t,n,r,o){return 0===(e=o.G()?"":o.first().value).length?Ie.ba():0===(r=r.G()?"":r.first().value).length?Ie.W():r.startsWith(e)?Ie.ba():Ie.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},callFunction:dr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",j:[{type:59,g:0}],i:{type:1,g:3},callFunction:yr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",j:[],i:{type:1,g:3},callFunction:mr.bind(null,yr)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-before",j:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r,o){return e=r.G()?"":r.first().value,""===(o=o.G()?"":o.first().value)||-1===(o=e.indexOf(o))?Ie.m(ne("",1)):Ie.m(ne(e.substring(0,o),1))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-after",j:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r,o){return e=r.G()?"":r.first().value,""===(o=o.G()?"":o.first().value)?Ie.m(ne(e,1)):-1===(t=e.indexOf(o))?Ie.m(ne("",1)):Ie.m(ne(e.substring(t+o.length),1))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",j:[{type:1,g:0},{type:3,g:3}],i:{type:1,g:3},callFunction:wr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",j:[{type:1,g:0},{type:3,g:3},{type:3,g:3}],i:{type:1,g:3},callFunction:wr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"upper-case",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r){return r.G()?Ie.m(ne("",1)):r.map((function(e){return ne(e.value.toUpperCase(),1)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"lower-case",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r){return r.G()?Ie.m(ne("",1)):r.map((function(e){return ne(e.value.toLowerCase(),1)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",j:[{type:46,g:2},{type:1,g:3}],i:{type:1,g:3},callFunction:gr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",j:[{type:46,g:2}],i:{type:1,g:3},callFunction:function(e,t,n,r){return gr(e,t,n,r,Ie.m(ne("",1)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",j:[{type:1,g:0}],i:{type:5,g:3},callFunction:vr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",j:[],i:{type:5,g:3},callFunction:mr.bind(null,(function(e,t,n,r){return vr(e,t,n,yr(e,t,n,r))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],i:{type:1,g:2},callFunction:function(){throw Error("Not implemented: Using flags in tokenize is not supported")}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0},{type:1,g:3}],i:{type:1,g:2},callFunction:Ar},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0}],i:{type:1,g:2},callFunction:function(e,t,n,r){return Ar(e,t,n,xr(e,t,n,r),Ie.m(ne(" ",1)))}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],callFunction:function(e,t,n,r,o,a){return tt([r,o,a],(function(e){var t=p(e),n=t.next().value;e=t.next().value,t=t.next().value,n=Array.from(n?n.value:"");var r=Array.from(e.value),o=Array.from(t.value);return e=n.map((function(e){return r.includes(e)?(e=r.indexOf(e))<=o.length?o[e]:void 0:e})),Ie.m(ne(e.join(""),1))}))},localName:"translate",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:5,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return e=e.map((function(e){if(9===(e=e.value)||10===e||13===e||32<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e)return String.fromCodePoint(e);throw Error("FOCH0001")})).join(""),Ie.m(ne(e,1))}))},localName:"codepoints-to-string",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0}],callFunction:function(e,t,n,r){return tt([r],(function(e){return 0===(e=(e=p(e).next().value)?e.value.split(""):[]).length?Ie.empty():Ie.create(e.map((function(e){return ne(e.codePointAt(0),5)})))}))},localName:"string-to-codepoints",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:1,g:0}],callFunction:function(e,t,n,r){return tt([r],(function(e){return null===(e=p(e).next().value)||0===e.value.length?Ie.create(ne("",1)):Ie.create(ne(encodeURIComponent(e.value).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})),1))}))},localName:"encode-for-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0}],callFunction:function(e,t,n,r){return tt([r],(function(e){return null===(e=p(e).next().value)||0===e.value.length?Ie.create(ne("",1)):Ie.create(ne(e.value.replace(/([\u00A0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFEF "<>{}|\\^`/\n\u007f\u0080-\u009f]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,(function(e){return encodeURI(e)})),1))}))},localName:"iri-to-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0},{type:1,g:0}],callFunction:function(e,t,n,r,o){return tt([r,o],(function(e){var t=p(e);if(e=t.next().value,t=t.next().value,null===e||null===t)return Ie.empty();if(e=e.value,t=t.value,e.length!==t.length)return Ie.W();e=e.split(""),t=t.split("");for(var n=0;n<e.length;n++)if(e[n].codePointAt(0)!==t[n].codePointAt(0))return Ie.W();return Ie.ba()}))},localName:"codepoint-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:0}},{j:[{type:1,g:0},{type:1,g:3}],callFunction:function(e,t,n,r,o){return tt([r,o],(function(e){var t=p(e);e=t.next().value,t=t.next().value,e=e?e.value:"",t=t.value;var n=br.get(t);if(!n){try{n=Zn.compile(t,{language:"xpath"})}catch(e){throw Error("FORX0002: "+e)}br.set(t,n)}return n(e)?Ie.ba():Ie.W()}))},localName:"matches",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],callFunction:function(e,t,n,r,o,a){return tt([r,o,a],(function(e){var t=p(e);e=t.next().value;var n=t.next().value;if(t=t.next().value,e=e?e.value:"",n=n.value,(t=t.value).includes("$0"))throw Error("Using $0 in fn:replace to replace substrings with full matches is not supported.");return t=t.split(/((?:\$\$)|(?:\\\$)|(?:\\\\))/).map((function(e){switch(e){case"\\$":return"$$";case"\\\\":return"\\";case"$$":throw Error('FORX0004: invalid replacement: "$$"');default:return e}})).join(""),n=Er(n),e=e.replace(n,t),Ie.m(ne(e,1))}))},localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3},{type:1,g:3}],localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3},callFunction:function(){throw Error("Not implemented: Using flags in replace is not supported")}}];function Tr(e,t,n,r,o){if(null===n.N)throw Qt("The function "+e+" depends on dynamic context, which is absent.");return t(n,r,o,Ie.m(n.N))}function Ir(e,t,n,r){return tt([r],(function(e){if(null===(e=p(e).next().value))return Ie.empty();switch((e=e.value).node.nodeType){case 1:case 2:return Ie.m(ne(new Fe(e.node.prefix,e.node.namespaceURI,e.node.localName),23));case 7:return Ie.m(ne(new Fe("","",e.node.target),23));default:return Ie.empty()}}))}function Cr(e,t,n,r){return r.Z({default:function(){return yr(e,t,n,Ir(e,t,n,r))},empty:function(){return Ie.m(ne("",1))}})}function Fr(e,t,n,r){return Vt(r,t)}function Or(e,t,n,r){return tt([r],(function(e){return null!==(e=(e=p(e).next().value)?e.value:null)&&Ke(t.h,e,null)?Ie.ba():Ie.W()}))}function Sr(e,t,n,r){return tt([r],(function(e){function n(e){for(var t=0,n=e;null!==n;)(e.node.nodeType!==n.node.nodeType?0:1===n.node.nodeType?n.node.localName===e.node.localName&&n.node.namespaceURI===e.node.namespaceURI:7===n.node.nodeType?n.node.target===e.node.target:1)&&t++,n=We(o,n,null);return t}var r=p(e).next().value;if(null===r)return Ie.empty();var o=t.h;for(e="",r=r.value;null!==Ve(t.h,r,null);r=Ve(t.h,r,null))switch(r.node.nodeType){case 1:var a=r;e="/Q{"+(a.node.namespaceURI||"")+"}"+a.node.localName+"["+n(a)+"]"+e;break;case 2:e="/@"+((a=r).node.namespaceURI?"Q{"+a.node.namespaceURI+"}":"")+a.node.localName+e;break;case 3:e="/text()["+n(r)+"]"+e;break;case 7:e="/processing-instruction("+(a=r).node.target+")["+n(a)+"]"+e;break;case 8:e="/comment()["+n(r)+"]"+e}return 9===r.node.nodeType?Ie.create(ne(e||"/",1)):Ie.create(ne("Q{http://www.w3.org/2005/xpath-functions}root()"+e,1))}))}function Gr(e,t,n,r){return r.map((function(e){return ne(e.value.node.namespaceURI||"",20)}))}function Dr(e,t,n,r){return r.Z({default:function(){return r.map((function(e){return 7===e.value.node.nodeType?ne(e.value.node.target,1):ne(e.value.node.localName||"",1)}))},empty:function(){return Ie.m(ne("",1))}})}function Rr(e,t,n){if(2===t.node.nodeType)return Xn(t,n);for(;n;){if(Xn(t,n))return!0;if(9===n.node.nodeType)break;n=Ve(e,n,null)}return!1}function kr(e,t,n,r){return r.map((function(e){if(!se(e.type,53))throw Error("XPTY0004 Argument passed to fn:root() should be of the type node()");for(e=e.value;e;){var n=e;e=Ve(t.h,n,null)}return et(n)}))}var Ur=[{j:[{type:53,g:0}],callFunction:Cr,localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[],callFunction:Tr.bind(null,"name",Cr),localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:53,g:3}],callFunction:Gr,localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{j:[],callFunction:Tr.bind(null,"namespace-uri",Gr),localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{j:[{type:53,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return e.length?(e=_n(t.h,e).reduceRight((function(e,n,r,o){return r===o.length-1?(e.push(n),e):(Rr(t.h,n.value,e[0].value)||e.unshift(n),e)}),[]),Ie.create(e)):Ie.empty()}))},localName:"innermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{j:[{type:53,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return e.length?(e=_n(t.h,e).reduce((function(e,n,r){return 0===r?(e.push(n),e):(Rr(t.h,e[e.length-1].value,n.value)||e.push(n),e)}),[]),Ie.create(e)):Ie.empty()}),1)},localName:"outermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{j:[{type:53,g:0}],callFunction:Or,localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[],callFunction:Tr.bind(null,"has-children",Or),localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:53,g:0}],callFunction:Sr,localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{j:[],callFunction:Tr.bind(null,"path",Sr),localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{j:[{type:53,g:0}],callFunction:Ir,localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[],callFunction:Tr.bind(null,"node-name",Ir),localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[{type:53,g:0}],callFunction:Dr,localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[],callFunction:Tr.bind(null,"local-name",Dr),localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:53,g:0}],callFunction:kr,localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{j:[],callFunction:Tr.bind(null,"root",kr),localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{j:[],callFunction:Tr.bind(null,"data",Fr),localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:59,g:2}],callFunction:Fr,localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}}];function Mr(e,t){var n=0,r=e.length,o=!1,a=null;return{next:function(){if(!o){for(;n<r;){a||(a=t(e[n],n,e));var u=a.next(0);if(a=null,!u.value)return ce(!1);n++}return o=!0,ce(!0)}return ie}}}function Hr(e){return 1===(e=e.node.nodeType)||3===e}function Pr(e,t){if((se(e.type,4)||se(e.type,6))&&(se(t.type,4)||se(t.type,6))){var n=Hn(e,6),r=Hn(t,6);return n.value===r.value||isNaN(e.value)&&isNaN(t.value)}return(se(e.type,4)||se(e.type,6)||se(e.type,3))&&(se(t.type,4)||se(t.type,6)||se(t.type,3))?(n=Hn(e,3),r=Hn(t,3),n.value===r.value||isNaN(e.value)&&isNaN(t.value)):se(e.type,23)&&se(t.type,23)?e.value.namespaceURI===t.value.namespaceURI&&e.value.localName===t.value.localName:(se(e.type,9)||se(e.type,7)||se(e.type,8)||se(e.type,11)||se(e.type,12)||se(e.type,13)||se(e.type,14)||se(e.type,15))&&(se(t.type,9)||se(t.type,7)||se(t.type,8)||se(t.type,11)||se(t.type,12)||se(t.type,13)||se(t.type,14)||se(t.type,15))?Bt(e.value,t.value):(se(e.type,16)||se(e.type,17)||se(e.type,18))&&(se(t.type,16)||se(t.type,17)||se(t.type,17))?ut(e.value,t.value):e.value===t.value}function jr(e,t,n){return n=p([t,n].map((function(t){return{type:1,value:t.reduce((function(t,n){return t+_t(n,e).first().value}),"")}}))),ce(Pr(t=n.next().value,n=n.next().value))}function Xr(e,t,n,r){for(;e.value&&se(e.value.type,56);){t.push(e.value);var o=_e(r,e.value.value);if(e=n.next(0),o&&3!==o.node.nodeType)break}return e}function Lr(e,t,n,r,o){var a,u=t.h,i=r.value,c=o.value,l=null,s=null,p=null,f=[],h=[];return{next:function(){for(;!a;)if(l||(l=i.next(0)),l=Xr(l,f,i,u),s||(s=c.next(0)),s=Xr(s,h,c,u),f.length||h.length){var r=jr(t,f,h);if(f.length=0,h.length=0,!1===r.value)return a=!0,r}else{if(l.done||s.done)return a=!0,ce(l.done===s.done);if(p||(p=_r(e,t,n,l.value,s.value)),r=p.next(0),p=null,!1===r.value)return a=!0,r;s=l=null}return ie}}}function Yr(e,t,n,r,o){return r.h.length!==o.h.length?Pn(!1):Mr(r.h,(function(r){var a=o.h.find((function(e){return Pr(e.key,r.key)}));return a?Lr(e,t,n,r.value(),a.value()):Pn(!1)}))}function Qr(e,t,n,r,o){return r.P.length!==o.P.length?Pn(!1):Mr(r.P,(function(r,a){return a=o.P[a],Lr(e,t,n,r(),a())}))}function Jr(e,t,n,r,o){return r=Qe(t.h,r.value),o=Qe(t.h,o.value),r=r.filter((function(e){return Hr(e)})),o=o.filter((function(e){return Hr(e)})),Lr(e,t,n,r=Ie.create(r.map((function(e){return et(e)}))),o=Ie.create(o.map((function(e){return et(e)}))))}function Kr(e,t,n,r,o){var a=Lr(e,t,n,Ir(e,t,n,Ie.m(r)),Ir(e,t,n,Ie.m(o))),u=Jr(e,t,n,r,o);r=Le(t.h,r.value).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).sort((function(e,t){return e.node.nodeName>t.node.nodeName?1:-1})).map((function(e){return et(e)})),o=Le(t.h,o.value).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).sort((function(e,t){return e.node.nodeName>t.node.nodeName?1:-1})).map((function(e){return et(e)}));var i=Lr(e,t,n,Ie.create(r),Ie.create(o)),c=!1;return{next:function(){if(c)return ie;var e=a.next(0);return!e.done&&!1===e.value||!(e=i.next(0)).done&&!1===e.value?(c=!0,e):(e=u.next(0),c=!0,e)}}}function qr(e,t,n,r,o){var a=Lr(e,t,n,Ir(e,t,n,Ie.m(r)),Ir(e,t,n,Ie.m(o))),u=!1;return{next:function(){if(u)return ie;var e=a.next(0);return e.done||!1!==e.value?ce(Pr(_t(r,t).first(),_t(o,t).first())):(u=!0,e)}}}function _r(e,t,n,r,o){if(se(r.type,46)&&se(o.type,46))return Pn(Pr(r,o));if(se(r.type,61)&&se(o.type,61))return Yr(e,t,n,r,o);if(se(r.type,62)&&se(o.type,62))return Qr(e,t,n,r,o);if(se(r.type,53)&&se(o.type,53)){if(se(r.type,55)&&se(o.type,55))return Jr(e,t,n,r,o);if(se(r.type,54)&&se(o.type,54))return Kr(e,t,n,r,o);if(se(r.type,47)&&se(o.type,47)||se(r.type,57)&&se(o.type,57)||se(r.type,58)&&se(o.type,58))return qr(e,t,n,r,o)}return Pn(!1)}function Vr(e){return Error("XUST0001: "+(void 0===e?"Can not execute an updating expression in a non-updating context.":e))}function Wr(e){return Error("XUTY0004: The attribute "+e.name+'="'+e.value+'" follows a node that is not an attribute node.')}function Zr(){return Error("XUTY0005: The target of a insert expression with into must be a single element or document node.")}function $r(){return Error("XUTY0006: The target of a insert expression with before or after must be a single element, text, comment, or processing instruction node.")}function zr(){return Error("XUTY0008: The target of a replace expression must be a single element, attribute, text, comment, or processing instruction node.")}function eo(){return Error("XUTY0012: The target of a rename expression must be a single element, attribute, or processing instruction node.")}function to(e){return Error("XUDY0017: The target "+e.outerHTML+" is used in more than one replace value of expression.")}function no(e){return Error("XUDY0021: Applying the updates will result in the XDM instance violating constraint: '"+e+"'")}function ro(e){return Error("XUDY0023: The namespace binding "+e+" is conflicting.")}function oo(e){return Error("XUDY0024: The namespace binding "+e+" is conflicting.")}function ao(){return Error("XUDY0027: The target for an insert, replace, or rename expression expression should not be empty.")}function uo(e,t,n,r,o){n=void 0===n?{C:!1,X:!1,R:"unsorted",subtree:!1}:n,this.o=e,this.da=n.R||"unsorted",this.subtree=!!n.subtree,this.X=!!n.X,this.C=!!n.C,this.ta=t,this.I=!1,this.ab=null,this.Yb=void 0!==r&&r,this.type=o}function io(e,t,n){return t&&null!==t.N&&e.C?(null===e.ab&&(e.ab=Ce(e.h(null,n).sb())),e=e.ab()):e=e.h(t,n),e}function co(e,t){this.J=e,this.fa=t}function lo(e){e&&"object"==typeof e&&"nodeType"in e&&"function"==typeof(e=e.ownerDocument||e).createElementNS&&"function"==typeof e.createProcessingInstruction&&"function"==typeof e.createTextNode&&"function"==typeof e.createComment&&(this.h=e),this.h||(this.h=null)}function so(e,t,n,r){var o=Ve(n,e).node,a=(e=_e(n,e))?e.node:null;t.forEach((function(e){r.insertBefore(o,e.node,a)}))}function po(e,t,n,r){var o=Ve(n,e).node;t.forEach((function(t){r.insertBefore(o,t.node,e.node)}))}function fo(e,t,n,r){var o=(n=Ke(n,e))?n.node:null;t.forEach((function(t){r.insertBefore(e.node,t.node,o)}))}function ho(e,t,n){t.forEach((function(t){n.insertBefore(e.node,t.node,null)}))}function mo(e,t,n,r){t.forEach((function(t){var o=t.node.nodeName;if(Ye(n,e,o))throw no("An attribute "+o+" already exists.");r.setAttributeNS(e.node,t.node.namespaceURI,o,Je(n,t))}))}function yo(e,t,n,r,o){switch(r||(r=new lo(e?e.node:null)),e.node.nodeType){case 1:var a=n.getAllAttributes(e.node),u=n.getChildNodes(e.node),i=r.createElementNS(t.namespaceURI,t.Ca()),c={node:i,F:null};a.forEach((function(e){o.setAttributeNS(i,e.namespaceURI,e.nodeName,e.value)})),u.forEach((function(e){o.insertBefore(i,e,null)}));break;case 2:(t=r.createAttributeNS(t.namespaceURI,t.Ca())).value=Je(n,e),c={node:t,F:null};break;case 7:c={node:r.createProcessingInstruction(t.Ca(),Je(n,e)),F:null}}if(!Ve(n,e))throw Error("Not supported: renaming detached nodes.");vo(e,[c],n,o)}function go(e,t,n,r){n.getChildNodes(e.node).forEach((function(t){return r.removeChild(e.node,t)})),t&&r.insertBefore(e.node,t.node,null)}function vo(e,t,n,r){var o=Ve(n,e),a=e.node.nodeType;if(2===a){if(t.some((function(e){return 2!==e.node.nodeType})))throw Error('Constraint "If $target is an attribute node, $replacement must consist of zero or more attribute nodes." failed.');var u=o?o.node:null;r.removeAttributeNS(u,e.node.namespaceURI,e.node.nodeName),t.forEach((function(e){var t=e.node.nodeName;if(Ye(n,o,t))throw no("An attribute "+t+" already exists.");r.setAttributeNS(u,e.node.namespaceURI,t,Je(n,e))}))}if(1===a||3===a||8===a||7===a){var i=(a=_e(n,e))?a.node:null;r.removeChild(o.node,e.node),t.forEach((function(e){r.insertBefore(o.node,e.node,i)}))}}function wo(e,t,n,r){if(Ao(e,t),e.filter((function(e){return-1!==["insertInto","insertAttributes","replaceValue","rename"].indexOf(e.type)})).forEach((function(e){switch(e.type){case"insertInto":ho(e.target,e.content,r);break;case"insertAttributes":mo(e.target,e.content,t,r);break;case"rename":yo(e.target,e.o,t,n,r);break;case"replaceValue":var o=e.target;if(e=e.o,2===o.node.nodeType){var a=Ve(t,o);a?r.setAttributeNS(a.node,o.node.namespaceURI,o.node.nodeName,e):o.node.value=e}else r.setData(o.node,e)}})),e.filter((function(e){return-1!==["insertBefore","insertAfter","insertIntoAsFirst","insertIntoAsLast"].indexOf(e.type)})).forEach((function(e){switch(e.type){case"insertAfter":so(e.target,e.content,t,r);break;case"insertBefore":po(e.target,e.content,t,r);break;case"insertIntoAsFirst":fo(e.target,e.content,t,r);break;case"insertIntoAsLast":ho(e.target,e.content,r)}})),e.filter((function(e){return"replaceNode"===e.type})).forEach((function(e){vo(e.target,e.o,t,r)})),e.filter((function(e){return"replaceElementContent"===e.type})).forEach((function(e){go(e.target,e.text,t,r)})),e.filter((function(e){return"delete"===e.type})).forEach((function(e){e=e.target;var n=Ve(t,e);(n=n?n.node:null)&&(2===e.node.nodeType?r.removeAttributeNS(n,e.node.namespaceURI,e.node.nodeName):r.removeChild(n,e.node))})),e.some((function(e){return"put"===e.type})))throw Error('Not implemented: the execution for pendingUpdate "put" is not yet implemented.')}function Ao(e,t){function n(e){return new Fe(e.node.prefix,e.node.namespaceURI,e.node.localName)}function r(t,n){var r=new Set;e.filter((function(e){return e.type===t})).map((function(e){return e.target})).forEach((function(e){e=e?e.node:null,r.has(e)&&n(e),r.add(e)}))}r("rename",(function(e){throw Error("XUDY0015: The target "+e.outerHTML+" is used in more than one rename expression.")})),r("replaceNode",(function(e){throw Error("XUDY0016: The target "+e.outerHTML+" is used in more than one replace expression.")})),r("replaceValue",(function(e){throw to(e)})),r("replaceElementContent",(function(e){throw to(e)}));var o=new Map;e.filter((function(e){return"replaceNode"===e.type&&2===e.target.node.nodeType})).forEach((function(e){var r=Ve(t,e.target);r=r?r.node:null;var a=o.get(r);a?a.push.apply(a,h(e.o.map(n))):o.set(r,e.o.map(n))})),e.filter((function(e){return"rename"===e.type&&2===e.target.node.nodeType})).forEach((function(e){var n=Ve(t,e.target);if(n){n=n.node;var r=o.get(n);r?r.push(e.o):o.set(n,[e.o])}})),o.forEach((function(e){var t={};e.forEach((function(e){if(t[e.prefix]||(t[e.prefix]=e.namespaceURI),t[e.prefix]!==e.namespaceURI)throw oo(e.namespaceURI)}))}))}function xo(e){return e.concat.apply(e,h(O.apply(1,arguments).filter(Boolean)))}function bo(e,t,n,r){uo.call(this,e,t,n,!0,r),this.I=!0}function Bo(e){return e.I?function(t,n){return e.s(t,n)}:function(t,n){var r=e.h(t,n);return{next:function(){return ce({fa:[],J:r.O()})}}}}function Eo(e,t){return t((e=e.next(0)).value.fa),Ie.create(e.value.J)}function No(e,t,n,r){bo.call(this,e,t,n,r),this.I=this.ta.some((function(e){return e.I}))}function To(e){e.ta.some((function(e){return e.I}))&&(e.I=!0)}uo.prototype.B=function(){return null},uo.prototype.v=function(e){if(this.ta.forEach((function(t){return t.v(e)})),!this.Yb&&this.ta.some((function(e){return e.I})))throw Vr()},(o=lo.prototype).createAttributeNS=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createAttributeNS(e,t)},o.createCDATASection=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createCDATASection(e)},o.createComment=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createComment(e)},o.createDocument=function(){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.implementation.createDocument(null,null,null)},o.createElementNS=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createElementNS(e,t)},o.createProcessingInstruction=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createProcessingInstruction(e,t)},o.createTextNode=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createTextNode(e)},A(bo,uo),bo.prototype.h=function(){throw Vr()},A(No,bo),No.prototype.h=function(e,t){return this.A(e,t,this.ta.map((function(e){return function(n){return e.h(n,t)}})))},No.prototype.s=function(e,t){var n=[],r=this.A(e,t,this.ta.map((function(e){return e.I?function(r){return Eo(r=e.s(r,t),(function(e){return n=xo(n,e)}))}:function(n){return e.h(n,t)}}))),o=!1;return{next:function(){if(o)return ie;var e=r.O();return o=!0,ce(new co(e,n))}}},No.prototype.v=function(e){bo.prototype.v.call(this,e),To(this)};var Io=["external","attribute","nodeName","nodeType","universal"],Co=Io.length;function Fo(e){if(this.h=Io.map((function(t){return e[t]||0})),Object.keys(e).some((function(e){return!Io.includes(e)})))throw Error("Invalid specificity kind passed")}function Oo(e,t){for(var n=0;n<Co;++n){if(t.h[n]<e.h[n])return 1;if(t.h[n]>e.h[n])return-1}return 0}function So(){return Jt("Expected base expression of a function call to evaluate to a sequence of single function item")}function Go(e,t,n,r){for(var o=[],a=0;a<t.length;++a)if(null===t[a])o.push(null);else{var u=tr(e[a],t[a],n,r,!1);o.push(u)}return o}function Do(e,t){if(!se(e.type,60))throw Jt("Expected base expression to evaluate to a function item");if(e.v!==t)throw So();return e}function Ro(e,t,n,r,o,a,u){var i=0;return o=o.map((function(e){return e?null:a[i++](n)})),0<=(o=Go(e.o,o,r,e.B)).indexOf(null)?Se(e,o):(t=t.apply(void 0,[n,r,u].concat(h(o))),tr(e.s,t,r,e.B,!0))}function ko(e,t,n){var r={};No.call(this,new Fo((r.external=1,r)),[e].concat(t.filter((function(e){return!!e}))),{R:"unsorted",X:!1,subtree:!1,C:!1},n),this.la=t.length,this.S=t.map((function(e){return null===e})),this.K=null,this.pa=e,this.Ba=t}function Uo(e,t,n,r,o,a){return tt([r,o,a],(function(e){var t=p(e);e=t.next().value;var n=t.next().value;if(t=t.next().value,n=n.value,t=t.value,n>e.P.length||0>=n)throw Error("FOAY0001: subarray start out of bounds.");if(0>t)throw Error("FOAY0002: subarray length out of bounds.");if(n+t>e.P.length+1)throw Error("FOAY0001: subarray start + length out of bounds.");return Ie.m(new $e(e.P.slice(n-1,t+n-1)))}))}function Mo(e,t,n,r,o){return tt([r],(function(e){var t=p(e).next().value;return o.M((function(e){e=e.map((function(e){return e.value})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n[t-1]!==e}));for(var n=t.P.concat(),r=0,o=e.length;r<o;++r){var a=e[r];if(a>t.P.length||0>=a)throw Error("FOAY0001: subarray position out of bounds.");n.splice(a-1,1)}return Ie.m(new $e(n))}))}))}function Ho(e){return se(e,1)||se(e,20)||se(e,19)}function Po(e,t,n,r,o){return 0===r.length?0!==o.length:0!==o.length&&_r(e,t,n,r[0],o[0]).next(0).value?Po(e,t,n,r.slice(1),o.slice(1)):r[0].value!=r[0].value||(Ho(r[0].type)&&0!==o.length&&Ho(o[0].type)||0!==o.length)&&r[0].value<o[0].value}function jo(e,t,n,r){return r.sort((function(r,o){return Lr(e,t,n,Ie.create(r),Ie.create(o)).next(0).value?0:Po(e,t,n,r,o)?-1:1})),Ie.m(new $e(r.map((function(e){return function(){return Ie.create(e)}}))))}function Xo(e,t){return se(t.type,62)?t.P.reduce((function(e,t){return t().M((function(t){return t.reduce(Xo,e)}))}),e):Lt([e,Ie.m(t)])}Fo.prototype.add=function(e){var t=this;return new Fo(Io.reduce((function(n,r,o){return n[r]=t.h[o]+e.h[o],n}),Object.create(null)))},A(ko,No),ko.prototype.s=function(e,t){var n=this;if(!this.l||!this.l.I)return No.prototype.s.call(this,e,t);var r=[],o=Ro(this.l,(function(e,t,o){return Eo(n.l.value.apply(n.l,[e,t,o].concat(h(O.apply(3,arguments)))),(function(e){r=xo(r,e)}))}),e,t,this.S,this.Ba.map((function(n){return function(){return n.I?Eo(n.s(e,t),(function(e){r=xo(r,e)})):io(n,e,t)}})),this.K),a=!1;return{next:function(){if(a)return ie;var e=o.O();return a=!0,ce({fa:r,J:e})}}},ko.prototype.A=function(e,t,n){var r=this,o=(n=p(n)).next().value,a=f(n);if(this.l)return Ro(this.l,(function(e,t,n){return r.l.value.apply(r.l,[e,t,n].concat(h(O.apply(3,arguments))))}),e,t,this.S,a,this.K);var u=o(e);return u.Z({default:function(){throw So()},m:function(){return u.M((function(n){if((n=Do(n=p(n).next().value,r.la)).I)throw Error("XUDY0038: The function returned by the PrimaryExpr of a dynamic function invocation can not be an updating function");return Ro(n,n.value,e,t,r.S,a,r.K)}))}})},ko.prototype.v=function(e){if(this.K=Sa(e),No.prototype.v.call(this,e),this.pa.C){if(!(e=io(this.pa,null,null)).wa())throw So();this.l=Do(e.first(),this.la),this.l.I&&(this.I=!0)}};var Lo=[{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"size",j:[{type:62,g:3}],i:{type:5,g:3},callFunction:function(e,t,n,r){return tt([r],(function(e){return e=p(e).next().value,Ie.m(ne(e.P.length,5))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"get",j:[{type:62,g:3},{type:5,g:3}],i:{type:59,g:2},callFunction:Ze},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"put",j:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r,o,a){return tt([o,r],(function(e){var t=p(e);if(e=t.next().value,t=t.next().value,0>=(e=e.value)||e>t.P.length)throw Error("FOAY0001: array position out of bounds.");return(t=t.P.concat()).splice(e-1,1,Ce(a)),Ie.m(new $e(t))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"append",j:[{type:62,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r,o){return tt([r],(function(e){return e=p(e).next().value.P.concat([Ce(o)]),Ie.m(new $e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",j:[{type:62,g:3},{type:5,g:3},{type:5,g:3}],i:{type:62,g:3},callFunction:Uo},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",j:[{type:62,g:3},{type:5,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,o){var a=Ie.m(ne(r.first().value.length-o.first().value+1,5));return Uo(e,t,n,r,o,a)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"remove",j:[{type:62,g:3},{type:5,g:2}],i:{type:62,g:3},callFunction:Mo},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"insert-before",j:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r,o,a){return tt([r,o],(function(e){var t=p(e);if(e=t.next().value,(t=t.next().value.value)>e.P.length+1||0>=t)throw Error("FOAY0001: subarray position out of bounds.");return(e=e.P.concat()).splice(t-1,0,Ce(a)),Ie.m(new $e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"head",j:[{type:62,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r){return Ze(e,t,n,r,Ie.m(ne(1,5)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"tail",j:[{type:62,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r){return Mo(e,t,n,r,Ie.m(ne(1,5)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"reverse",j:[{type:62,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r){return tt([r],(function(e){return e=p(e).next().value,Ie.m(new $e(e.P.concat().reverse()))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"join",j:[{type:62,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r){return r.M((function(e){return e=e.reduce((function(e,t){return e.concat(t.P)}),[]),Ie.m(new $e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each",j:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,o){return tt([r,o],(function(r){var o=(r=p(r)).next().value,a=r.next().value;if(1!==a.v)throw Jt("The callback passed into array:for-each has a wrong arity.");return r=o.P.map((function(r){return Ce(a.value.call(void 0,e,t,n,Go(a.o,[r()],t,"array:for-each")[0]))})),Ie.m(new $e(r))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"filter",j:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,o){return tt([r,o],(function(r){var o=(r=p(r)).next().value,a=r.next().value;if(1!==a.v)throw Jt("The callback passed into array:filter has a wrong arity.");var u=o.P.map((function(r){return r=Go(a.o,[r()],t,"array:filter")[0],(0,a.value)(e,t,n,r)})),i=[],c=!1;return Ie.create({next:function(){if(c)return ie;for(var e=0,t=o.P.length;e<t;++e){var n=u[e].ha();i[e]=n}return e=o.P.filter((function(e,t){return i[t]})),c=!0,ce(new $e(e))}})}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-left",j:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r,o,a){return tt([r,a],(function(r){var a=(r=p(r)).next().value,u=r.next().value;if(2!==u.v)throw Jt("The callback passed into array:fold-left has a wrong arity.");return a.P.reduce((function(r,o){return o=Go(u.o,[o()],t,"array:fold-left")[0],u.value.call(void 0,e,t,n,r,o)}),o)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-right",j:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r,o,a){return tt([r,a],(function(r){var a=(r=p(r)).next().value,u=r.next().value;if(2!==u.v)throw Jt("The callback passed into array:fold-right has a wrong arity.");return a.P.reduceRight((function(r,o){return o=Go(u.o,[o()],t,"array:fold-right")[0],u.value.call(void 0,e,t,n,r,o)}),o)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each-pair",j:[{type:62,g:3},{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,o,a){return tt([r,o,a],(function(r){var o=p(r);r=o.next().value;var a=o.next().value;if(2!==(o=o.next().value).v)throw Jt("The callback passed into array:for-each-pair has a wrong arity.");for(var u=[],i=0,c=Math.min(r.P.length,a.P.length);i<c;++i){var l=p(Go(o.o,[r.P[i](),a.P[i]()],t,"array:for-each-pair")),s=l.next().value;l=l.next().value,u[i]=Ce(o.value.call(void 0,e,t,n,s,l))}return Ie.m(new $e(u))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"sort",j:[{type:62,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r){return tt([r],(function(r){return r=p(r).next().value.P.map((function(e){return e().O()})),jo(e,t,n,r)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"flatten",j:[{type:59,g:2}],i:{type:59,g:2},callFunction:function(e,t,n,r){return r.M((function(e){return e.reduce(Xo,Ie.empty())}))}}];function Yo(e,t,n,r,o){return o.G()?o:Ie.m(Hn(o.first(),e))}var Qo=[{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"untypedAtomic",j:[{type:46,g:0}],i:{type:19,g:0},callFunction:Yo.bind(null,19)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"error",j:[{type:46,g:0}],i:{type:39,g:0},callFunction:Yo.bind(null,39)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"string",j:[{type:46,g:0}],i:{type:1,g:0},callFunction:Yo.bind(null,1)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"boolean",j:[{type:46,g:0}],i:{type:0,g:0},callFunction:Yo.bind(null,0)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"decimal",j:[{type:46,g:0}],i:{type:4,g:0},callFunction:Yo.bind(null,4)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"float",j:[{type:46,g:0}],i:{type:6,g:0},callFunction:Yo.bind(null,6)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"double",j:[{type:46,g:0}],i:{type:3,g:0},callFunction:Yo.bind(null,3)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"duration",j:[{type:46,g:0}],i:{type:18,g:0},callFunction:Yo.bind(null,18)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTime",j:[{type:46,g:0}],i:{type:9,g:0},callFunction:Yo.bind(null,9)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",j:[{type:46,g:0}],i:{type:10,g:0},callFunction:Yo.bind(null,10)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"time",j:[{type:46,g:0}],i:{type:8,g:0},callFunction:Yo.bind(null,8)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"date",j:[{type:46,g:0}],i:{type:7,g:0},callFunction:Yo.bind(null,7)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYearMonth",j:[{type:46,g:0}],i:{type:11,g:0},callFunction:Yo.bind(null,11)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYear",j:[{type:46,g:0}],i:{type:12,g:0},callFunction:Yo.bind(null,12)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonthDay",j:[{type:46,g:0}],i:{type:13,g:0},callFunction:Yo.bind(null,13)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gDay",j:[{type:46,g:0}],i:{type:15,g:0},callFunction:Yo.bind(null,15)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonth",j:[{type:46,g:0}],i:{type:14,g:0},callFunction:Yo.bind(null,14)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"hexBinary",j:[{type:46,g:0}],i:{type:22,g:0},callFunction:Yo.bind(null,22)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"base64Binary",j:[{type:46,g:0}],i:{type:21,g:0},callFunction:Yo.bind(null,21)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"QName",j:[{type:46,g:0}],i:{type:23,g:0},callFunction:function(e,t,n,r){if(r.G())return r;if(se((e=r.first()).type,2))throw Error("XPTY0004: The provided QName is not a string-like value.");if(!$t(e=Zt(e=Hn(e,1).value,23),23))throw Error("FORG0001: The provided QName is invalid.");if(!e.includes(":"))return n=n.aa(""),Ie.m(ne(new Fe("",n,e),23));if(t=(r=p(e.split(":"))).next().value,r=r.next().value,!(n=n.aa(t)))throw Error("FONS0004: The value "+e+" can not be cast to a QName. Did you mean to use fn:QName?");return Ie.m(ne(new Fe(t,n,r),23))}},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"anyURI",j:[{type:46,g:0}],i:{type:20,g:0},callFunction:Yo.bind(null,20)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"normalizedString",j:[{type:46,g:0}],i:{type:48,g:0},callFunction:Yo.bind(null,48)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"token",j:[{type:46,g:0}],i:{type:52,g:0},callFunction:Yo.bind(null,52)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"language",j:[{type:46,g:0}],i:{type:51,g:0},callFunction:Yo.bind(null,51)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKEN",j:[{type:46,g:0}],i:{type:50,g:0},callFunction:Yo.bind(null,50)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKENS",j:[{type:46,g:0}],i:{type:49,g:2},callFunction:Yo.bind(null,49)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"Name",j:[{type:46,g:0}],i:{type:25,g:0},callFunction:Yo.bind(null,25)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NCName",j:[{type:46,g:0}],i:{type:24,g:0},callFunction:Yo.bind(null,24)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ID",j:[{type:46,g:0}],i:{type:42,g:0},callFunction:Yo.bind(null,42)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREF",j:[{type:46,g:0}],i:{type:41,g:0},callFunction:Yo.bind(null,41)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREFS",j:[{type:46,g:0}],i:{type:43,g:2},callFunction:Yo.bind(null,43)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITY",j:[{type:46,g:0}],i:{type:26,g:0},callFunction:Yo.bind(null,26)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITIES",j:[{type:46,g:0}],i:{type:40,g:2},callFunction:Yo.bind(null,40)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"integer",j:[{type:46,g:0}],i:{type:5,g:0},callFunction:Yo.bind(null,5)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonPositiveInteger",j:[{type:46,g:0}],i:{type:27,g:0},callFunction:Yo.bind(null,27)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"negativeInteger",j:[{type:46,g:0}],i:{type:28,g:0},callFunction:Yo.bind(null,28)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"long",j:[{type:46,g:0}],i:{type:31,g:0},callFunction:Yo.bind(null,31)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"int",j:[{type:46,g:0}],i:{type:32,g:0},callFunction:Yo.bind(null,32)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"short",j:[{type:46,g:0}],i:{type:33,g:0},callFunction:Yo.bind(null,33)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"byte",j:[{type:46,g:0}],i:{type:34,g:0},callFunction:Yo.bind(null,34)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonNegativeInteger",j:[{type:46,g:0}],i:{type:30,g:0},callFunction:Yo.bind(null,30)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedLong",j:[{type:46,g:0}],i:{type:36,g:0},callFunction:Yo.bind(null,36)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedInt",j:[{type:46,g:0}],i:{type:35,g:0},callFunction:Yo.bind(null,35)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedShort",j:[{type:46,g:0}],i:{type:38,g:0},callFunction:Yo.bind(null,38)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedByte",j:[{type:46,g:0}],i:{type:37,g:0},callFunction:Yo.bind(null,37)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"positiveInteger",j:[{type:46,g:0}],i:{type:29,g:0},callFunction:Yo.bind(null,29)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"yearMonthDuration",j:[{type:46,g:0}],i:{type:16,g:0},callFunction:Yo.bind(null,16)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dayTimeDuration",j:[{type:46,g:0}],i:{type:17,g:0},callFunction:Yo.bind(null,17)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",j:[{type:46,g:0}],i:{type:10,g:0},callFunction:Yo.bind(null,10)}];function Jo(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getYear(),5))}function Ko(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getMonth(),5))}function qo(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getDay(),5))}function _o(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getHours(),5))}function Vo(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getMinutes(),5))}function Wo(e,t,n,r){return r.G()||(t=(e=Ie).m,r=r.first().value,r=t.call(e,ne(r.B+r.sa,4))),r}function Zo(e,t,n,r){return r.G()?r:(e=r.first().value.Y)?Ie.m(ne(e,17)):Ie.empty()}var $o=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"dateTime",j:[{type:7,g:0},{type:8,g:0}],i:{type:9,g:0},callFunction:function(e,t,n,r,o){if(r.G())return r;if(o.G())return o;if(e=r.first().value,o=o.first().value,t=e.Y,n=o.Y,t||n){if(!t||n)if(!t&&n)t=n;else if(!ut(t,n))throw Error("FORG0008: fn:dateTime: got a date and time value with different timezones.")}else t=null;return Ie.m(ne(new vt(e.getYear(),e.getMonth(),e.getDay(),o.getHours(),o.getMinutes(),o.getSeconds(),o.sa,t),9))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Jo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Ko},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:qo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:_o},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Vo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-dateTime",j:[{type:9,g:0}],i:{type:4,g:0},callFunction:Wo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-dateTime",j:[{type:9,g:0}],i:{type:17,g:0},callFunction:Zo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Jo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Ko},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:qo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-date",j:[{type:7,g:0}],i:{type:17,g:0},callFunction:Zo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-time",j:[{type:8,g:0}],i:{type:5,g:0},callFunction:_o},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-time",j:[{type:8,g:0}],i:{type:5,g:0},callFunction:Vo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-time",j:[{type:8,g:0}],i:{type:4,g:0},callFunction:Wo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-time",j:[{type:8,g:0}],i:{type:17,g:0},callFunction:Zo}];function zo(e,t){var n=t.h,r=t.o,o=t.B;switch(e.node.nodeType){case 1:var a=r.createElementNS(e.node.namespaceURI,e.node.nodeName);for(n.getAllAttributes(e.node).forEach((function(e){return o.setAttributeNS(a,e.namespaceURI,e.nodeName,e.value)})),e=(r=p(Qe(n,e))).next();!e.done;e=r.next())e=zo(e.value,t),o.insertBefore(a,e.node,null);return{node:a,F:null};case 2:return(t=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName)).value=Je(n,e),{node:t,F:null};case 4:return{node:r.createCDATASection(Je(n,e)),F:null};case 8:return{node:r.createComment(Je(n,e)),F:null};case 9:for(r=r.createDocument(),e=(n=p(Qe(n,e))).next();!e.done;e=n.next())e=zo(e.value,t),o.insertBefore(r,e.node,null);return{node:r,F:null};case 7:return{node:r.createProcessingInstruction(e.node.target,Je(n,e)),F:null};case 3:return{node:r.createTextNode(Je(n,e)),F:null}}}function ea(e,t){var n=t.B,r=t.o,o=t.h;if(!Pe(e.node))return zo(e,t).node;switch(e.node.nodeType){case 2:return(r=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName)).value=Je(o,e),r;case 8:return r.createComment(Je(o,e));case 1:var a=e.node.prefix,u=e.node.localName,i=r.createElementNS(e.node.namespaceURI,a?a+":"+u:u);return Qe(o,e).forEach((function(e){e=ea(e,t),n.insertBefore(i,e,null)})),Le(o,e).forEach((function(e){n.setAttributeNS(i,e.node.namespaceURI,e.node.nodeName,Je(o,e))})),i.normalize(),i;case 7:return r.createProcessingInstruction(e.node.target,Je(o,e));case 3:return r.createTextNode(Je(o,e))}}function ta(e,t,n){var r=e;for(e=Ve(n,r);null!==e;){if(2===r.node.nodeType)t.push(r.node.nodeName);else{var o=Qe(n,e);t.push(o.findIndex((function(e){return Xn(e,r)})))}e=Ve(n,r=e)}return r}function na(e,t,n){for(var r={};0<t.length;)r.$a=t.pop(),e="string"==typeof r.$a?Le(n,e).find(function(e){return function(t){return t.node.nodeName===e.$a}}(r)):Qe(n,e)[r.$a],r={$a:r.$a};return e.node}function ra(e,t,n){var r=e.node;if(!(Pe(r)||n||e.F))return r;r=t.da;var o=[];return n?ea(e,t):(e=ta(e,o,t.h),(n=r.get(e.node))||(n={node:ea(e,t),F:null},r.set(e.node,n)),na(n,o,t.h))}function oa(e,t,n,r,o){return r.M((function(e){for(var n="",r=0;r<e.length;r++){var a=e[r],u=t.v&&se(a.type,53)?t.v.serializeToString(ra(a.value,t,!1)):Vt(Ie.m(a),t).map((function(e){return Hn(e,1)})).first().value;n+="{type: "+me[a.type]+", value: "+u+"}\n"}return void 0!==o&&(n+=o.first().value),t.s.trace(n),Ie.create(e)}))}var aa=[{j:[{type:59,g:2}],callFunction:oa,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:1,g:3}],callFunction:oa,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}}];function ua(e,t,n,r,o){throw e=void 0===r||r.G()?new Fe("err","http://www.w3.org/2005/xqt-errors","FOER0000"):r.first().value,t="",void 0===o||o.G()||(t=": "+o.first().value),Error(""+e.localName+t)}var ia=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[],i:{type:63,g:3},callFunction:ua},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0}],i:{type:63,g:3},callFunction:ua},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0},{type:1,g:3}],i:{type:63,g:3},callFunction:ua},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0},{type:1,g:3},{type:59,g:2}],i:{type:63,g:3},callFunction:function(){throw Error("Not implemented: Using an error object in error is not supported")}}];function ca(e){return"string"==typeof e?e:(e=(new ke).getChildNodes(e).find((function(e){return 8===e.nodeType})))?e.data:"some expression"}function la(e,t){e=Error.call(this,e),this.message=e.message,"stack"in e&&(this.stack=e.stack),this.position={end:{ja:t.end.ja,line:t.end.line,offset:t.end.offset},start:{ja:t.start.ja,line:t.start.line,offset:t.start.offset}}}function sa(e,t){if(t instanceof Error)throw t;"string"!=typeof e&&(e=ca(e));var n=ni(t);e=e.replace("\r","").split("\n");var r=Math.floor(Math.log10(Math.min(n.end.line+2,e.length)))+1;throw e=e.reduce((function(e,t,o){var a=o+1;if(2<n.start.line-a||2<a-n.end.line)return e;if(o=Array(r).fill(" ",0,Math.floor(Math.log10(a))+1-r).join("")+a+": ",e.push(o+t),a>=n.start.line&&a<=n.end.line){var u=a<n.end.line?t.length+o.length:n.end.ja-1+o.length;a=a>n.start.line?o.length:n.start.ja-1+o.length,t=" ".repeat(o.length)+Array.from(t.substring(0,a-o.length),(function(e){return"\t"===e?"\t":" "})).join("")+"^".repeat(u-a),e.push(t)}return e}),[]),t=ri(t).join("\n"),new la(e.join("\n")+"\n\n"+t,n)}A(la,Error);var pa=Object.create(null);function fa(e,t){for(var n=[],r=0;r<e.length+1;++r)n[r]=[];return function r(o,a){if(0===o)return a;if(0===a)return o;if(void 0!==n[o][a])return n[o][a];var u=0;return e[o-1]!==t[a-1]&&(u=1),u=Math.min(r(o-1,a)+1,r(o,a-1)+1,r(o-1,a-1)+u),n[o][a]=u}(e.length,t.length)}function ha(e){var t=pa[e]?pa[e]:Object.keys(pa).map((function(t){return{name:t,Ab:fa(e,t.slice(t.lastIndexOf(":")+1))}})).sort((function(e,t){return e.Ab-t.Ab})).slice(0,5).filter((function(t){return t.Ab<e.length/2})).reduce((function(e,t){return e.concat(pa[t.name])}),[]).slice(0,5);return t.length?t.map((function(e){return'"Q{'+e.namespaceURI+"}"+e.localName+" ("+e.j.map((function(e){return 4===e?"...":ge(e)})).join(", ")+')"'})).reduce((function(e,t,n,r){return 0===n?e+t:e+(n!==r.length-1?", ":" or ")+t}),"Did you mean ")+"?":"No similar functions found."}function da(e,t,n){var r=pa[e+":"+t];return r&&(r=r.find((function(e){return e.j.some((function(e){return 4===e}))?e.j.length-1<=n:e.j.length===n})))?{j:r.j,arity:n,callFunction:r.callFunction,I:r.I,localName:t,namespaceURI:e,i:r.i}:null}function ma(e,t,n,r,o){pa[e+":"+t]||(pa[e+":"+t]=[]),pa[e+":"+t].push({j:n,arity:n.length,callFunction:o,I:!1,localName:t,namespaceURI:e,i:r})}var ya={},ga=(ya.xml="http://www.w3.org/XML/1998/namespace",ya.xs="http://www.w3.org/2001/XMLSchema",ya.fn="http://www.w3.org/2005/xpath-functions",ya.map="http://www.w3.org/2005/xpath-functions/map",ya.array="http://www.w3.org/2005/xpath-functions/array",ya.math="http://www.w3.org/2005/xpath-functions/math",ya.fontoxpath="http://fontoxml.com/fontoxpath",ya.local="http://www.w3.org/2005/xquery-local-functions",ya);function va(e,t,n,r){this.Ha=[Object.create(null)],this.Ia=Object.create(null),this.s=e,this.da=Object.keys(t).reduce((function(e,n){return void 0===t[n]||(e[n]="Q{}"+n+"[0]"),e}),Object.create(null)),this.o=Object.create(null),this.h=Object.create(null),this.v=n,this.l=r,this.B=[]}function wa(e){return Error("XPTY0004: "+e)}function Aa(e,t){return e=2===e.node.nodeType?e.node.nodeName+'="'+Je(t,e)+'"':e.node.outerHTML,Error("XQTY0024: The node "+e+" follows a node that is not an attribute node or a namespace node.")}function xa(e){return Error('XQDY0044: The node name "'+e.Ca()+'" is invalid for a computed attribute constructor.')}function ba(){return Error("XQST0045: Functions and variables may not be declared in one of the reserved namespace URIs.")}function Ba(){return Error("XQST0060: Functions declared in a module or as an external function must reside in a namespace.")}function Ea(){return Error("XQST0066: A Prolog may contain at most one default function namespace declaration.")}function Na(){return Error("XQST0070: The prefixes xml and xmlns may not be used in a namespace declaration or be bound to another namespaceURI.")}function Ta(e){return Error('XQDY0074: The value "'+e+'" of a name expressions cannot be converted to an expanded QName.')}function Ia(e){return Error('XPST0081: The prefix "'+e+'" could not be resolved')}function Ca(e,t){return"Q{"+(e||"")+"}"+t}function Fa(e,t){for(var n=e.length-1;0<=n;--n)if(t in e[n])return e[n][t]}function Oa(e){this.o=e,this.s=this.h=0,this.B=[Object.create(null)],this.l=Object.create(null),this.v=null,this.Ia=e&&e.Ia,this.Ha=e&&e.Ha}function Sa(e){for(var t=new Oa(e.o),n=0;n<e.h+1;++n)t.B=[Object.assign(Object.create(null),t.B[0],e.B[n])],t.Ha=[Object.assign(Object.create(null),t.Ha[0],e.Ha[n])],t.l=Object.assign(Object.create(null),e.l),t.Ia=e.Ia,t.v=e.v;return t}function Ga(e){e.s++,e.h++,e.B[e.h]=Object.create(null),e.Ha[e.h]=Object.create(null)}function Da(e,t,n){return(e=e.Ia[Ca(t,n)])?e:null}function Ra(e,t,n,r,o){if(r=Ca(t,n)+"~"+r,e.l[r])throw Error('XQST0049: The function or variable "Q{'+t+"}"+n+'" is declared more than once.');e.l[r]=o}function ka(e,t,n){e.B[e.h][t]=n}function Ua(e,t,n){return t=Ca(t||"",n),e.Ha[e.h][t]=t+"["+e.s+"]"}function Ma(e,t,n,r){e.Ia[Ca(t||"",n)+"["+e.s+"]"]=r}function Ha(e){e.B.length=e.h,e.Ha.length=e.h,e.h--}function Pa(e,t){"*"===t||Array.isArray(t)||(t=[t]);for(var n=1;n<e.length;++n)if(Array.isArray(e[n])){var r=e[n];if("*"===t||t.includes(r[0]))return r}return null}function ja(e){return 2>e.length?"":"object"==typeof e[1]?e[2]||"":e[1]||""}function Xa(e,t){return Array.isArray(e)?"object"!=typeof(e=e[1])||Array.isArray(e)?null:t in e?e[t]:null:null}function La(e,t){return t.reduce(Pa,e)}function Ya(e,t){for(var n=[],r=1;r<e.length;++r)if(Array.isArray(e[r])){var o=e[r];"*"!==t&&o[0]!==t||n.push(o)}return n}function Qa(e){return{localName:ja(e),namespaceURI:Xa(e,"URI"),prefix:Xa(e,"prefix")}}function Ja(e){function t(e){switch(e[0]){case"documentTest":return 55;case"elementTest":return 54;case"attributeTest":return 47;case"piTest":return 57;case"commentTest":return 58;case"textTest":return 56;case"anyKindTest":return 53;case"anyItemType":return 59;case"anyFunctionTest":case"functionTest":case"typedFunctionTest":return 60;case"anyMapTest":case"typedMapTest":return 61;case"anyArrayTest":case"typedArrayTest":return 62;case"atomicType":return ve([Xa(e,"prefix"),ja(e)].join(":"));case"parenthesizedItemType":return t(Pa(e,"*"));default:throw Error('Type declaration "'+Pa(n,"*")[0]+'" is not supported.')}}var n=Pa(e,"typeDeclaration");if(!n||Pa(n,"voidSequenceType"))return{type:59,g:2};e={type:t(Pa(n,"*")),g:3};var r=null,o=Pa(n,"occurrenceIndicator");switch(o&&(r=ja(o)),r){case"*":return e.g=2,e;case"?":return e.g=0,e;case"+":return e.g=1,e;case"":case null:return e}}function Ka(e,t,n){if("object"!=typeof e[1]||Array.isArray(e[1])){var r={};r[t]=n,e.splice(1,0,r)}else e[1][t]=n}function qa(e){var t={type:62,g:3};return Ka(e,"type",t),t}function _a(e,t){if(!t||!t.ia)return{type:59,g:2};var n=Pa(e,"EQName");if(!n)return{type:59,g:2};var r=Qa(n);n=r.localName;var o=r.prefix;return r=Ya(Pa(e,"arguments"),"*"),(n=t.ia.Ua({localName:n,prefix:o},r.length))&&(t=t.ia.xa(n.namespaceURI,n.localName,r.length+1))?(59!==t.i.type&&Ka(e,"type",t.i),t.i):{type:59,g:2}}function Va(e,t,n){return(e<<20)+(t<<12)+(n.charCodeAt(0)<<8)+n.charCodeAt(1)}va.prototype.xa=function(e,t,n){return da(e,t,n)},va.prototype.ib=function(e,t){return e?null:(e=this.da[t],this.o[t]||(this.o[t]={name:t}),e)},va.prototype.Ua=function(e,t){var n=this.l(e,t);if(n)this.B.push({nc:e,arity:t,Lb:n});else if(""===e.prefix){if(this.v)return{namespaceURI:this.v,localName:e.localName}}else if(t=this.aa(e.prefix,!0))return{namespaceURI:t,localName:e.localName};return n},va.prototype.aa=function(e,t){return void 0===t||t?ga[e]?ga[e]:(t=this.s(e),this.h[e]||(this.h[e]={namespaceURI:t,prefix:e}),void 0!==t||e?t:null):null},Oa.prototype.xa=function(e,t,n,r){r=void 0!==r&&r;var o=this.l[Ca(e,t)+"~"+n];return!o||r&&o.Eb?null===this.o?null:this.o.xa(e,t,n,r):o},Oa.prototype.ib=function(e,t){var n=Fa(this.Ha,Ca(e,t));return n||(null===this.o?null:this.o.ib(e,t))},Oa.prototype.Ua=function(e,t){var n=e.prefix,r=e.localName;return""===n&&this.v?{localName:r,namespaceURI:this.v}:n&&(n=this.aa(n,!1))?{localName:r,namespaceURI:n}:null===this.o?null:this.o.Ua(e,t)},Oa.prototype.aa=function(e,t){var n=Fa(this.B,e||"");return void 0===n?null===this.o?void 0:this.o.aa(e||"",void 0===t||t):n};var Wa={},Za=(Wa[Va(2,2,"idivOp")]=5,Wa[Va(16,16,"addOp")]=16,Wa[Va(16,16,"subtractOp")]=16,Wa[Va(16,16,"divOp")]=4,Wa[Va(16,2,"multiplyOp")]=16,Wa[Va(16,2,"divOp")]=16,Wa[Va(2,16,"multiplyOp")]=16,Wa[Va(17,17,"addOp")]=17,Wa[Va(17,17,"subtractOp")]=17,Wa[Va(17,17,"divOp")]=4,Wa[Va(17,2,"multiplyOp")]=17,Wa[Va(17,2,"divOp")]=17,Wa[Va(2,17,"multiplyOp")]=17,Wa[Va(9,9,"subtractOp")]=17,Wa[Va(7,7,"subtractOp")]=17,Wa[Va(8,8,"subtractOp")]=17,Wa[Va(9,16,"addOp")]=9,Wa[Va(9,16,"subtractOp")]=9,Wa[Va(9,17,"addOp")]=9,Wa[Va(9,17,"subtractOp")]=9,Wa[Va(7,16,"addOp")]=7,Wa[Va(7,16,"subtractOp")]=7,Wa[Va(7,17,"addOp")]=7,Wa[Va(7,17,"subtractOp")]=7,Wa[Va(8,17,"addOp")]=8,Wa[Va(8,17,"subtractOp")]=8,Wa[Va(9,16,"addOp")]=9,Wa[Va(9,16,"subtractOp")]=9,Wa[Va(9,17,"addOp")]=9,Wa[Va(9,17,"subtractOp")]=9,Wa[Va(7,17,"addOp")]=7,Wa[Va(7,17,"subtractOp")]=7,Wa[Va(7,16,"addOp")]=7,Wa[Va(7,16,"subtractOp")]=7,Wa[Va(8,17,"addOp")]=8,Wa[Va(8,17,"subtractOp")]=8,Wa),$a={},za=($a[Va(2,2,"addOp")]=function(e,t){return e+t},$a[Va(2,2,"subtractOp")]=function(e,t){return e-t},$a[Va(2,2,"multiplyOp")]=function(e,t){return e*t},$a[Va(2,2,"divOp")]=function(e,t){return e/t},$a[Va(2,2,"modOp")]=function(e,t){return e%t},$a[Va(2,2,"idivOp")]=function(e,t){return Math.trunc(e/t)},$a[Va(16,16,"addOp")]=function(e,t){return new fn(e.ga+t.ga)},$a[Va(16,16,"subtractOp")]=function(e,t){return new fn(e.ga-t.ga)},$a[Va(16,16,"divOp")]=function(e,t){return e.ga/t.ga},$a[Va(16,2,"multiplyOp")]=mn,$a[Va(16,2,"divOp")]=function(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot divide xs:yearMonthDuration by NaN");if((e=Math.round(e.ga/t))>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while dividing xs:yearMonthDuration");return new fn(e<Number.MIN_SAFE_INTEGER||0===e?0:e)},$a[Va(2,16,"multiplyOp")]=function(e,t){return mn(t,e)},$a[Va(17,17,"addOp")]=function(e,t){return new it(e.ea+t.ea)},$a[Va(17,17,"subtractOp")]=function(e,t){return new it(e.ea-t.ea)},$a[Va(17,17,"divOp")]=function(e,t){if(0===t.ea)throw Error("FOAR0001: Division by 0");return e.ea/t.ea},$a[Va(17,2,"multiplyOp")]=ft,$a[Va(17,2,"divOp")]=function(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot divide xs:dayTimeDuration by NaN");if((e=e.ea/t)>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while dividing xs:dayTimeDuration");return new it(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)},$a[Va(2,17,"multiplyOp")]=function(e,t){return ft(t,e)},$a[Va(9,9,"subtractOp")]=Et,$a[Va(7,7,"subtractOp")]=Et,$a[Va(8,8,"subtractOp")]=Et,$a[Va(9,16,"addOp")]=Nt,$a[Va(9,16,"subtractOp")]=Tt,$a[Va(9,17,"addOp")]=Nt,$a[Va(9,17,"subtractOp")]=Tt,$a[Va(7,16,"addOp")]=Nt,$a[Va(7,16,"subtractOp")]=Tt,$a[Va(7,17,"addOp")]=Nt,$a[Va(7,17,"subtractOp")]=Tt,$a[Va(8,17,"addOp")]=Nt,$a[Va(8,17,"subtractOp")]=Tt,$a[Va(9,16,"addOp")]=Nt,$a[Va(9,16,"subtractOp")]=Tt,$a[Va(9,17,"addOp")]=Nt,$a[Va(9,17,"subtractOp")]=Tt,$a[Va(7,17,"addOp")]=Nt,$a[Va(7,17,"subtractOp")]=Tt,$a[Va(7,16,"addOp")]=Nt,$a[Va(7,16,"subtractOp")]=Tt,$a[Va(8,17,"addOp")]=Nt,$a[Va(8,17,"subtractOp")]=Tt,$a);function eu(e,t){return se(e,5)&&se(t,5)?5:se(e,4)&&se(t,4)?4:se(e,6)&&se(t,6)?6:3}var tu=[2,16,17,9,7,8];function nu(e,t,n){function r(e,t){return{U:o?o(e):e,V:a?a(t):t}}var o=null,a=null;se(t,19)&&(o=function(e){return Hn(e,3)},t=3),se(n,19)&&(a=function(e){return Hn(e,3)},n=3);var u=tu.filter((function(e){return se(t,e)})),i=tu.filter((function(e){return se(n,e)}));if(u.includes(2)&&i.includes(2)){var c=za[Va(2,2,e)],l=Za[Va(2,2,e)];return l||(l=eu(t,n)),"divOp"===e&&5===l&&(l=4),"idivOp"===e?ou(r,c)[0]:function(e,t){return e=r(e,t),ne(c(e.U.value,e.V.value),l)}}for(var s=(u=p(u)).next();!s.done;s=u.next()){s=s.value;for(var f={},h=p(i),d=h.next();!d.done;f={nb:f.nb,qb:f.qb},d=h.next())if(d=d.value,f.nb=za[Va(s,d,e)],f.qb=Za[Va(s,d,e)],f.nb&&void 0!==f.qb)return function(e){return function(t,n){return t=r(t,n),ne(e.nb(t.U.value,t.V.value),e.qb)}}(f)}}function ru(e,t,n){function r(e,t){return{U:a?a(e):e,V:u?u(t):t}}var o=[2,53,59,46,47];if(o.includes(t)||o.includes(n))return 2;var a=null,u=null;se(t,19)&&(a=function(e){return Hn(e,3)},t=3),se(n,19)&&(u=function(e){return Hn(e,3)},n=3);var i=tu.filter((function(e){return se(t,e)}));if(o=tu.filter((function(e){return se(n,e)})),i.includes(2)&&o.includes(2))return void 0===(o=Za[Va(2,2,e)])&&(o=eu(t,n)),"divOp"===e&&5===o&&(o=4),"idivOp"===e?ou(r,(function(e,t){return Math.trunc(e/t)}))[1]:o;for(var c=(i=p(i)).next();!c.done;c=i.next()){c=c.value;for(var l=p(o),s=l.next();!s.done;s=l.next())if(void 0!==(s=Za[Va(c,s.value,e)]))return s}}function ou(e,t){return[function(n,r){if(n=(r=e(n,r)).U,0===(r=r.V).value)throw Error("FOAR0001: Divisor of idiv operator cannot be (-)0");if(Number.isNaN(n.value)||Number.isNaN(r.value)||!Number.isFinite(n.value))throw Error("FOAR0002: One of the operands of idiv is NaN or the first operand is (-)INF");return Number.isFinite(n.value)&&!Number.isFinite(r.value)?ne(0,5):ne(t(n.value,r.value),5)},5]}var au=Object.create(null);function uu(e,t,n,r,o){uo.call(this,t.o.add(n.o),[t,n],{C:!1},!1,r),this.A=t,this.K=n,this.l=e,this.s=o}function iu(e,t){for(var n=wu,r=!1,o=1;o<e.length;o++)switch(e[o][0]){case"letClause":Fu(t);var a=e[o],u=t,i=n,c=La(a,["letClauseItem","typedVariableBinding","varName"]);c=Qa(c),i=i((a=La(a,["letClauseItem","letExpr"]))[1],u),Cu(u,c.localName,i);break;case"forClause":r=!0,Fu(t),cu(e[o],t,n);break;case"whereClause":Fu(t),n(u=e[o],t),Ka(u,"type",{type:0,g:3});break;case"orderByClause":Fu(t);break;case"returnClause":return u=n,Ka(n=La(o=e[o],["*"]),"type",t=u(n,t)),Ka(o,"type",t),(n=t)?(r&&(n={type:n.type,g:2}),59!==n.type&&Ka(e,"type",n),n):{type:59,g:2};default:return(n=n(e[o],t))?(r&&(n={type:n.type,g:2}),59!==n.type&&Ka(e,"type",n),n):{type:59,g:2}}if(!(0<t.h))throw Error("Variable scope out of bound");t.h--,t.o.pop(),t.v.pop()}function cu(e,t,n){var r=Qa(La(e,["forClauseItem","typedVariableBinding","varName"]));(e=La(e,["forClauseItem","forExpr","sequenceExpr"]))&&((e=Ya(e,"*").map((function(e){return n(e,t)}))).includes(void 0)||e.includes(null)||1===(e=lu(e)).length&&Cu(t,r.localName,e[0]))}function lu(e){return e.filter((function(e,t,n){return n.findIndex((function(t){return t.type===e.type&&t.g===e.g}))===t}))}function su(e,t){if(!t||!t.ia)return{type:59,g:2};var n=Pa(e,"functionName"),r=Qa(n),o=r.localName,a=r.prefix,u=r.namespaceURI;if(r=Ya(Pa(e,"arguments"),"*"),null===u){if(!(a=t.ia.Ua({localName:o,prefix:a},r.length)))return{type:59,g:2};o=a.localName,Ka(n,"URI",u=a.namespaceURI),n[2]=o}return(t=t.ia.xa(u,o,r.length))&&63!==t.i.type?(59!==t.i.type&&Ka(e,"type",t.i),t.i):{type:59,g:2}}function pu(e){var t={type:61,g:3};return Ka(e,"type",t),t}function fu(e,t){if(!t||!t.ia)return{type:59,g:2};var n=Pa(e,"functionName"),r=Qa(n),o=r.localName,a=r.namespaceURI,u=r.prefix;if(r=Number(La(e,["integerConstantExpr","value"])[1]),!a){if(!(a=t.ia.Ua({localName:o,prefix:u},r)))return{type:59,g:2};o=a.localName,Ka(n,"URI",a=a.namespaceURI)}return(t=t.ia.xa(a,o,r)||null)?(59!==t.i.type&&63!==t.i.type&&Ka(e,"type",t.i),t.i):{type:59,g:2}}function hu(e,t){var n=Ya(e,"stepExpr");if(!n)return{type:59,g:2};for(var r=(n=p(n)).next();!r.done;r=n.next()){var o=r.value;r=t;var a=null;if(o){for(var u=Ya(o,"*"),i="",c=(u=p(u)).next();!c.done;c=u.next())switch(c=c.value,c[0]){case"filterExpr":a=Xa(La(c,["*"]),"type");break;case"xpathAxis":e:{switch(i=c[1]){case"attribute":a={type:47,g:2};break e;case"child":case"decendant":case"self":case"descendant-or-self":case"following-sibling":case"following":case"namespace":case"parent":case"ancestor":case"preceding-sibling":case"preceding":case"ancestor-or-self":a={type:53,g:2};break e}a=void 0}break;case"nameTest":var l=Qa(c);if(null!==l.namespaceURI)break;if("attribute"===i&&!l.prefix)break;void 0!==(l=r.aa(l.prefix||""))&&Ka(c,"URI",l);break;case"lookup":a={type:59,g:2}}a&&59!==a.type&&Ka(o,"type",a)}o=Xa(o,"type")}return o&&59!==o.type&&Ka(e,"type",o),o}function du(e){var t={type:0,g:3};return Ka(e,"type",t),t}function mu(e,t,n){return(t=0===t?{type:53,g:2}:1===t?n[0]:n.includes(void 0)||n.includes(null)||1<(t=lu(n)).length?{type:59,g:2}:{type:t[0].type,g:2})&&59!==t.type&&Ka(e,"type",t),t}function yu(e,t,n,r){if(!t||n.includes(void 0))return{type:59,g:2};for(var o=Ya(e,"typeswitchExprCaseClause"),a=0;a<n.length;a++){var u=Pa(o[a],"*");switch(u[0]){case"sequenceType":if(u=gu(u,t,n[a]))return 59!==u.type&&Ka(e,"type",u),u;continue;case"sequenceTypeUnion":for(r=Ya(u,"*"),o=0;2>o;o++)if(u=gu(r[o],t,n[a]))return 59!==u.type&&Ka(e,"type",u),u;default:return{type:59,g:2}}}return 59!==r.type&&Ka(e,"type",r),r}function gu(e,t,n){var r=Ya(e,"*"),o=Pa(e,"atomicType");if(!o)return{type:59,g:2};if(ve(Xa(o,"prefix")+":"+o[2])===t.type)if(1===r.length){if(3===t.g)return n}else if(e=Pa(e,"occurrenceIndicator")[1],t.g===Ae(e))return n}function vu(e,t){wu(e,t)}function wu(e,t){var n=Tu.get(e[0]);if(n)return n(e,t);for(n=1;n<e.length;n++)e[n]&&wu(e[n],t)}function Au(e,t){var n=wu(Pa(e,"firstOperand")[1],t),r=wu(Pa(e,"secondOperand")[1],t),o=e[0];if(n&&r){if(!(t=ru(o,n.type,r.type)))throw Error("XPTY0004: "+o+" not available for types "+ge(n)+" and "+ge(r));n={type:t,g:n.g},2!==t&&59!==t&&Ka(e,"type",n),e=n}else e={type:2,g:3};return e}function xu(e,t){wu(Pa(e,"firstOperand")[1],t),wu(Pa(e,"secondOperand")[1],t);e:{switch(e[0]){case"orOp":case"andOp":Ka(e,"type",t={type:0,g:3}),e=t;break e}e=void 0}return e}function bu(e,t){wu(Pa(e,"firstOperand")[1],t),wu(Pa(e,"secondOperand")[1],t);e:{switch(e[0]){case"unionOp":case"intersectOp":case"exceptOp":Ka(e,"type",t={type:53,g:2}),e=t;break e}e=void 0}return e}function Bu(e,t){return wu(Pa(e,"firstOperand")[1],t),wu(Pa(e,"secondOperand")[1],t),Ka(e,"type",t={type:0,g:3}),t}function Eu(e,t){wu(Pa(e,"firstOperand")[1],t),wu(Pa(e,"secondOperand")[1],t),t=Xa(La(e,["firstOperand","*"]),"type");var n=Xa(La(e,["secondOperand","*"]),"type");return Ka(e,"type",t={type:0,g:tn(t)||tn(n)?0:3}),t}function Nu(e,t){wu(Pa(e,"firstOperand")[1],t),wu(Pa(e,"secondOperand")[1],t),t=Xa(La(e,["firstOperand","*"]),"type");var n=Xa(La(e,["secondOperand","*"]),"type");return Ka(e,"type",t={type:0,g:tn(t)||tn(n)?0:3}),t}A(uu,uo),uu.prototype.h=function(e,t){var n=this;return Vt(io(this.A,e,t),t).M((function(r){return 0===r.length?Ie.empty():Vt(io(n.K,e,t),t).M((function(e){if(0===e.length)return Ie.empty();if(1<r.length||1<e.length)throw Error('XPTY0004: the operands of the "'+n.l+'" operator should be empty or singleton.');var t=r[0];if(e=e[0],n.s&&n.type)return Ie.m(n.s(t,e));var o=t.type,a=e.type,u=n.l,i=o+"~"+a+"~"+u,c=au[i];if(c||(c=au[i]=nu(u,o,a)),!(o=c))throw Error("XPTY0004: "+n.l+" not available for types "+me[t.type]+" and "+me[e.type]);return Ie.m(o(t,e))}))}))};var Tu=new Map([["unaryMinusOp",function(e,t){return(t=wu(Pa(e,"operand")[1],t))?se(t.type,2)?(Ka(e,"type",t={type:t.type,g:t.g}),e=t):(Ka(e,"type",t={type:3,g:3}),e=t):(Ka(e,"type",t={type:2,g:2}),e=t),e}],["unaryPlusOp",function(e,t){return(t=wu(Pa(e,"operand")[1],t))?se(t.type,2)?(Ka(e,"type",t={type:t.type,g:t.g}),e=t):(Ka(e,"type",t={type:3,g:3}),e=t):(Ka(e,"type",t={type:2,g:2}),e=t),e}],["addOp",Au],["subtractOp",Au],["divOp",Au],["idivOp",Au],["modOp",Au],["multiplyOp",Au],["andOp",xu],["orOp",xu],["sequenceExpr",function(e,t){var n=Ya(e,"*"),r=n.map((function(e){return wu(e,t)}));return mu(e,n.length,r)}],["unionOp",bu],["intersectOp",bu],["exceptOp",bu],["stringConcatenateOp",function(e,t){return wu(Pa(e,"firstOperand")[1],t),wu(Pa(e,"secondOperand")[1],t),Ka(e,"type",t={type:1,g:3}),t}],["rangeSequenceExpr",function(e,t){return wu(Pa(e,"startExpr")[1],t),wu(Pa(e,"endExpr")[1],t),Ka(e,"type",t={type:5,g:1}),t}],["equalOp",Bu],["notEqualOp",Bu],["lessThanOrEqualOp",Bu],["lessThanOp",Bu],["greaterThanOrEqualOp",Bu],["greaterThanOp",Bu],["eqOp",Eu],["neOp",Eu],["ltOp",Eu],["leOp",Eu],["gtOp",Eu],["geOp",Eu],["isOp",Nu],["nodeBeforeOp",Nu],["nodeAfterOp",Nu],["pathExpr",function(e,t){var n=Pa(e,"rootExpr");return n&&n[1]&&wu(n[1],t),Ya(e,"stepExpr").map((function(e){return wu(e,t)})),hu(e,t)}],["contextItemExpr",function(){return{type:59,g:2}}],["ifThenElseExpr",function(e,t){wu(Pa(Pa(e,"ifClause"),"*"),t);var n=wu(Pa(Pa(e,"thenClause"),"*"),t);return t=wu(Pa(Pa(e,"elseClause"),"*"),t),n&&t&&n.type===t.type&&n.g===t.g?(59!==n.type&&Ka(e,"type",n),e=n):e={type:59,g:2},e}],["instanceOfExpr",function(e,t){return wu(Pa(e,"argExpr"),t),wu(Pa(e,"sequenceType"),t),Ka(e,"type",t={type:0,g:3}),t}],["integerConstantExpr",function(e){var t={type:5,g:3};return Ka(e,"type",t),t}],["doubleConstantExpr",function(e){var t={type:3,g:3};return Ka(e,"type",t),t}],["decimalConstantExpr",function(e){var t={type:4,g:3};return Ka(e,"type",t),t}],["stringConstantExpr",function(e){var t={type:1,g:3};return Ka(e,"type",t),t}],["functionCallExpr",function(e,t){return Ya(Pa(e,"arguments"),"*").map((function(e){return wu(e,t)})),su(e,t)}],["arrowExpr",function(e,t){return wu(Pa(e,"argExpr")[1],t),_a(e,t)}],["dynamicFunctionInvocationExpr",function(e,t){return wu(La(e,["functionItem","*"]),t),(e=Pa(e,"arguments"))&&wu(e,t),{type:59,g:2}}],["namedFunctionRef",function(e,t){return fu(e,t)}],["inlineFunctionExpr",function(e,t){return wu(Pa(e,"functionBody")[1],t),Ka(e,"type",t={type:60,g:3}),t}],["castExpr",function(e){var t=La(e,["singleType","atomicType"]);return 59!==(t={type:ve(Xa(t,"prefix")+":"+t[2]),g:3}).type&&Ka(e,"type",t),t}],["castableExpr",function(e){var t={type:0,g:3};return Ka(e,"type",t),t}],["simpleMapExpr",function(e,t){for(var n,r=Ya(e,"pathExpr"),o=0;o<r.length;o++)n=wu(r[o],t);return null!=n?(59!==(t={type:n.type,g:2}).type&&Ka(e,"type",t),e=t):e={type:59,g:2},e}],["mapConstructor",function(e,t){return Ya(e,"mapConstructorEntry").map((function(e){return{key:wu(La(e,["mapKeyExpr","*"]),t),value:wu(La(e,["mapValueExpr","*"]),t)}})),pu(e)}],["arrayConstructor",function(e,t){return Ya(Pa(e,"*"),"arrayElem").map((function(e){return wu(e,t)})),qa(e)}],["unaryLookup",function(e){return Pa(e,"NCName"),{type:59,g:2}}],["typeswitchExpr",function(e,t){return yu(e,wu(Pa(e,"argExpr")[1],t),Ya(e,"typeswitchExprCaseClause").map((function(e){return wu(La(e,["resultExpr"])[1],t)})),wu(La(e,["typeswitchExprDefaultClause","resultExpr"])[1],t))}],["quantifiedExpr",function(e,t){return Ya(e,"*").map((function(e){return wu(e,t)})),du(e)}],["x:stackTrace",function(e,t){return wu((e=Ya(e,"*"))[0],t)}],["queryBody",function(e,t){return wu(e[1],t)}],["flworExpr",function(e,t){return iu(e,t)}],["varRef",function(e,t){var n,r=Qa(Pa(e,"name"));e:{for(n=t.h;0<=n;n--){var o=t.o[n][r.localName];if(o){n=o;break e}}n=void 0}return n&&59!==n.type&&Ka(e,"type",n),null===r.namespaceURI&&void 0!==(t=t.aa(r.prefix))&&Ka(e,"URI",t),n}]]);function Iu(e){this.h=0,this.ia=e,this.o=[{}],this.v=[{}]}function Cu(e,t,n){if(e.o[e.h][t])throw Error("Another variable of in the scope "+e.h+" with the same name "+t+" already exists");e.o[e.h][t]=n}function Fu(e){e.h++,e.o.push({}),e.v.push({})}function Ou(e,t){var n={};uo.call(this,new Fo((n.external=1,n)),e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e}function Su(e,t){var n={};uo.call(this,new Fo((n.external=1,n)),e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e}function Gu(e){if(null===e)throw Qt("context is absent, it needs to be present to use axes.");if(!se(e.type,53))throw Error("XPTY0020: Axes can only be applied to nodes.");return e.value}function Du(e,t,n){var r=t;return{next:function(){if(!r)return ie;var t=r;return r=Ve(e,t,n),ce(et(t))}}}function Ru(e,t){t=t||{Ra:!1},uo.call(this,e.o,[e],{R:"reverse-sorted",X:!1,subtree:!1,C:!1}),this.l=e,this.s=!!t.Ra}Iu.prototype.aa=function(e){for(var t=this.h;0<=t;t--){var n=this.v[t][e];if(void 0!==n)return n}return this.ia?this.ia.aa(e):void 0},A(Ou,uo),Ou.prototype.h=function(e,t){return 0===this.l.length?Ie.m(new $e([])):io(this.l[0],e,t).M((function(e){return Ie.m(new $e(e.map((function(e){return Ce(Ie.m(e))}))))}))},A(Su,uo),Su.prototype.h=function(e,t){return Ie.m(new $e(this.l.map((function(n){return Ce(io(n,e,t))}))))},A(Ru,uo),Ru.prototype.h=function(e,t){var n=this;t=t.h,e=Gu(e.N);var r=this.l.B();return r=r&&(r.startsWith("name-")||"type-1"===r)?"type-1":null,Ie.create(Du(t,this.s?e:Ve(t,e,r),r)).filter((function(e){return n.l.l(e)}))};var ku=new Map([["type-1-or-type-2",["name","type-1","type-2"]],["type-1",["name"]],["type-2",["name"]]]);function Uu(e,t){if(null===e)return t;if(null===t||e===t)return e;var n=e.startsWith("name-")?"name":e,r=t.startsWith("name-")?"name":t,o=ku.get(n);return void 0!==o&&o.includes(r)?t:void 0!==(t=ku.get(r))&&t.includes(n)?e:"empty"}function Mu(e,t){var n={};uo.call(this,new Fo((n.attribute=1,n)),[e],{R:"unsorted",subtree:!0,X:!0,C:!1}),this.l=e,this.s=Uu(this.l.B(),t)}function Hu(e,t){uo.call(this,e.o,[e],{R:"sorted",subtree:!0,X:!0,C:!1}),this.s=e,this.l=Uu(t,e.B())}function Pu(e,t,n){var r=t.node.nodeType;if(1!==r&&9!==r)return{next:function(){return ie}};var o=Ke(e,t,n);return{next:function(){if(!o)return ie;var t=o;return o=_e(e,o,n),ce(t)}}}function ju(e,t,n){var r=[Pn(t)];return{next:function(t){if(0<r.length&&0!=(1&t)&&r.shift(),!r.length)return ie;for(t=r[0].next(0);t.done;){if(r.shift(),!r.length)return ie;t=r[0].next(0)}return r.unshift(Pu(e,t.value,n)),ce(et(t.value))}}}function Xu(e,t){t=t||{Ra:!1},uo.call(this,e.o,[e],{C:!1,X:!1,R:"sorted",subtree:!0}),this.l=e,this.s=!!t.Ra,this.A=(e=this.l.B())&&(e.startsWith("name-")||"type-1"===e)||"type-1-or-type-2"===e?"type-1":null}function Lu(e,t,n){var r=e.node.nodeType;if(1!==r&&9!==r)return e;for(r=qe(t,e,n);null!==r;){if(1!==r.node.nodeType)return r;r=qe(t,e=r,n)}return e}function Yu(e,t,n,r){if(void 0!==n&&n){var o=t,a=!1;return{next:function(){if(a)return ie;if(Xn(o,t))return Xn(o=Lu(t,e,r),t)?(a=!0,ie):ce(et(o));var n=o.node.nodeType,u=9===n||2===n?null:We(e,o,r);return null!==u?ce(et(o=Lu(u,e,r))):Xn(o=9===n?null:Ve(e,o,r),t)?(a=!0,ie):ce(et(o))}}}var u=[Pu(e,t,r)];return{next:function(){if(!u.length)return ie;for(var t=u[0].next(0);t.done;){if(u.shift(),!u.length)return ie;t=u[0].next(0)}return u.unshift(Pu(e,t.value,r)),ce(et(t.value))}}}function Qu(e,t,n){for(var r=[];t&&9!==t.node.nodeType;t=Ve(e,t,null)){var o=_e(e,t,n);o&&r.push(o)}var a=null;return{next:function(){for(;a||r.length;){if(!a){a=Yu(e,r[0],!1,n);var t=ce(et(r[0])),o=_e(e,r[0],n);return o?r[0]=o:r.shift(),t}if(!(t=a.next(0)).done)return t;a=null}return ie}}}function Ju(e){uo.call(this,e.o,[e],{R:"sorted",X:!0,subtree:!1,C:!1}),this.l=e,this.s=(e=this.l.B())&&(e.startsWith("name-")||"type-1"===e)?"type-1":null}function Ku(e,t,n){return{next:function(){return(t=t&&_e(e,t,n))?ce(et(t)):ie}}}function qu(e,t){uo.call(this,e.o,[e],{R:"sorted",X:!0,subtree:!1,C:!1}),this.l=e,this.s=Uu(this.l.B(),t)}function _u(e,t){uo.call(this,e.o,[e],{R:"reverse-sorted",X:!0,subtree:!0,C:!1}),this.l=e,this.s=Uu(t,this.l.B())}function Vu(e,t,n){for(var r=[];t&&9!==t.node.nodeType;t=Ve(e,t,null)){var o=We(e,t,n);null!==o&&r.push(o)}var a=null;return{next:function(){for(;a||r.length;){a||(a=Yu(e,r[0],!0,n));var t=a.next(0);if(t.done){a=null,t=We(e,r[0],n);var o=ce(et(r[0]));return null===t?r.shift():r[0]=t,o}return t}return ie}}}function Wu(e){uo.call(this,e.o,[e],{C:!1,X:!0,R:"reverse-sorted",subtree:!1}),this.l=e,this.s=(e=this.l.B())&&(e.startsWith("name-")||"type-1"===e)?"type-1":null}function Zu(e,t,n){return{next:function(){return(t=t&&We(e,t,n))?ce(et(t)):ie}}}function $u(e,t){uo.call(this,e.o,[e],{C:!1,X:!0,R:"reverse-sorted",subtree:!1}),this.l=e,this.s=Uu(this.l.B(),t)}function zu(e,t){uo.call(this,e.o,[e],{R:"sorted",subtree:!0,X:!0,C:!1}),this.l=e,this.s=Uu(this.l.B(),t)}function ei(e,t,n,r){var o=e.o.add(t.o).add(n.o);No.call(this,o,[e,t,n],{C:e.C&&t.C&&n.C,X:t.X===n.X&&t.X,R:t.da===n.da?t.da:"unsorted",subtree:t.subtree===n.subtree&&t.subtree},r),this.l=e}function ti(e,t,n){this.location=e,this.o=t,this.h=n}function ni(e){return e.h instanceof Error?e.location:ni(e.h)}function ri(e){var t=e.h instanceof la?["Inner error:",e.h.message]:e.h instanceof Error?[e.h.toString()]:ri(e.h);return t.push("  at <"+e.o+">:"+e.location.start.line+":"+e.location.start.ja+" - "+e.location.end.line+":"+e.location.end.ja),t}function oi(e,t,n){No.call(this,n.o,[n],{C:n.C,X:n.X,R:n.da,subtree:n.subtree}),this.l=t,this.K={end:{ja:e.end.ja,line:e.end.line,offset:e.end.offset},start:{ja:e.start.ja,line:e.start.line,offset:e.start.offset}}}function ai(e,t,n,r){uo.call(this,e,t,n,!0),this.l=r,this.I=this.l.I}function ui(e,t,n,r){var o=[],a=e.K(t,n,r,(function(n){if(e.l instanceof ai)return Eo(ui(e.l,t,n,r),(function(e){return o=e}));var a=null;return Ie.create({next:function(){for(;;){if(!a){var t=n.next(0);if(t.done)return ie;t=e.l.s(t.value,r),a=Eo(t,(function(e){return o=xo(o,e)})).value}if(!(t=a.next(0)).done)return t;a=null}}})})),u=!1;return{next:function(){if(u)return ie;var e=a.O();return u=!0,ce(new co(e,o))}}}function ii(e,t,n,r){return e.K(t,n,r,(function(n){if(e.l instanceof ai)return ii(e.l,t,n,r);var o=null;return Ie.create({next:function(){for(;;){if(!o){var t=n.next(0);if(t.done)return ie;o=io(e.l,t.value,r).value}if(!(t=o.next(0)).done)return t;o=null}}})}))}function ci(e,t,n,r){ai.call(this,t.o.add(r.o),[t,r],{C:!1},r),this.S=e.prefix,this.la=e.namespaceURI,this.Xb=e.localName,this.Gb=null,this.A=n,this.Ba=null,this.pa=t}function li(e,t,n){var r={};uo.call(this,new Fo((r.external=1,r)),[n],{C:!1,R:"unsorted"}),this.S=e.map((function(e){return e.name})),this.A=e.map((function(e){return e.type})),this.s=null,this.K=t,this.l=n}function si(e,t,n){if(ai.call(this,t.o.add(n.o),[t,n],{C:!1,X:n.X,R:n.da,subtree:n.subtree},n),e.prefix||e.namespaceURI)throw Error("Not implemented: let expressions with namespace usage.");this.A=e.prefix,this.S=e.namespaceURI,this.Ba=e.localName,this.la=t,this.pa=null}function pi(e,t){switch(uo.call(this,new Fo({}),[],{C:!0,R:"sorted"},!1,t),t.type){case 5:var n=ne(parseInt(e,10),t.type);break;case 1:n=ne(e,t.type);break;case 4:case 3:n=ne(parseFloat(e),t.type);break;default:throw new TypeError("Type "+t+" not expected in a literal")}this.l=function(){return Ie.m(n)}}function fi(e,t){var n={};uo.call(this,new Fo((n.external=1,n)),e.reduce((function(e,t){return e.concat(t.key,t.value)}),[]),{C:!1},!1,t),this.l=e}function hi(e,t,n){var r={};uo.call(this,new Fo((r.external=1,r)),[],{C:!0},!1,n),this.s=t,this.A=e,this.l=null}A(Mu,uo),Mu.prototype.h=function(e,t){var n=this;return t=t.h,1!==(e=Gu(e.N)).node.nodeType?Ie.empty():(e=Le(t,e,this.s).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).map((function(e){return et(e)})).filter((function(e){return n.l.l(e)})),Ie.create(e))},Mu.prototype.B=function(){return"type-1"},A(Hu,uo),Hu.prototype.h=function(e,t){var n=this,r=t.h,o=Gu(e.N);if(1!==(e=o.node.nodeType)&&9!==e)return Ie.empty();var a=null,u=!1;return Ie.create({next:function(){for(;!u;){if(!a){if(!(a=Ke(r,o,n.l))){u=!0;continue}return ce(et(a))}if(a=_e(r,a,n.l))return ce(et(a));u=!0}return ie}}).filter((function(e){return n.s.l(e)}))},A(Xu,uo),Xu.prototype.h=function(e,t){var n=this;return e=ju(t=t.h,e=Gu(e.N),this.A),this.s||e.next(0),Ie.create(e).filter((function(e){return n.l.l(e)}))},A(Ju,uo),Ju.prototype.h=function(e,t){var n=this;return t=t.h,e=Gu(e.N),Ie.create(Qu(t,e,this.s)).filter((function(e){return n.l.l(e)}))},A(qu,uo),qu.prototype.h=function(e,t){var n=this;return t=t.h,e=Gu(e.N),Ie.create(Ku(t,e,this.s)).filter((function(e){return n.l.l(e)}))},A(_u,uo),_u.prototype.h=function(e,t){return(e=Ve(t=t.h,e=Gu(e.N),this.s))?(e=et(e),this.l.l(e)?Ie.m(e):Ie.empty()):Ie.empty()},A(Wu,uo),Wu.prototype.h=function(e,t){var n=this;return t=t.h,e=Gu(e.N),Ie.create(Vu(t,e,this.s)).filter((function(e){return n.l.l(e)}))},A($u,uo),$u.prototype.h=function(e,t){var n=this;return t=t.h,e=Gu(e.N),Ie.create(Zu(t,e,this.s)).filter((function(e){return n.l.l(e)}))},A(zu,uo),zu.prototype.h=function(e){return Gu(e.N),this.l.l(e.N)?Ie.m(e.N):Ie.empty()},zu.prototype.B=function(){return this.s},A(ei,No),ei.prototype.A=function(e,t,n){var r=null,o=n[0](e);return Ie.create({next:function(t){return r||(r=(o.ha()?n[1](e):n[2](e)).value),r.next(t)}})},ei.prototype.v=function(e){if(No.prototype.v.call(this,e),this.l.I)throw Vr()},A(oi,No),oi.prototype.A=function(e,t,n){var r=this;t=p(n).next().value;try{var o=t(e)}catch(e){throw new ti(this.K,this.l,e)}return Ie.create({next:function(e){try{return o.value.next(e)}catch(e){throw new ti(r.K,r.l,e)}}})},oi.prototype.v=function(e){try{No.prototype.v.call(this,e)}catch(e){throw new ti(this.K,this.l,e)}},A(ai,uo),ai.prototype.h=function(e,t){var n=this;return this.K(e,Pn(e),t,(function(r){if(n.l instanceof ai)return ii(n.l,e,r,t);var o=null;return Ie.create({next:function(e){for(;;){if(!o){var a=r.next(0);if(a.done)return ie;o=io(n.l,a.value,t).value}if(!(a=o.next(e)).done)return a;o=null}}})}))},ai.prototype.s=function(e,t){return ui(this,e,Pn(e),t)},ai.prototype.v=function(e){uo.prototype.v.call(this,e),this.I=this.l.I;for(var t=(e=p(this.ta)).next();!t.done;t=e.next())if((t=t.value)!==this.l&&t.I)throw Vr()},A(ci,ai),ci.prototype.K=function(e,t,n,r){var o=this,a=null,u=null,i=0;return r({next:function(){for(var e={};;){if(!a){var r=t.next(0);if(r.done)return ie;u=r.value,i=0,a=io(o.pa,u,n).value}if(e.mb=a.next(0),!e.mb.done)return i++,(r={})[o.Gb]=function(e){return function(){return Ie.m(e.mb.value)}}(e),e=r,o.Ba&&(e[o.Ba]=function(){return Ie.m(new he(5,i))}),ce(jt(u,e));a=null,e={mb:e.mb}}}})},ci.prototype.v=function(e){if(this.S&&(this.la=e.aa(this.S),!this.la&&this.S))throw Error("XPST0081: Could not resolve namespace for prefix "+this.S+" in a for expression");if(this.pa.v(e),Ga(e),this.Gb=Ua(e,this.la,this.Xb),this.A){if(this.A.prefix&&(this.A.namespaceURI=e.aa(this.A.prefix),!this.A.namespaceURI&&this.A.prefix))throw Error("XPST0081: Could not resolve namespace for prefix "+this.S+" in the positionalVariableBinding in a for expression");this.Ba=Ua(e,this.A.namespaceURI,this.A.localName)}if(this.l.v(e),Ha(e),this.pa.I)throw Vr();this.l.I&&(this.I=!0)},A(li,uo),li.prototype.h=function(e,t){var n=this,r=new Oe({j:this.A,arity:this.A.length,Sa:!0,I:this.l.I,localName:"dynamic-function",namespaceURI:"",i:this.K,value:function(r,o,a){var u=O.apply(3,arguments),i=jt(Pt(e,-1,null,Ie.empty()),n.s.reduce((function(e,t,n){return e[t]=Ce(u[n]),e}),Object.create(null)));return io(n.l,i,t)}});return Ie.m(r)},li.prototype.v=function(e){if(Ga(e),this.s=this.S.map((function(t){return Ua(e,t.namespaceURI,t.localName)})),this.l.v(e),Ha(e),this.l.I)throw Error("Not implemented: inline functions can not yet be updating.")},A(si,ai),si.prototype.K=function(e,t,n,r){var o=this;return r({next:function(){var e=t.next(0);if(e.done)return ie;var r={};return ce(e=jt(e=e.value,(r[o.pa]=Ce(io(o.la,e,n)),r)))}})},si.prototype.v=function(e){if(this.A&&(this.S=e.aa(this.A),!this.S&&this.A))throw Error("XPST0081: Could not resolve namespace for prefix "+this.A+" using in a for expression");if(this.la.v(e),Ga(e),this.pa=Ua(e,this.S,this.Ba),this.l.v(e),Ha(e),this.I=this.l.I,this.la.I)throw Vr()},A(pi,uo),pi.prototype.h=function(){return this.l()},A(fi,uo),fi.prototype.h=function(e,t){var n=this;return tt(this.l.map((function(n){return Vt(io(n.key,e,t),t).Z({default:function(){throw Error("XPTY0004: A key of a map should be a single atomizable value.")},m:function(e){return e}})})),(function(r){return Ie.m(new ot(r.map((function(r,o){return{key:r,value:Ce(io(n.l[o].value,e,t))}}))))}))},A(hi,uo),hi.prototype.h=function(){var e=new Oe({j:this.l.j,I:this.l.I,arity:this.s,localName:this.l.localName,namespaceURI:this.l.namespaceURI,i:this.l.i,value:this.l.callFunction});return Ie.m(e)},hi.prototype.v=function(e){var t=this.A.namespaceURI,n=this.A.localName,r=this.A.prefix;if(null===t){var o=e.Ua({localName:n,prefix:r},this.s);if(!o)throw Error("XPST0017: The function "+(r?r+":":"")+n+" with arity "+this.s+" could not be resolved. "+ha(n));t=o.namespaceURI,n=o.localName}if(this.l=e.xa(t,n,this.s)||null,!this.l)throw e=this.A,Error("XPST0017: Function "+(e.namespaceURI?"Q{"+e.namespaceURI+"}":e.prefix?e.prefix+":":"")+e.localName+" with arity of "+this.s+" not registered. "+ha(n));uo.prototype.v.call(this,e)};var di={},mi=(di[5]=5,di[27]=5,di[28]=5,di[31]=5,di[32]=5,di[33]=5,di[34]=5,di[30]=5,di[36]=5,di[35]=5,di[38]=5,di[37]=5,di[29]=5,di[4]=4,di[6]=6,di[3]=3,di);function yi(e,t,n){uo.call(this,t.o,[t],{C:!1},!1,n),this.s=t,this.l=e}function gi(e,t){uo.call(this,e.reduce((function(e,t){return e.add(t.o)}),new Fo({})),e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e,this.s=e.reduce((function(e,t){return Uu(e,t.B())}),null)}function vi(e,t){var n,r=e.reduce((function(e,t){return 0<Oo(e,t.o)?e:t.o}),new Fo({}));for(uo.call(this,r,e,{C:e.every((function(e){return e.C}))},!1,t),t=0;t<e.length&&(void 0===n&&(n=e[t].B()),null!==n);++t)if(n!==e[t].B()){n=null;break}this.s=n,this.l=e}function wi(e,t){var n;return Ie.create({next:function(r){for(;;){if(!n){var o=e.value.next(r);if(o.done)return ie;n=_t(o.value,t)}if(!(o=n.value.next(r)).done)return o;n=null}}})}function Ai(e,t){if("eqOp"===e)return function(e,n){return e=(n=t(e,n)).U,n=n.V,e.value.namespaceURI===n.value.namespaceURI&&e.value.localName===n.value.localName};if("neOp"===e)return function(e,n){return e=(n=t(e,n)).U,n=n.V,e.value.namespaceURI!==n.value.namespaceURI||e.value.localName!==n.value.localName};throw Error('XPTY0004: Only the "eq" and "ne" comparison is defined for xs:QName')}function xi(e,t){switch(e){case"eqOp":return function(e,n){return(e=t(e,n)).U.value===e.V.value};case"neOp":return function(e,n){return(e=t(e,n)).U.value!==e.V.value};case"ltOp":return function(e,n){return(e=t(e,n)).U.value<e.V.value};case"leOp":return function(e,n){return(e=t(e,n)).U.value<=e.V.value};case"gtOp":return function(e,n){return(e=t(e,n)).U.value>e.V.value};case"geOp":return function(e,n){return(e=t(e,n)).U.value>=e.V.value}}}function bi(e,t){switch(e){case"ltOp":return function(e,n){return(e=t(e,n)).U.value.ga<e.V.value.ga};case"leOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,ut(e.value,n.value)||e.value.ga<n.value.ga};case"gtOp":return function(e,n){return(e=t(e,n)).U.value.ga>e.V.value.ga};case"geOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,ut(e.value,n.value)||e.value.ga>n.value.ga}}}function Bi(e,t){switch(e){case"eqOp":return function(e,n){return ut((e=t(e,n)).U.value,e.V.value)};case"ltOp":return function(e,n){return(e=t(e,n)).U.value.ea<e.V.value.ea};case"leOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,ut(e.value,n.value)||e.value.ea<n.value.ea};case"gtOp":return function(e,n){return(e=t(e,n)).U.value.ea>e.V.value.ea};case"geOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,ut(e.value,n.value)||e.value.ea>n.value.ea}}}function Ei(e,t){switch(e){case"eqOp":return function(e,n){return ut((e=t(e,n)).U.value,e.V.value)};case"neOp":return function(e,n){return!ut((e=t(e,n)).U.value,e.V.value)}}}function Ni(e,t){switch(e){case"eqOp":return function(e,n,r){return Bt((e=t(e,n)).U.value,e.V.value,Mt(r))};case"neOp":return function(e,n,r){return!Bt((e=t(e,n)).U.value,e.V.value,Mt(r))};case"ltOp":return function(e,n,r){return e=t(e,n),r=Mt(r),0>bt(e.U.value,e.V.value,r)};case"leOp":return function(e,n,r){var o;return e=(n=t(e,n)).U,n=n.V,(o=Bt(e.value,n.value,Mt(r)))||(r=Mt(r),o=0>bt(e.value,n.value,r)),o};case"gtOp":return function(e,n,r){return e=t(e,n),r=Mt(r),0<bt(e.U.value,e.V.value,r)};case"geOp":return function(e,n,r){var o;return e=(n=t(e,n)).U,n=n.V,(o=Bt(e.value,n.value,Mt(r)))||(r=Mt(r),o=0<bt(e.value,n.value,r)),o}}}function Ti(e,t){switch(e){case"eqOp":return function(e,n,r){return Bt((e=t(e,n)).U.value,e.V.value,Mt(r))};case"neOp":return function(e,n,r){return!Bt((e=t(e,n)).U.value,e.V.value,Mt(r))}}}function Ii(e,t,n){function r(e,t){return{U:u?u(e):e,V:i?i(t):t}}function o(e){return se(t,e)&&se(n,e)}function a(e){return 0<e.filter((function(e){return se(t,e)})).length&&0<e.filter((function(e){return se(n,e)})).length}var u=null,i=null;if(se(t,19)&&se(n,19)?t=n=1:se(t,19)?(u=function(e){return Hn(e,n)},t=n):se(n,19)&&(i=function(e){return Hn(e,t)},n=t),se(t,23)&&se(n,23))return Ai(e,r);if(o(0)||a([1,47,61])||a([2,47,61])||o(20)||o(22)||o(21)||a([1,20])){var c=xi(e,r);if(void 0!==c)return c}if(o(16)&&void 0!==(c=bi(e,r))||o(17)&&void 0!==(c=Bi(e,r))||o(18)&&void 0!==(c=Ei(e,r)))return c;if((o(9)||o(7)||o(8))&&void 0!==(c=Ni(e,r)))return c;if((o(11)||o(12)||o(13)||o(14)||o(15))&&void 0!==(c=Ti(e,r)))return c;throw Error("XPTY0004: "+e+" not available for "+me[t]+" and "+me[n])}A(yi,uo),yi.prototype.h=function(e,t){var n=this;return Vt(io(this.s,e,t),t).M((function(e){if(0===e.length)return Ie.empty();var t=e[0];if(n.type)return e="+"===n.l?+t.value:-t.value,0===t.type&&(e=Number.NaN),Ie.m(ne(e,n.type.type));if(1<e.length)throw Error("XPTY0004: The operand to a unary operator must be a sequence with a length less than one");return se(t.type,19)?(t=Hn(t,3).value,Ie.m(ne("+"===n.l?t:-t,3))):se(t.type,2)?"+"===n.l?Ie.m(t):Ie.m(ne(-1*t.value,mi[t.type])):Ie.m(ne(Number.NaN,3))}))},A(gi,uo),gi.prototype.h=function(e,t){var n=this,r=0,o=null,a=!1,u=null;if(null!==e){var i=e.N;null!==i&&se(i.type,53)&&(u=De(i.value))}return Ie.create({next:function(){if(!a){for(;r<n.l.length;){if(!o){var i=n.l[r];if(null!==u&&null!==i.B()&&!u.includes(i.B()))return r++,a=!0,ce(oe);o=io(i,e,t)}if(!1===o.ha())return a=!0,ce(oe);o=null,r++}return a=!0,ce(re)}return ie}})},gi.prototype.B=function(){return this.s},A(vi,uo),vi.prototype.h=function(e,t){var n=this,r=0,o=null,a=!1,u=null;if(null!==e){var i=e.N;null!==i&&se(i.type,53)&&(u=De(i.value))}return Ie.create({next:function(){if(!a){for(;r<n.l.length;){if(!o){var i=n.l[r];if(null!==u&&null!==i.B()&&!u.includes(i.B())){r++;continue}o=io(i,e,t)}if(!0===o.ha())return a=!0,ce(re);o=null,r++}return a=!0,ce(oe)}return ie}})},vi.prototype.B=function(){return this.s};var Ci=Object.create(null);function Fi(e,t,n){var r=t+"~"+n+"~"+e,o=Ci[r];return o||(o=Ci[r]=Ii(e,t,n)),o}function Oi(e,t,n){uo.call(this,t.o.add(n.o),[t,n],{C:!1}),this.l=t,this.A=n,this.s=e}A(Oi,uo),Oi.prototype.h=function(e,t){var n=this,r=io(this.l,e,t),o=io(this.A,e,t),a=wi(r,t),u=wi(o,t);return a.Z({empty:function(){return Ie.empty()},m:function(){return u.Z({empty:function(){return Ie.empty()},m:function(){var t=a.first(),r=u.first();return Fi(n.s,t.type,r.type)(t,r,e)?Ie.ba():Ie.W()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton.")}})},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton.")}})};var Si={},Gi=(Si.equalOp="eqOp",Si.notEqualOp="neOp",Si.lessThanOrEqualOp="leOp",Si.lessThanOp="ltOp",Si.greaterThanOrEqualOp="geOp",Si.greaterThanOp="gtOp",Si);function Di(e,t,n,r){return e=Gi[e],n.M((function(n){return t.filter((function(t){for(var o=0,a=n.length;o<a;++o){var u=n[o],i=void 0,c=void 0,l=t.type,s=u.type;if((se(l,19)||se(s,19))&&(se(l,2)?i=3:se(s,2)?c=3:se(l,17)?i=17:se(s,17)?c=17:se(l,16)?i=16:se(s,16)?c=16:se(l,19)?c=s:se(s,19)&&(i=l)),i=(c=p([c,i])).next().value,c=c.next().value,i?t=Hn(t,i):c&&(u=Hn(u,c)),Fi(e,t.type,u.type)(t,u,r))return!0}return!1})).Z({default:function(){return Ie.ba()},empty:function(){return Ie.W()}})}))}function Ri(e,t,n){uo.call(this,t.o.add(n.o),[t,n],{C:!1}),this.l=t,this.A=n,this.s=e}function ki(e,t,n,r){if(!se(n,53)||!se(r,53))throw Error("XPTY0004: Sequences to compare are not nodes");switch(e){case"isOp":return Ui(n,r);case"nodeBeforeOp":return t?function(e,n){return 0>qn(t,e.first(),n.first())}:void 0;case"nodeAfterOp":return t?function(e,n){return 0<qn(t,e.first(),n.first())}:void 0;default:throw Error("Unexpected operator")}}function Ui(e,t){return e!==t||47!==e&&53!==e&&54!==e&&55!==e&&56!==e&&57!==e&&58!==e?function(){return!1}:function(e,t){return Xn(e.first().value,t.first().value)}}function Mi(e,t,n){uo.call(this,t.o.add(n.o),[t,n],{C:!1}),this.l=t,this.A=n,this.s=e}function Hi(e,t,n,r){return n.M((function(n){if(n.some((function(e){return!se(e.type,53)})))throw Error("XPTY0004: Sequences given to "+e+" should only contain nodes.");return"sorted"===r?Ie.create(n):"reverse-sorted"===r?Ie.create(n.reverse()):Ie.create(_n(t,n))}))}function Pi(e,t,n,r){uo.call(this,0<Oo(t.o,n.o)?t.o:n.o,[t,n],{C:t.C&&n.C},!1,r),this.l=e,this.s=t,this.A=n}function ji(e,t){No.call(this,e.reduce((function(e,t){return e.add(t.o)}),new Fo({})),e,{R:"unsorted",C:e.every((function(e){return e.C}))},t)}function Xi(e,t,n){uo.call(this,new Fo({}).add(e.o),[e,t],{C:e.C&&t.C},!1,n),this.l=e,this.s=t}function Li(e,t,n){if(uo.call(this,e.o,[e],{C:!1}),this.l=ve(t.prefix?t.prefix+":"+t.localName:t.localName),46===this.l||45===this.l||44===this.l)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(t.namespaceURI)throw Error("Not implemented: castable as expressions with a namespace URI.");this.A=e,this.s=n}function Yi(e,t,n){if(uo.call(this,e.o,[e],{C:!1}),this.l=ve(t.prefix?t.prefix+":"+t.localName:t.localName),46===this.l||45===this.l||44===this.l)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(t.namespaceURI)throw Error("Not implemented: casting expressions with a namespace URI.");this.A=e,this.s=n}function Qi(e,t){var n=e.value,r=null,o=!1;return Ie.create({next:function(){for(;!o;){if(!r){var e=n.next(0);if(e.done)return o=!0,ce(re);r=t(e.value)}if(e=r.ha(),r=null,!1===e)return o=!0,ce(oe)}return ie}})}function Ji(e,t,n,r){uo.call(this,e.o,[e],{C:!1},!1,r),this.A=e,this.s=t,this.l=n}function Ki(e,t){return!(null===e||null===t||!se(e.type,53)||!se(t.type,53))&&Xn(e.value,t.value)}function qi(e){var t=e.next(0);if(t.done)return Ie.empty();var n=null,r=null;return Ie.create({next:function(o){if(t.done)return ie;n||(n=t.value.value);do{var a=n.next(o);if(a.done){if((t=e.next(0)).done)return a;n=t.value.value}}while(a.done||Ki(a.value,r));return r=a.value,a}})}function _i(e,t){var n=[];!function(){for(var e=t.next(0),r={};!e.done;)r.ob=e.value.value,(e={current:r.ob.next(0),next:function(e){return function(t){return e.ob.next(t)}}(r)}).current.done||n.push(e),e=t.next(0),r={ob:r.ob}}();var r=null,o=!1,a={};return Ie.create((a[Symbol.iterator]=function(){return this},a.next=function(){o||(o=!0,n.every((function(e){return se(e.current.value.type,53)}))&&n.sort((function(t,n){return qn(e,t.current.value,n.current.value)})));do{if(!n.length)return ie;var t=n.shift(),a=t.current;if(t.current=t.next(0),!se(a.value.type,53))return a;if(!t.current.done){for(var u=0,i=n.length-1,c=0;u<=i;){c=Math.floor((u+i)/2);var l=qn(e,t.current.value,n[c].current.value);if(0===l){u=c;break}0<l?u=c+1:i=c-1}n.splice(u,0,t)}}while(Ki(a.value,r));return r=a.value,a},a))}function Vi(e,t){var n=e.reduce((function(e,t){return 0<Oo(e,t.o)?e:t.o}),new Fo({}));uo.call(this,n,e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e}function Wi(e){return e.every((function(e){return null===e||se(e.type,5)||se(e.type,4)}))||null!==e.map((function(e){return e?Wt(e.type):null})).reduce((function(e,t){return null===t||t===e?e:null}))?e:e.every((function(e){return null===e||se(e.type,1)||se(e.type,20)}))?e.map((function(e){return e?Hn(e,1):null})):e.every((function(e){return null===e||se(e.type,4)||se(e.type,6)}))?e.map((function(e){return e?Hn(e,6):e})):e.every((function(e){return null===e||se(e.type,4)||se(e.type,6)||se(e.type,3)}))?e.map((function(e){return e?Hn(e,3):e})):null}function Zi(e){return(e=e.find((function(e){return!!e})))?Wt(e.type):null}function $i(e,t){var n=new Fo({});ai.call(this,n,[t].concat(h(e.map((function(e){return e.ca})))),{C:!1,X:!1,R:"unsorted",subtree:!1},t),this.A=e}function zi(e){uo.call(this,e?e.o:new Fo({}),e?[e]:[],{R:"sorted",subtree:!1,X:!1,C:!1}),this.l=e}function ec(e){uo.call(this,new Fo({}),[],{R:"sorted"},!1,e)}function tc(e,t){var n=!1,r=!1;if(t.forEach((function(e){se(e.type,53)?n=!0:r=!0})),r&&n)throw Error("XPTY0018: The path operator should either return nodes or non-nodes. Mixed sequences are not allowed.");return n?_n(e,t):t}function nc(e,t){var n=e.every((function(e){return e.X})),r=e.every((function(e){return e.subtree}));uo.call(this,e.reduce((function(e,t){return e.add(t.o)}),new Fo({})),e,{C:!1,X:n,R:t?"sorted":"unsorted",subtree:r}),this.l=e,this.s=t}function rc(e,t){uo.call(this,e.o.add(t.o),[e,t],{C:e.C&&t.C,X:e.X,R:e.da,subtree:e.subtree}),this.s=e,this.l=t}function oc(e,t,n){if(n=[n],se(e.type,62))if("*"===t)n.push.apply(n,h(e.P.map((function(e){return e()}))));else{if(!se(t.type,5))throw wa("The key specifier is not an integer.");var r=t.value;if(e.P.length<r||0>=r)throw Error("FOAY0001: Array index out of bounds");n.push(e.P[r-1]())}else{if(!se(e.type,61))throw wa("The provided context item is not a map or an array.");"*"===t?n.push.apply(n,h(e.h.map((function(e){return e.value()})))):(e=e.h.find((function(e){return nt(e.key,t)})))&&n.push(e.value())}return Lt(n)}function ac(e,t,n,r,o){return"*"===t?oc(e,t,n):Lt([n,t=Ce(t=io(t,r,o))().M((function(t){return t.reduce((function(t,n){return oc(e,n,t)}),new fe)}))])}function uc(e,t){uo.call(this,e.o,[e].concat("*"===t?[]:[t]),{C:e.C,R:e.da,subtree:e.subtree}),this.l=e,this.s=t}function ic(e,t){var n={};uo.call(this,new Fo((n.external=1,n)),"*"===e?[]:[e],{C:!1},!1,t),this.l=e}function cc(e,t,n,r){var o=t.map((function(e){return e.jb}));t=t.map((function(e){return e.name}));var a=o.reduce((function(e,t){return e.add(t.o)}),n.o);uo.call(this,a,o.concat(n),{C:!1},!1,r),this.s=e,this.A=t,this.K=o,this.S=n,this.l=null}function lc(e){uo.call(this,e,[],{C:!1})}function sc(e){var t={};lc.call(this,new Fo((t.nodeType=1,t))),this.s=e}function pc(e,t){t=void 0===t?{kind:null}:t;var n=e.prefix,r=e.namespaceURI,o={};"*"!==(e=e.localName)&&(o.nodeName=1),o.nodeType=1,lc.call(this,new Fo(o)),this.s=e,this.K=r,this.A=n,this.S=t.kind}function fc(e){var t={};lc.call(this,new Fo((t.nodeName=1,t))),this.s=e}function hc(e){lc.call(this,new Fo({})),this.s=e}function dc(e,t,n){uo.call(this,new Fo({}),[],{C:!1,R:"unsorted"}),this.A=n,this.s=t,this.K=e,this.l=null}function mc(e,t){var n=new Fo({});ai.call(this,n,[e,t],{C:!1,X:!1,R:"unsorted",subtree:!1},t),this.A=e}function yc(e){this.type=e}function gc(e){this.type="delete",this.target=e}function vc(e,t,n){this.type=n,this.target=e,this.content=t}function wc(e,t){vc.call(this,e,t,"insertAfter")}function Ac(e,t){this.type="insertAttributes",this.target=e,this.content=t}function xc(e,t){vc.call(this,e,t,"insertBefore")}function bc(e,t){vc.call(this,e,t,"insertIntoAsFirst")}function Bc(e,t){vc.call(this,e,t,"insertIntoAsLast")}function Ec(e,t){vc.call(this,e,t,"insertInto")}function Nc(e,t){this.type="rename",this.target=e,this.o=t.Ca?t:new Fe(t.prefix,t.namespaceURI,t.localName)}function Tc(e,t){this.type="replaceElementContent",this.target=e,this.text=t}function Ic(e,t){this.type="replaceNode",this.target=e,this.o=t}function Cc(e,t){this.type="replaceValue",this.target=e,this.o=t}function Fc(e,t){return new Ic(e,t)}function Oc(e){bo.call(this,new Fo({}),[e],{C:!1,R:"unsorted"}),this.l=e}function Sc(e,t,n,r,o,a){var u=t.h;return e.reduce((function e(t,n){return se(n.type,62)?(n.P.forEach((function(n){return n().O().forEach((function(n){return e(t,n)}))})),t):(t.push(n),t)}),[]).forEach((function(e,i,c){if(se(e.type,47)){if(o)throw a(e.value,u);n.push(e.value.node)}else if(se(e.type,46)||se(e.type,53)&&3===e.value.node.nodeType){var l=se(e.type,46)?Hn(_t(e,t).first(),1).value:Je(u,e.value);0!==i&&se(c[i-1].type,46)&&se(e.type,46)?(r.push({data:" "+l,Ta:!0,nodeType:3}),o=!0):l&&(r.push({data:""+l,Ta:!0,nodeType:3}),o=!0)}else if(se(e.type,55)){var s=[];Qe(u,e.value).forEach((function(e){return s.push(et(e))})),o=Sc(s,t,n,r,o,a)}else{if(!se(e.type,53)){if(se(e.type,60))throw Kt(e.type);throw Error("Atomizing "+e.type+" is not implemented.")}r.push(e.value.node),o=!0}})),o}function Gc(e,t,n){var r=[],o=[],a=!1;return e.forEach((function(e){a=Sc(e,t,r,o,a,n)})),{attributes:r,Xa:o}}function Dc(e,t,n,r,o){var a=[];switch(e){case 4:r.length&&a.push(new Ac(t,r)),o.length&&a.push(new bc(t,o));break;case 5:r.length&&a.push(new Ac(t,r)),o.length&&a.push(new Bc(t,o));break;case 3:r.length&&a.push(new Ac(t,r)),o.length&&a.push(new Ec(t,o));break;case 2:r.length&&a.push(new Ac(n,r)),o.length&&a.push(new xc(t,o));break;case 1:r.length&&a.push(new Ac(n,r)),o.length&&a.push(new wc(t,o))}return a}function Rc(e,t,n){bo.call(this,new Fo({}),[e,n],{C:!1,R:"unsorted"}),this.K=e,this.l=t,this.A=n}function kc(){return Jt("Casting not supported from given type to a single xs:string or xs:untypedAtomic or any of its derived types.")}A(Ri,uo),Ri.prototype.h=function(e,t){var n=this,r=io(this.l,e,t),o=io(this.A,e,t);return r.Z({empty:function(){return Ie.W()},default:function(){return o.Z({empty:function(){return Ie.W()},default:function(){var a=wi(r,t),u=wi(o,t);return Di(n.s,a,u,e)}})}})},A(Mi,uo),Mi.prototype.h=function(e,t){var n=this,r=io(this.l,e,t),o=io(this.A,e,t);return r.Z({empty:function(){return Ie.empty()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton")},m:function(){return o.Z({empty:function(){return Ie.empty()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton")},m:function(){var a=r.first(),u=o.first();return ki(n.s,t.h,a.type,u.type)(r,o,e)?Ie.ba():Ie.W()}})}})},A(Pi,uo),Pi.prototype.h=function(e,t){var n=this,r=Hi(this.l,t.h,io(this.s,e,t),this.s.da);e=Hi(this.l,t.h,io(this.A,e,t),this.A.da);var o=r.value,a=e.value,u=null,i=null,c=!1,l=!1;return Ie.create({next:function(){if(c)return ie;for(;!l;){if(!u){var e=o.next(0);if(e.done)return c=!0,ie;u=e.value}if(!i){if((e=a.next(0)).done){l=!0;break}i=e.value}if(Xn(u.value,i.value)){if(e=ce(u),i=u=null,"intersectOp"===n.l)return e}else if(0>qn(t.h,u,i)){if(e=ce(u),u=null,"exceptOp"===n.l)return e}else i=null}return"exceptOp"===n.l?null!==u?(e=ce(u),u=null,e):o.next(0):(c=!0,ie)}})},A(ji,No),ji.prototype.A=function(e,t,n){return n.length?Lt(n.map((function(t){return t(e)}))):Ie.empty()},A(Xi,uo),Xi.prototype.h=function(e,t){var n=this,r=kt(e,io(this.l,e,t)),o=null,a=null,u=!1;return Ie.create({next:function(e){for(;!u;){if(!o&&(o=r.next(e)).done)return u=!0,ie;a||(a=io(n.s,o.value,t));var i=a.value.next(e);if(!i.done)return i;o=a=null}}})},A(Li,uo),Li.prototype.h=function(e,t){var n=this,r=Vt(io(this.A,e,t),t);return r.Z({empty:function(){return n.s?Ie.ba():Ie.W()},m:function(){return r.map((function(e){return Mn(e,n.l).u?re:oe}))},multiple:function(){return Ie.W()}})},A(Yi,uo),Yi.prototype.h=function(e,t){var n=this,r=Vt(io(this.A,e,t),t);return r.Z({empty:function(){if(!n.s)throw Error("XPTY0004: Sequence to cast is empty while target type is singleton.");return Ie.empty()},m:function(){return r.map((function(e){return Hn(e,n.l)}))},multiple:function(){throw Error("XPTY0004: Sequence to cast is not singleton or empty.")}})},A(Ji,uo),Ji.prototype.h=function(e,t){var n=this,r=io(this.A,e,t);return r.Z({empty:function(){return"?"===n.l||"*"===n.l?Ie.ba():Ie.W()},multiple:function(){return"+"===n.l||"*"===n.l?Qi(r,(function(r){var o=Ie.m(r);return r=Pt(e,0,r,o),io(n.s,r,t)})):Ie.W()},m:function(){return Qi(r,(function(r){var o=Ie.m(r);return r=Pt(e,0,r,o),io(n.s,r,t)}))}})},A(Vi,uo),Vi.prototype.h=function(e,t){var n=this;if(this.l.every((function(e){return"sorted"===e.da}))){var r=0;return _i(t.h,{next:function(){return r>=n.l.length?ie:ce(io(n.l[r++],e,t))}}).map((function(e){if(!se(e.type,53))throw Error("XPTY0004: The sequences to union are not of type node()*");return e}))}return Lt(this.l.map((function(n){return io(n,e,t)}))).M((function(e){if(e.some((function(e){return!se(e.type,53)})))throw Error("XPTY0004: The sequences to union are not of type node()*");return e=_n(t.h,e),Ie.create(e)}))},A($i,ai),$i.prototype.K=function(e,t,n,r){if(this.A[1])throw Error("More than one order spec is not supported for the order by clause.");var o,a,u=[],i=!1,c=null,l=this.A[0];return Ie.create({next:function(){if(!i){for(var s=t.next(0);!s.done;)u.push(s.value),s=t.next(0);if((s=u.map((function(e){return l.ca.h(e,n)})).map((function(e){return Vt(e,n)}))).find((function(e){return!e.G()&&!e.wa()})))throw wa("Order by only accepts empty or singleton sequences");if(Zi(o=(o=s.map((function(e){return e.first()}))).map((function(e){return null===e?e:se(19,e.type)?Hn(e,1):e})))&&!(o=Wi(o)))throw wa("Could not cast values");s=o.length,a=o.map((function(e,t){return t}));for(var f=0;f<s;f++)if(f+1!==s)for(var h=f;0<=h;h--){var d=h,m=h+1;if(m!==s){var y=o[a[d]],g=o[a[m]];if(null!==g||null!==y){if(l.lc){if(null===y)continue;if(null===g&&null!==y){y=p([a[m],a[d]]),a[d]=y.next().value,a[m]=y.next().value;continue}if(isNaN(g.value)&&null!==y&&!isNaN(y.value)){y=p([a[m],a[d]]),a[d]=y.next().value,a[m]=y.next().value;continue}}else{if(null===g)continue;if(null===y&&null!==g){y=p([a[m],a[d]]),a[d]=y.next().value,a[m]=y.next().value;continue}if(isNaN(y.value)&&null!==g&&!isNaN(g.value)){y=p([a[m],a[d]]),a[d]=y.next().value,a[m]=y.next().value;continue}}Fi("gtOp",y.type,g.type)(y,g,e)&&(y=p([a[m],a[d]]),a[d]=y.next().value,a[m]=y.next().value)}}}var v=l.Kb?0:o.length-1;c=r({next:function(){return l.Kb?v>=o.length?ie:ce(u[a[v++]]):0>v?ie:ce(u[a[v--]])}}).value,i=!0}return c.next(0)}})},A(zi,uo),zi.prototype.h=function(e,t){if(null===e.N)throw Qt("context is absent, it needs to be present to use paths.");for(var n=t.h,r=e.N.value;9!==r.node.nodeType;)if(null===(r=Ve(n,r)))throw Error("XPDY0050: the root node of the context node is not a document node.");return n=Ie.m(et(r)),this.l?io(this.l,Pt(e,0,n.first(),n),t):n},A(ec,uo),ec.prototype.h=function(e){if(null===e.N)throw Qt('context is absent, it needs to be present to use the "." operator');return Ie.m(e.N)},A(nc,uo),nc.prototype.h=function(e,t){var n=this,r=!0;return this.l.reduce((function(o,a,u){var i=null===o?Pn(e):kt(e,o);if(o={next:function(e){if((e=i.next(e)).done)return ie;if(null!==e.value.N&&!se(e.value.N.type,53)&&0<u)throw Error("XPTY0019: The result of E1 in a path expression E1/E2 should not evaluate to a sequence of nodes.");return ce(io(a,e.value,t))}},n.s)switch(a.da){case"reverse-sorted":var c=o;o={next:function(e){return(e=c.next(e)).done?e:ce(e.value.M((function(e){return Ie.create(e.reverse())})))}};case"sorted":if(a.subtree&&r){var l=qi(o);break}l=_i(t.h,o);break;case"unsorted":return qi(o).M((function(e){return Ie.create(tc(t.h,e))}))}else l=qi(o);return r=r&&a.X,l}),null)},nc.prototype.B=function(){return this.l[0].B()},A(rc,uo),rc.prototype.h=function(e,t){var n=this,r=io(this.s,e,t);if(this.l.C){var o=io(this.l,e,t);if(o.G())return o;var a=o.first();if(se(a.type,2)){var u=a.value;if(!Number.isInteger(u))return Ie.empty();var i=r.value,c=!1;return Ie.create({next:function(){if(!c){for(var e=i.next(0);!e.done;e=i.next(0))if(1==u--)return c=!0,e;c=!0}return ie}})}return o.ha()?r:Ie.empty()}var l=r.value,s=null,p=0,f=null;return Ie.create({next:function(o){for(var a=!1;!(s&&s.done||(s||(s=l.next(a?0:o),a=!0),s.done));){f||(f=io(n.l,Pt(e,p,s.value,r),t));var u=f.first();u=null!==u&&(se(u.type,2)?u.value===p+1:f.ha()),f=null;var i=s.value;if(s=null,p++,u)return ce(i)}return s}})},rc.prototype.B=function(){return this.s.B()},A(uc,uo),uc.prototype.h=function(e,t){var n=this;return io(this.l,e,t).M((function(r){return r.reduce((function(r,o){return ac(o,n.s,r,e,t)}),new fe)}))},uc.prototype.B=function(){return this.l.B()},A(ic,uo),ic.prototype.h=function(e,t){return ac(e.N,this.l,new fe,e,t)},A(cc,uo),cc.prototype.h=function(e,t){var n=this,r=e,o=this.l.map((function(o,a){var u=io(n.K[a],r,t).O();return r=jt(e,((a={})[o]=function(){return Ie.create(u)},a)),u}));if(o.some((function(e){return 0===e.length})))return"every"===this.s?Ie.ba():Ie.W();var a=Array(o.length).fill(0);a[0]=-1;for(var u=!0;u;){u=!1;for(var i=0,c=a.length;i<c;++i){var l=o[i];if(!(++a[i]>l.length-1)){for(u=Object.create(null),i={},c=0;c<a.length;i={xb:i.xb},c++)i.xb=o[c][a[c]],u[this.l[c]]=function(e){return function(){return Ie.m(e.xb)}}(i);if(u=jt(e,u),(u=io(this.S,u,t)).ha()&&"some"===this.s)return Ie.ba();if(!u.ha()&&"every"===this.s)return Ie.W();u=!0;break}a[i]=0}}return"every"===this.s?Ie.ba():Ie.W()},cc.prototype.v=function(e){this.l=[];for(var t=0,n=this.A.length;t<n;++t){this.K[t].v(e),Ga(e);var r=this.A[t],o=r.prefix?e.aa(r.prefix):null;r=Ua(e,o,r.localName),this.l[t]=r}for(this.S.v(e),t=0,n=this.A.length;t<n;++t)Ha(e)},A(lc,uo),lc.prototype.h=function(e){return this.l(e.N)?Ie.ba():Ie.W()},A(sc,lc),sc.prototype.l=function(e){return!!se(e.type,53)&&(e=e.value.node.nodeType,3===this.s&&4===e||this.s===e)},sc.prototype.B=function(){return"type-"+this.s},A(pc,lc),pc.prototype.l=function(e){var t=se(e.type,54),n=se(e.type,47);return!(!t&&!n||(e=e.value,null!==this.S&&(1===this.S&&!t||2===this.S&&!n)||(null!==this.A||""===this.K||"*"!==this.s)&&("*"===this.A?"*"!==this.s&&this.s!==e.node.localName:"*"!==this.s&&this.s!==e.node.localName||(e.node.namespaceURI||null)!==((""===this.A?t?this.K:null:this.K)||null))))},pc.prototype.B=function(){return"*"===this.s?null===this.S?"type-1-or-type-2":"type-"+this.S:"name-"+this.s},pc.prototype.v=function(e){if(null===this.K&&"*"!==this.A&&(this.K=e.aa(this.A||"")||null,!this.K&&this.A))throw Error("XPST0081: The prefix "+this.A+" could not be resolved.")},A(fc,lc),fc.prototype.l=function(e){return se(e.type,57)&&e.value.node.target===this.s},fc.prototype.B=function(){return"type-7"},A(hc,lc),hc.prototype.l=function(e){return se(e.type,ve(this.s.prefix?this.s.prefix+":"+this.s.localName:this.s.localName))},A(dc,uo),dc.prototype.h=function(e,t){if(!e.Aa[this.l]){if(this.S)return this.S(e,t);throw Error("XQDY0054: The variable "+this.A+" is declared but not in scope.")}return e.Aa[this.l]()},dc.prototype.v=function(e){if(null===this.s&&this.K&&(this.s=e.aa(this.K)),this.l=e.ib(this.s||"",this.A),!this.l)throw Error("XPST0008, The variable "+this.A+" is not in scope.");(e=e.Ia[this.l])&&(this.S=e)},A(mc,ai),mc.prototype.K=function(e,t,n,r){var o=this,a=null,u=null;return r({next:function(){for(;;){if(!u){var e=t.next(0);if(e.done)return ie;a=e.value,u=io(o.A,a,n)}e=u.ha();var r=a;if(u=a=null,e)return ce(r)}}})},A(gc,yc),gc.prototype.h=function(e){var t={};return t.type=this.type,t.target=ra(this.target,e,!1),t},A(vc,yc),vc.prototype.h=function(e){var t={};return t.type=this.type,t.target=ra(this.target,e,!1),t.content=this.content.map((function(t){return ra(t,e,!0)})),t},A(wc,vc),A(Ac,yc),Ac.prototype.h=function(e){var t={};return t.type=this.type,t.target=ra(this.target,e,!1),t.content=this.content.map((function(t){return ra(t,e,!0)})),t},A(xc,vc),A(bc,vc),A(Bc,vc),A(Ec,vc),A(Nc,yc),Nc.prototype.h=function(e){var t={},n={};return n.type=this.type,n.target=ra(this.target,e,!1),n.newName=(t.prefix=this.o.prefix,t.namespaceURI=this.o.namespaceURI,t.localName=this.o.localName,t),n},A(Tc,yc),Tc.prototype.h=function(e){var t={};return t.type=this.type,t.target=ra(this.target,e,!1),t.text=this.text?ra(this.text,e,!0):null,t},A(Ic,yc),Ic.prototype.h=function(e){var t={};return t.type=this.type,t.target=ra(this.target,e,!1),t.replacement=this.o.map((function(t){return ra(t,e,!0)})),t},A(Cc,yc),Cc.prototype.h=function(e){var t={};return t.type=this.type,t.target=ra(this.target,e,!1),t["string-value"]=this.o,t},A(Oc,bo),Oc.prototype.s=function(e,t){var n,r,o=Bo(this.l)(e,t),a=t.h;return{next:function(){if(!n){var e=o.next(0);if(e.value.J.some((function(e){return!se(e.type,53)})))throw Error("XUTY0007: The target of a delete expression must be a sequence of zero or more nodes.");n=e.value.J,r=e.value.fa}return ce({fa:xo((n=n.filter((function(e){return Ve(a,e.value)}))).map((function(e){return new gc(e.value)})),r),J:[]})}}},A(Rc,bo),Rc.prototype.s=function(e,t){var n,r,o,a,u,i,c=this,l=Bo(this.K)(e,t),s=Bo(this.A)(e,t),p=t.h;return{next:function(){if(!n){var e=l.next(0),f=Gc([e.value.J],t,Wr);n=f.attributes.map((function(e){return{node:e,F:null}})),r=f.Xa.map((function(e){return{node:e,F:null}})),o=e.value.fa}if(!a){if(0===(e=s.next(0)).value.J.length)throw ao();if(3<=c.l){if(1!==e.value.J.length)throw Zr();if(!se(e.value.J[0].type,54)&&!se(e.value.J[0].type,55))throw Zr()}else{if(1!==e.value.J.length)throw $r();if(!(se(e.value.J[0].type,54)||se(e.value.J[0].type,56)||se(e.value.J[0].type,58)||se(e.value.J[0].type,57)))throw $r();if(null===(i=Ve(p,e.value.J[0].value,null)))throw Error("XUDY0029: The target "+e.value.J[0].value.outerHTML+" for inserting a node before or after must have a parent.")}a=e.value.J[0],u=e.value.fa}if(n.length){if(3<=c.l){if(!se(a.type,54))throw Error("XUTY0022: An insert expression specifies the insertion of an attribute node into a document node.")}else if(1!==i.node.nodeType)throw Error("XUDY0030: An insert expression specifies the insertion of an attribute node before or after a child of a document node.");n.reduce((function(e,t){var n=t.node.prefix||"",r=t.node.prefix||"",o=t.node.namespaceURI,u=r?a.value.node.lookupNamespaceURI(r):null;if(u&&u!==o)throw ro(o);if((r=e[r])&&o!==r)throw oo(o);return e[n]=t.node.namespaceURI,e}),{})}return ce({J:[],fa:xo(Dc(c.l,a.value,i||null,n,r),o,u)})}}};var Uc=/([A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])/,Mc=new RegExp(Uc.source+new RegExp("("+Uc.source+"|[-.0-9·̀-ͯ‿⁀])").source+"*","g");function Hc(e){return!!(e=e.match(Mc))&&1===e.length}function Pc(e,t){return Vt(t,e).Z({m:function(e){if(se((e=e.first()).type,1)||se(e.type,19)){if(!Hc(e.value))throw Error('XQDY0041: The value "'+e.value+'" of a name expressions cannot be converted to a NCName.');return Ie.m(e)}throw kc()},default:function(){throw kc()}}).value}function jc(e,t,n){return Vt(n,t).Z({m:function(t){if(se((t=t.first()).type,23))return Ie.m(t);if(se(t.type,1)||se(t.type,19)){if(1===(t=t.value.split(":")).length)t=t[0];else{var n=t[0],r=e.aa(n);t=t[1]}if(!Hc(t)||n&&!Hc(n))throw Ta(n?n+":"+t:t);if(n&&!r)throw Ta(n+":"+t);return Ie.m({type:23,value:new Fe(n,r,t)})}throw kc()},default:function(){throw kc()}}).value}function Xc(e,t){bo.call(this,new Fo({}),[e,t],{C:!1,R:"unsorted"}),this.A=e,this.K=t,this.l=void 0}function Lc(e,t,n){var r,o,a;return{next:function(){if(!r){var u=n.next(0),i=Gc([u.value.J],e,oo);r={attributes:i.attributes.map((function(e){return{node:e,F:null}})),Xa:i.Xa.map((function(e){return{node:e,F:null}}))},o=u.value.fa}if(0===(i=t.next(0)).value.J.length)throw ao();if(1!==i.value.J.length)throw zr();if(!(se(i.value.J[0].type,54)||se(i.value.J[0].type,47)||se(i.value.J[0].type,56)||se(i.value.J[0].type,58)||se(i.value.J[0].type,57)))throw zr();if(null===(a=Ve(e.h,i.value.J[0].value,null)))throw Error("XUDY0009: The target "+i.value.J[0].value.outerHTML+" for replacing a node must have a parent.");if(u=i.value.J[0],i=i.value.fa,se(u.type,47)){if(r.Xa.length)throw Error("XUTY0011: When replacing an attribute the new value must be zero or more attribute nodes.");r.attributes.reduce((function(e,t){var n=t.node.prefix||"";t=t.node.namespaceURI;var r=a.node.lookupNamespaceURI(n);if(r&&r!==t)throw ro(t);if((r=e[n])&&t!==r)throw oo(t);return e[n]=t,e}),{})}else if(r.attributes.length)throw Error("XUTY0010: When replacing an an element, text, comment, or processing instruction node the new value must be a single node.");return ce({J:[],fa:xo([Fc(u.value,[].concat(r.attributes,r.Xa))],o,i)})}}}function Yc(e,t,n){var r,o,a,u,i=!1;return{next:function(){if(i)return ie;if(!a){var c=n.next(0),l=Vt(Ie.create(c.value.J),e).map((function(e){return Hn(e,1)})).O().map((function(e){return e.value})).join(" ");a=0===l.length?null:{node:e.o.createTextNode(l),F:null},u=c.value.fa}if(!r){if(0===(c=t.next(0)).value.J.length)throw ao();if(1!==c.value.J.length)throw zr();if(!(se(c.value.J[0].type,54)||se(c.value.J[0].type,47)||se(c.value.J[0].type,56)||se(c.value.J[0].type,58)||se(c.value.J[0].type,57)))throw zr();r=c.value.J[0],o=c.value.fa}if(se(r.type,54))return i=!0,ce({J:[],fa:xo([new Tc(r.value,a)],u,o)});if(se(r.type,47)||se(r.type,56)||se(r.type,58)||se(r.type,57)){if(c=a?Je(e.h,a):"",se(r.type,58)&&(c.includes("--")||c.endsWith("-")))throw Error('XQDY0072: The content "'+c+'" for a comment node contains two adjacent hyphens or ends with a hyphen.');if(se(r.type,57)&&c.includes("?>"))throw Error('XQDY0026: The content "'+c+'" for a processing instruction node contains "?>".');return i=!0,ce({J:[],fa:xo([new Cc(r.value,c)],u,o)})}}}}function Qc(e,t,n){bo.call(this,new Fo({}),[t,n],{C:!1,R:"unsorted"}),this.K=e,this.l=t,this.A=n}function Jc(e){switch(e.type){case"delete":return new gc({node:e.target,F:null});case"insertAfter":return new wc({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertBefore":return new xc({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertInto":return new Ec({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertIntoAsFirst":return new bc({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertIntoAsLast":return new Bc({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertAttributes":return new Ac({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"rename":return new Nc({node:e.target,F:null},e.newName);case"replaceNode":return new Ic({node:e.target,F:null},e.replacement.map((function(e){return{node:e,F:null}})));case"replaceValue":return new Cc({node:e.target,F:null},e["string-value"]);case"replaceElementContent":return new Tc({node:e.target,F:null},e.text?{node:e.text,F:null}:null);default:throw Error('Unexpected type "'+e.type+'" when parsing a transferable pending update.')}}function Kc(e,t,n){if(t.find((function(t){return Xn(t,e)})))return!0;var r=Ve(n,e);return!!r&&Kc(r,t,n)}function qc(e,t,n){bo.call(this,new Fo({}),e.reduce((function(e,t){return e.push(t.jb),e}),[t,n]),{C:!1,R:"unsorted"}),this.l=e,this.K=t,this.A=n,this.I=null}function _c(e,t){return{node:{nodeType:2,Ta:!0,nodeName:e.Ca(),namespaceURI:e.namespaceURI,prefix:e.prefix,localName:e.localName,name:e.Ca(),value:t},F:null}}function Vc(e,t){var n=t.wb||[];n=n.concat(e.Oa||[]),uo.call(this,new Fo({}),n,{C:!1,R:"unsorted"}),e.Oa?this.s=e.Oa:this.name=new Fe(e.prefix,e.namespaceURI,e.localName),this.l=t,this.A=void 0}function Wc(e){uo.call(this,e?e.o:new Fo({}),e?[e]:[],{C:!1,R:"unsorted"}),this.l=e}function Zc(e,t,n,r){uo.call(this,new Fo({}),r.concat(t).concat(e.Oa||[]),{C:!1,R:"unsorted"}),e.Oa?this.s=e.Oa:this.l=new Fe(e.prefix,e.namespaceURI,e.localName),this.S=n.reduce((function(e,t){if(t.prefix in e)throw Error("XQST0071: The namespace declaration with the prefix "+t.prefix+" has already been declared on the constructed element.");return e[t.prefix||""]=t.uri,e}),{}),this.K=t,this.la=r,this.A=void 0}function $c(e){if(/^xml$/i.test(e))throw Error('XQDY0064: The target of a created PI may not be "'+e+'"')}function zc(e,t){return{node:{data:t,Ta:!0,nodeName:e,nodeType:7,target:e},F:null}}function el(e,t){var n=e.Fb?[e.Fb].concat(t):[t];uo.call(this,n.reduce((function(e,t){return e.add(t.o)}),new Fo({})),n,{C:!1,R:"unsorted"}),this.l=e,this.s=t}function tl(e){uo.call(this,e?e.o:new Fo({}),e?[e]:[],{C:!1,R:"unsorted"}),this.l=e}function nl(e,t,n,r){var o,a=new Fo({});No.call(this,a,(o=[e].concat(h(t.map((function(e){return e.ic}))),[n])).concat.apply(o,h(t.map((function(e){return e.Pb.map((function(e){return e.Ob}))})))),{C:!1,X:!1,R:"unsorted",subtree:!1},r),this.K=e,this.l=t.length,this.S=t.map((function(e){return e.Pb}))}A(Xc,bo),Xc.prototype.s=function(e,t){var n=this,r=Bo(this.A)(e,t),o=Bo(this.K)(e,t);return{next:function(){var e=r.next(0),a=e.value.J;if(0===a.length)throw ao();if(1!==a.length)throw eo();if(!se(a[0].type,54)&&!se(a[0].type,47)&&!se(a[0].type,57))throw eo();a=a[0];var u=o.next(0);e:{var i=n.l,c=Ie.create(u.value.J);switch(a.type){case 54:if(i=jc(i,t,c).next(0).value.value,(c=a.value.node.lookupNamespaceURI(i.prefix))&&c!==i.namespaceURI)throw ro(i.namespaceURI);break e;case 47:if((i=jc(i,t,c).next(0).value.value).namespaceURI&&(c=a.value.node.lookupNamespaceURI(i.prefix))&&c!==i.namespaceURI)throw ro(i.namespaceURI);break e;case 57:i=new Fe("",null,i=Pc(t,c).next(0).value.value);break e}i=void 0}return ce({J:[],fa:xo([new Nc(a.value,i)],e.value.fa,u.value.fa)})}}},Xc.prototype.v=function(e){this.l=Sa(e),bo.prototype.v.call(this,e)},A(Qc,bo),Qc.prototype.s=function(e,t){var n=Bo(this.l)(e,t);return e=Bo(this.A)(e,t),this.K?Yc(t,n,e):Lc(t,n,e)},A(qc,bo),qc.prototype.h=function(e,t){return Eo(e=this.s(e,t),(function(){}))},qc.prototype.s=function(e,t){var n,r,o,a=this,u=t.h,i=t.o,c=t.B,l=[],s=[],p=[];return{next:function(){if(s.length!==a.l.length)for(var f={},d=s.length;d<a.l.length;f={lb:f.lb},d++){var m=a.l[d],y=l[d];if(y||(l[d]=y=Bo(m.jb)(e,t)),1!==(y=y.next(0)).value.J.length||!se(y.value.J[0].type,53))throw Error("XUTY0013: The source expression of a copy modify expression must return a single node.");f.lb=et(zo(y.value.J[0].value,t)),s.push(f.lb.value),p.push(y.value.fa),e=jt(e,((y={})[m.qc]=function(e){return function(){return Ie.m(e.lb)}}(f),y))}return o||(n||(n=Bo(a.K)(e,t)),o=n.next(0).value.fa),o.forEach((function(e){if(e.target&&!Kc(e.target,s,u))throw Error("XUDY0014: The target "+e.target.node.outerHTML+" must be a node created by the copy clause.");if("put"===e.type)throw Error("XUDY0037: The modify expression of a copy modify expression can not contain a fn:put.")})),wo(f=o.map((function(e){return Jc(e=e.h(t))})),u,i,c),r||(r=Bo(a.A)(e,t)),ce({J:(f=r.next(0)).value.J,fa:xo.apply(null,[f.value.fa].concat(h(p)))})}}},qc.prototype.v=function(e){Ga(e),this.l.forEach((function(t){return t.qc=Ua(e,t.Rb.namespaceURI,t.Rb.localName)})),bo.prototype.v.call(this,e),Ha(e),this.I=this.l.some((function(e){return e.jb.I}))||this.A.I},A(Vc,uo),Vc.prototype.h=function(e,t){var n,r,o,a=this,u=!1;return Ie.create({next:function(){if(u)return ie;if(!r){if(a.s){if(!n){var i=a.s.h(e,t);n=jc(a.A,t,i)}r=n.next(0).value.value}else r=a.name;if(r){if("xmlns"===r.prefix)throw xa(r);if(""===r.prefix&&"xmlns"===r.localName)throw xa(r);if("http://www.w3.org/2000/xmlns/"===r.namespaceURI)throw xa(r);if("xml"===r.prefix&&"http://www.w3.org/XML/1998/namespace"!==r.namespaceURI)throw xa(r);if(""!==r.prefix&&"xml"!==r.prefix&&"http://www.w3.org/XML/1998/namespace"===r.namespaceURI)throw xa(r)}}return a.l.wb?(i=a.l.wb,o||(o=Lt(i.map((function(n){return Vt(n.h(e,t),t).M((function(e){return Ie.m(ne(e.map((function(e){return e.value})).join(" "),1))}))}))).M((function(e){return Ie.m(et(_c(r,e.map((function(e){return e.value})).join(""))))})).value),o.next(0)):(u=!0,ce(et(_c(r,a.l.value))))}})},Vc.prototype.v=function(e){if(this.A=Sa(e),this.name&&this.name.prefix&&!this.name.namespaceURI){var t=e.aa(this.name.prefix);if(void 0===t&&this.name.prefix)throw qt(this.name.prefix);this.name.namespaceURI=t||null}uo.prototype.v.call(this,e)},A(Wc,uo),Wc.prototype.h=function(e,t){var n={data:"",Ta:!0,nodeType:8},r={node:n,F:null};return this.l?Vt(e=io(this.l,e,t),t).M((function(e){if(-1!==(e=e.map((function(e){return Hn(e,1).value})).join(" ")).indexOf("--\x3e"))throw Error('XQDY0072: The contents of the data of a comment may not include "--\x3e"');return n.data=e,Ie.m(et(r))})):Ie.m(et(r))},A(Zc,uo),Zc.prototype.h=function(e,t){var n,r,o,a,u,i=this,c=!1,l=!1,s=!1;return Ie.create({next:function(){if(s)return ie;if(c||(n||(n=Lt(i.K.map((function(n){return io(n,e,t)})))),r=n.O(),c=!0),!l){o||(o=i.la.map((function(n){return io(n,e,t)})));for(var p=[],f=0;f<o.length;f++){var h=o[f].O();p.push(h)}a=p,l=!0}if(i.s&&(u||(p=i.s.h(e,t),u=jc(i.A,t,p)),p=u.next(0),i.l=p.value.value),"xmlns"===i.l.prefix||"http://www.w3.org/2000/xmlns/"===i.l.namespaceURI||"xml"===i.l.prefix&&"http://www.w3.org/XML/1998/namespace"!==i.l.namespaceURI||i.l.prefix&&"xml"!==i.l.prefix&&"http://www.w3.org/XML/1998/namespace"===i.l.namespaceURI)throw Error('XQDY0096: The node name "'+i.l.Ca()+'" is invalid for a computed element constructor.');var d={nodeType:1,Ta:!0,attributes:[],childNodes:[],nodeName:i.l.Ca(),namespaceURI:i.l.namespaceURI,prefix:i.l.prefix,localName:i.l.localName};for(p={node:d,F:null},r.forEach((function(e){d.attributes.push(e.value.node)})),(f=Gc(a,t,Aa)).attributes.forEach((function(e){if(d.attributes.find((function(t){return t.namespaceURI===e.namespaceURI&&t.localName===e.localName})))throw Error("XQDY0025: The attribute "+e.name+" does not have an unique name in the constructed element.");d.attributes.push(e)})),f.Xa.forEach((function(e){d.childNodes.push(e)})),f=0;f<d.childNodes.length;f++)if(Pe(h=d.childNodes[f])&&3===h.nodeType){var m=d.childNodes[f-1];m&&Pe(m)&&3===m.nodeType&&(m.data+=h.data,d.childNodes.splice(f,1),f--)}return s=!0,ce(et(p))}})},Zc.prototype.v=function(e){var t=this;if(Ga(e),Object.keys(this.S).forEach((function(n){return ka(e,n,t.S[n])})),this.ta.forEach((function(t){return t.v(e)})),this.K.reduce((function(t,n){if(n.name){if(n="Q{"+(null===n.name.namespaceURI?e.aa(n.name.prefix):n.name.namespaceURI)+"}"+n.name.localName,t.includes(n))throw Error("XQST0040: The attribute "+n+" does not have an unique name in the constructed element.");t.push(n)}return t}),[]),this.l&&null===this.l.namespaceURI){var n=e.aa(this.l.prefix);if(void 0===n&&this.l.prefix)throw qt(this.l.prefix);this.l.namespaceURI=n}this.A=Sa(e),Ha(e)},A(el,uo),el.prototype.h=function(e,t){var n=this;return Vt(io(this.s,e,t),t).M((function(r){var o=r.map((function(e){return Hn(e,1).value})).join(" ");if(-1!==o.indexOf("?>"))throw Error('XQDY0026: The contents of the data of a processing instruction may not include "?>"');if(null!==n.l.Nb)return $c(r=n.l.Nb),Ie.m(et(zc(r,o)));r=io(n.l.Fb,e,t);var a=Pc(t,r);return Ie.create({next:function(){var e=a.next(0);return e.done?e:($c(e=e.value.value),ce(et(zc(e,o))))}})}))},A(tl,uo),tl.prototype.h=function(e,t){return this.l?Vt(e=io(this.l,e,t),t).M((function(e){return 0===e.length?Ie.empty():(e={node:{data:e.map((function(e){return Hn(e,1).value})).join(" "),Ta:!0,nodeType:3},F:null},Ie.m(et(e)))})):Ie.empty()},A(nl,No),nl.prototype.A=function(e,t,n){var r=this;return n[0](e).M((function(o){for(var a=0;a<r.l;a++)if(r.S[a].some((function(n){switch(n.oc){case"?":if(1<o.length)return!1;break;case"*":break;case"+":if(1>o.length)return!1;break;default:if(1!==o.length)return!1}var r=Ie.create(o);return o.every((function(o,a){return o=Pt(e,a,o,r),io(n.Ob,o,t).ha()}))})))return n[a+1](e);return n[r.l+1](e)}))},nl.prototype.v=function(e){if(No.prototype.v.call(this,e),this.K.I)throw Vr()};var rl={$:!1,ua:!1},ol={$:!0,ua:!1},al={$:!0,ua:!0};function ul(e){return e.$?e.ua?al:ol:rl}function il(e,t){switch(e[0]){case"andOp":var n=Xa(e,"type");return new gi(pl("andOp",e,ul(t)),n);case"orOp":return n=Xa(e,"type"),new vi(pl("orOp",e,ul(t)),n);case"unaryPlusOp":return n=Pa(Pa(e,"operand"),"*"),e=Xa(e,"type"),new yi("+",il(n,t),e);case"unaryMinusOp":return n=Pa(Pa(e,"operand"),"*"),e=Xa(e,"type"),new yi("-",il(n,t),e);case"addOp":case"subtractOp":case"multiplyOp":case"divOp":case"idivOp":case"modOp":var r=e[0],o=il(La(e,["firstOperand","*"]),ul(t));t=il(La(e,["secondOperand","*"]),ul(t));var a=Xa(e,"type"),u=Xa(La(e,["firstOperand","*"]),"type"),i=Xa(La(e,["secondOperand","*"]),"type");return u&&i&&Xa(e,"type")&&(n=nu(r,u.type,i.type)),new uu(r,o,t,a,n);case"sequenceExpr":return bl(e,t);case"unionOp":return n=Xa(e,"type"),new Vi([il(La(e,["firstOperand","*"]),ul(t)),il(La(e,["secondOperand","*"]),ul(t))],n);case"exceptOp":case"intersectOp":return n=Xa(e,"type"),new Pi(e[0],il(La(e,["firstOperand","*"]),ul(t)),il(La(e,["secondOperand","*"]),ul(t)),n);case"stringConcatenateOp":return El(e,t);case"rangeSequenceExpr":return Nl(e,t);case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":return hl("generalCompare",e,t);case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":return hl("valueCompare",e,t);case"isOp":case"nodeBeforeOp":case"nodeAfterOp":return hl("nodeCompare",e,t);case"pathExpr":return Al(e,t);case"contextItemExpr":return new ec(Xa(e,"type"));case"functionCallExpr":return yl(e,t);case"inlineFunctionExpr":return wl(e,t);case"arrowExpr":return gl(e,t);case"dynamicFunctionInvocationExpr":return vl(e,t);case"namedFunctionRef":return t=Pa(e,"functionName"),n=Xa(e,"type"),e=ja(La(e,["integerConstantExpr","value"])),new hi(Qa(t),parseInt(e,10),n);case"integerConstantExpr":return new pi(ja(Pa(e,"value")),{type:5,g:3});case"stringConstantExpr":return new pi(ja(Pa(e,"value")),{type:1,g:3});case"decimalConstantExpr":return new pi(ja(Pa(e,"value")),{type:4,g:3});case"doubleConstantExpr":return new pi(ja(Pa(e,"value")),{type:3,g:3});case"varRef":return new dc((e=Qa(Pa(e,"name"))).prefix,e.namespaceURI,e.localName);case"flworExpr":return ml(e,t);case"quantifiedExpr":return xl(e,t);case"ifThenElseExpr":return n=Xa(e,"type"),new ei(il(Pa(Pa(e,"ifClause"),"*"),ul(t)),il(Pa(Pa(e,"thenClause"),"*"),t),il(Pa(Pa(e,"elseClause"),"*"),t),n);case"instanceOfExpr":return n=il(La(e,["argExpr","*"]),t),r=La(e,["sequenceType","*"]),o=La(e,["sequenceType","occurrenceIndicator"]),e=Xa(e,"type"),new Ji(n,il(r,ul(t)),o?ja(o):"",e);case"castExpr":return t=il(Pa(Pa(e,"argExpr"),"*"),ul(t)),n=Pa(e,"singleType"),new Yi(t,e=Qa(Pa(n,"atomicType")),n=null!==Pa(n,"optional"));case"castableExpr":return t=il(Pa(Pa(e,"argExpr"),"*"),ul(t)),n=Pa(e,"singleType"),new Li(t,e=Qa(Pa(n,"atomicType")),n=null!==Pa(n,"optional"));case"simpleMapExpr":return Bl(e,t);case"mapConstructor":return sl(e,t);case"arrayConstructor":return ll(e,t);case"unaryLookup":return n=Xa(e,"type"),new ic(fl(e,t),n);case"typeswitchExpr":return Ol(e,t);case"elementConstructor":return Tl(e,t);case"attributeConstructor":return Il(e,t);case"computedAttributeConstructor":return(n=Pa(e,"tagName"))?n=Qa(n):(n=Pa(e,"tagNameExpr"),n={Oa:il(Pa(n,"*"),ul(t))}),new Vc(n,{wb:[e=il(Pa(Pa(e,"valueExpr"),"*"),ul(t))]});case"computedCommentConstructor":if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return new Wc(e=(e=Pa(e,"argExpr"))?il(Pa(e,"*"),ul(t)):null);case"computedTextConstructor":if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return new tl(e=(e=Pa(e,"argExpr"))?il(Pa(e,"*"),ul(t)):null);case"computedElementConstructor":return Cl(e,t);case"computedPIConstructor":if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return n=Pa(e,"piTargetExpr"),r=Pa(e,"piTarget"),o=Pa(e,"piValueExpr"),e=Xa(e,"type"),new el({Fb:n?il(Pa(n,"*"),ul(t)):null,Nb:r?ja(r):null},o?il(Pa(o,"*"),ul(t)):new ji([],e));case"CDataSection":return new pi(ja(e),{type:1,g:3});case"deleteExpr":return new Oc(e=il(La(e,["targetExpr","*"]),t));case"insertExpr":switch(n=il(La(e,["sourceExpr","*"]),t),(o=Ya(e,"*")[1])[0]){case"insertAfter":r=1;break;case"insertBefore":r=2;break;case"insertInto":r=(r=Pa(o,"*"))?"insertAsFirst"===r[0]?4:5:3}return new Rc(n,r,e=il(La(e,["targetExpr","*"]),t));case"renameExpr":return new Xc(n=il(La(e,["targetExpr","*"]),t),e=il(La(e,["newNameExpr","*"]),t));case"replaceExpr":return new Qc(n=!!Pa(e,"replaceValue"),r=il(La(e,["targetExpr","*"]),t),e=il(La(e,["replacementExpr","*"]),t));case"transformExpr":return Fl(e,t);case"x:stackTrace":for(n=e[1],e=e[2];"x:stackTrace"===e[0];)e=e[2];return new oi(n,e[0],il(e,t));default:return cl(e)}}function cl(e){switch(e[0]){case"nameTest":return new pc(Qa(e));case"piTest":return(e=Pa(e,"piTarget"))?new fc(ja(e)):new sc(7);case"commentTest":return new sc(8);case"textTest":return new sc(3);case"documentTest":return new sc(9);case"attributeTest":var t=(e=Pa(e,"attributeName"))&&Pa(e,"star");return!e||t?new sc(2):new pc(Qa(Pa(e,"QName")),{kind:2});case"elementTest":return t=(e=Pa(e,"elementName"))&&Pa(e,"star"),!e||t?new sc(1):new pc(Qa(Pa(e,"QName")),{kind:1});case"anyKindTest":return new hc({prefix:"",namespaceURI:null,localName:"node()"});case"anyMapTest":return new hc({prefix:"",namespaceURI:null,localName:"map(*)"});case"anyArrayTest":return new hc({prefix:"",namespaceURI:null,localName:"array(*)"});case"Wildcard":return Pa(e,"star")?(t=Pa(e,"uri"))?e=new pc({localName:"*",namespaceURI:ja(t),prefix:""}):(t=Pa(e,"NCName"),e="star"===Pa(e,"*")[0]?new pc({localName:ja(t),namespaceURI:null,prefix:"*"}):new pc({localName:"*",namespaceURI:null,prefix:ja(t)})):e=new pc({localName:"*",namespaceURI:null,prefix:"*"}),e;case"atomicType":return new hc(Qa(e));case"anyItemType":return new hc({prefix:"",namespaceURI:null,localName:"item()"});default:throw Error("No selector counterpart for: "+e[0]+".")}}function ll(e,t){var n=Xa(e,"type"),r=Ya(e=Pa(e,"*"),"arrayElem").map((function(e){return il(Pa(e,"*"),ul(t))}));switch(e[0]){case"curlyArray":return new Ou(r,n);case"squareArray":return new Su(r,n);default:throw Error("Unrecognized arrayType: "+e[0])}}function sl(e,t){var n=Xa(e,"type");return new fi(Ya(e,"mapConstructorEntry").map((function(e){return{key:il(La(e,["mapKeyExpr","*"]),ul(t)),value:il(La(e,["mapValueExpr","*"]),ul(t))}})),n)}function pl(e,t,n){function r(t){var a=Pa(Pa(t,"firstOperand"),"*");t=Pa(Pa(t,"secondOperand"),"*"),a[0]===e?r(a):o.push(il(a,n)),t[0]===e?r(t):o.push(il(t,n))}var o=[];return r(t),o}function fl(e,t){switch((e=Pa(e,"*"))[0]){case"NCName":return new pi(ja(e),{type:1,g:3});case"star":return"*";default:return il(e,ul(t))}}function hl(e,t,n){var r=La(t,["firstOperand","*"]),o=La(t,["secondOperand","*"]);switch(r=il(r,ul(n)),n=il(o,ul(n)),e){case"valueCompare":return new Oi(t[0],r,n);case"nodeCompare":return new Mi(t[0],r,n);case"generalCompare":return new Ri(t[0],r,n)}}function dl(e,t,n){return new $i((e=Ya(e,"*")).filter((function(e){return"stable"!==e[0]})).map((function(e){var n=Pa(e,"orderModifier"),r=n?Pa(n,"orderingKind"):null;return n=n?Pa(n,"emptyOrderingMode"):null,r=!r||"ascending"===ja(r),n=!n||"empty least"===ja(n),{ca:il(La(e,["orderByExpr","*"]),t),Kb:r,lc:n}})),n)}function ml(e,t){var n=Ya(e,"*");if(e=Pa(n[n.length-1],"*"),1<(n=n.slice(0,-1)).length&&!t.$)throw Error("XPST0003: Use of XQuery FLWOR expressions in XPath is no allowed");return n.reduceRight((function(e,n){switch(n[0]){case"forClause":for(var r=(n=Ya(n,"*")).length-1;0<=r;--r){var o=n[r],a=La(o,["forExpr","*"]),u=Pa(o,"positionalVariableBinding");e=new ci(Qa(La(o,["typedVariableBinding","varName"])),il(a,ul(t)),u?Qa(u):null,e)}return e;case"letClause":for(r=(n=Ya(n,"*")).length-1;0<=r;--r)a=La(o=n[r],["letExpr","*"]),e=new si(Qa(La(o,["typedVariableBinding","varName"])),il(a,ul(t)),e);return e;case"whereClause":for(r=(n=Ya(n,"*")).length-1;0<=r;--r)e=new mc(il(n[r],t),e);return e;case"windowClause":case"groupByClause":case"countClause":throw Error("Not implemented: "+n[0]+" is not implemented yet.");case"orderByClause":return dl(n,t,e);default:throw Error("Not implemented: "+n[0]+" is not supported in a flwor expression")}}),il(e,t))}function yl(e,t){var n=Pa(e,"functionName"),r=Ya(Pa(e,"arguments"),"*");return e=Xa(e,"type"),new ko(new hi(Qa(n),r.length,e),r.map((function(e){return"argumentPlaceholder"===e[0]?null:il(e,t)})),e)}function gl(e,t){var n=Xa(e,"type"),r=La(e,["argExpr","*"]);e=Ya(e,"*").slice(1),r=[il(r,t)];for(var o=0;o<e.length;o++)if("arguments"!==e[o][0]){if("arguments"===e[o+1][0]){var a=Ya(e[o+1],"*");r=r.concat(a.map((function(e){return"argumentPlaceholder"===e[0]?null:il(e,t)})))}r=[new ko(a="EQName"===e[o][0]?new hi(Qa(e[o]),r.length,n):il(e[o],ul(t)),r,n)]}return r[0]}function vl(e,t){var n=La(e,["functionItem","*"]),r=Xa(e,"type"),o=[];return(e=Pa(e,"arguments"))&&(o=Ya(e,"*").map((function(e){return"argumentPlaceholder"===e[0]?null:il(e,t)}))),new ko(il(n,t),o,r)}function wl(e,t){var n=Ya(Pa(e,"paramList"),"*"),r=La(e,["functionBody","*"]),o=Xa(e,"type");return new li(n.map((function(e){return{name:Qa(Pa(e,"varName")),type:Ja(e)}})),Ja(e),r?il(r,t):new ji([],o))}function Al(e,t){var n=Xa(e,"type"),r=Ya(e,"stepExpr"),o=!1,a=r.map((function(e){for(var r=Pa(e,"xpathAxis"),a=Ya(e,"*"),u=[],i=null,c=(a=p(a)).next();!c.done;c=a.next())switch(c=c.value,c[0]){case"lookup":u.push(["lookup",fl(c,t)]);break;case"predicate":case"predicates":for(var l=(c=p(Ya(c,"*"))).next();!l.done;l=c.next())i=Uu(i,(l=il(l.value,ul(t))).B()),u.push(["predicate",l])}if(r)switch(o=!0,e=Pa(e,"attributeTest anyElementTest piTest documentTest elementTest commentTest namespaceTest anyKindTest textTest anyFunctionTest typedFunctionTest schemaAttributeTest atomicType anyItemType parenthesizedItemType typedMapTest typedArrayTest nameTest Wildcard".split(" ")),e=cl(e),ja(r)){case"ancestor":var s=new Ru(e,{Ra:!1});break;case"ancestor-or-self":s=new Ru(e,{Ra:!0});break;case"attribute":s=new Mu(e,i);break;case"child":s=new Hu(e,i);break;case"descendant":s=new Xu(e,{Ra:!1});break;case"descendant-or-self":s=new Xu(e,{Ra:!0});break;case"parent":s=new _u(e,i);break;case"following-sibling":s=new qu(e,i);break;case"preceding-sibling":s=new $u(e,i);break;case"following":s=new Ju(e);break;case"preceding":s=new Wu(e);break;case"self":s=new zu(e,i)}else s=il(s=La(e,["filterExpr","*"]),ul(t));for(r=(u=p(u)).next();!r.done;r=u.next())switch(r=r.value,r[0]){case"lookup":s=new uc(s,r[1]);break;case"predicate":s=new rc(s,r[1])}return s.type=n,s}));return e=Pa(e,"rootExpr"),!(r=o||null!==e||1<r.length)&&1===a.length||!e&&1===a.length&&"sorted"===a[0].da?a[0]:e&&0===a.length?new zi(null):(a=new nc(a,r),e?new zi(a):a)}function xl(e,t){var n=Xa(e,"type"),r=ja(Pa(e,"quantifier")),o=La(e,["predicateExpr","*"]);return new cc(r,e=Ya(e,"quantifiedExprInClause").map((function(e){return{name:Qa(La(e,["typedVariableBinding","varName"])),jb:il(e=La(e,["sourceExpr","*"]),ul(t))}})),il(o,ul(t)),n)}function bl(e,t){var n=Ya(e,"*").map((function(e){return il(e,t)}));return 1===n.length?n[0]:(n=Xa(e,"type"),new ji(Ya(e,"*").map((function(e){return il(e,t)})),n))}function Bl(e,t){var n=Xa(e,"type");return Ya(e,"*").reduce((function(e,r){return null===e?il(r,ul(t)):new Xi(e,il(r,ul(t)),n)}),null)}function El(e,t){var n=Xa(e,"type");return new ko(new hi({localName:"concat",namespaceURI:"http://www.w3.org/2005/xpath-functions",prefix:""},(e=[La(e,["firstOperand","*"]),La(e,["secondOperand","*"])]).length,n),e.map((function(e){return il(e,ul(t))})),n)}function Nl(e,t){var n=Xa(e,"type");return new ko(new hi({localName:"to",namespaceURI:"http://fontoxpath/operators",prefix:""},(e=[Pa(Pa(e,"startExpr"),"*"),Pa(Pa(e,"endExpr"),"*")]).length,n),e.map((function(e){return il(e,ul(t))})),n)}function Tl(e,t){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Qa(Pa(e,"tagName")),r=Pa(e,"attributeList");return new Zc(n,r?Ya(r,"attributeConstructor").map((function(e){return il(e,ul(t))})):[],r=r?Ya(r,"namespaceDeclaration").map((function(e){var t=Pa(e,"prefix");return{prefix:t?ja(t):"",uri:ja(Pa(e,"uri"))}})):[],e=(e=Pa(e,"elementContent"))?Ya(e,"*").map((function(e){return il(e,ul(t))})):[])}function Il(e,t){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Qa(Pa(e,"attributeName")),r=Pa(e,"attributeValue");return new Vc(n,{value:r=r?ja(r):null,wb:e=(e=Pa(e,"attributeValueExpr"))?Ya(e,"*").map((function(e){return il(e,ul(t))})):null})}function Cl(e,t){var n=Pa(e,"tagName");return n?n=Qa(n):(n=Pa(e,"tagNameExpr"),n={Oa:il(Pa(n,"*"),ul(t))}),new Zc(n,[],[],e=(e=Pa(e,"contentExpr"))?Ya(e,"*").map((function(e){return il(e,ul(t))})):[])}function Fl(e,t){return new qc(Ya(Pa(e,"transformCopies"),"transformCopy").map((function(e){var n=Qa(Pa(Pa(e,"varRef"),"name"));return{jb:il(Pa(Pa(e,"copySource"),"*"),t),Rb:new Fe(n.prefix,n.namespaceURI,n.localName)}})),il(Pa(Pa(e,"modifyExpr"),"*"),t),e=il(Pa(Pa(e,"returnExpr"),"*"),t))}function Ol(e,t){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Xa(e,"type");return new nl(il(Pa(Pa(e,"argExpr"),"*"),t),Ya(e,"typeswitchExprCaseClause").map((function(e){var n=0===Ya(e,"sequenceTypeUnion").length?[Pa(e,"sequenceType")]:Ya(Pa(e,"sequenceTypeUnion"),"sequenceType");return{ic:il(La(e,["resultExpr","*"]),t),Pb:n.map((function(e){var n=Pa(e,"occurrenceIndicator");return{oc:n?ja(n):"",Ob:il(Pa(e,"*"),t)}}))}})),e=il(La(e,["typeswitchExprDefaultClause","resultExpr","*"]),t),n)}function Sl(e,t){return il(e,t)}var Gl=new Map;function Dl(e,t,n,r,o,a){this.B=e,this.l=t,this.h=n,this.v=r,this.o=o,this.s=a}function Rl(e,t,n,r,o,a,u,i){return(e=Gl.get(e))&&(t=e[t+(a?"_DEBUG":"")])&&(t=t.find((function(e){return e.o===u&&e.B.every((function(e){return n(e.prefix)===e.namespaceURI}))&&e.l.every((function(e){return void 0!==r[e.name]}))&&e.v.every((function(e){return o[e.prefix]===e.namespaceURI}))&&e.s.every((function(e){var t=i(e.nc,e.arity);return t&&t.namespaceURI===e.Lb.namespaceURI&&t.localName===e.Lb.localName}))})))?{ca:t.h,rc:!1}:null}function kl(e,t,n,r,o,a,u){var i=Gl.get(e);i||(i=Object.create(null),Gl.set(e,i)),(t=i[e=t+(a?"_DEBUG":"")])||(t=i[e]=[]),t.push(new Dl(Object.values(n.h),Object.values(n.o),o,Object.keys(r).map((function(e){return{namespaceURI:r[e],prefix:e}})),u,n.B))}function Ul(e){var t=new ke;if("http://www.w3.org/2005/XQueryX"!==e.namespaceURI&&"http://www.w3.org/2005/XQueryX"!==e.namespaceURI&&"http://fontoxml.com/fontoxpath"!==e.namespaceURI&&"http://www.w3.org/2007/xquery-update-10"!==e.namespaceURI)throw Jt("The XML structure passed as an XQueryX program was not valid XQueryX");var n=["stackTrace"===e.localName?"x:stackTrace":e.localName],r=t.getAllAttributes(e);for(r&&0<r.length&&n.push(Array.from(r).reduce((function(t,n){return"start"===n.localName||"end"===n.localName&&"stackTrace"===e.localName?t[n.localName]=JSON.parse(n.value):"type"===n.localName?t[n.localName]=we(n.value):t[n.localName]=n.value,t}),{})),r=(t=p(t=t.getChildNodes(e))).next();!r.done;r=t.next())switch(r=r.value,r.nodeType){case 1:n.push(Ul(r));break;case 3:n.push(r.data)}return n}var Ml=Object.create(null);function Hl(e,t){var n=Ml[e];n||(n=Ml[e]={Ma:[],Va:[],ra:null,source:t.source});var r=n.ra||function(){};n.Ma=n.Ma.concat(t.Ma),n.Va=n.Va.concat(t.Va),n.ra=function(e){r(e),t.ra&&t.ra(e)}}function Pl(e,t){var n=Ml[t];if(!n)throw Error("XQST0051: No modules found with the namespace uri "+t);n.Ma.forEach((function(n){n.hb&&Ra(e,t,n.localName,n.arity,n)})),n.Va.forEach((function(n){Ua(e,t,n.localName),Ma(e,t,n.localName,(function(e,t){return io(n.ca,e,t)}))}))}function jl(){Object.keys(Ml).forEach((function(e){if((e=Ml[e]).ra)try{e.ra(e)}catch(t){e.ra=null,sa(e.source,t)}e.ra=null}))}function Xl(e){return e.replace(/(\x0D\x0A)|(\x0D(?!\x0A))/g,String.fromCharCode(10))}var Ll=t;function Yl(e,t){return function(n,r){return t.has(r)?t.get(r):(n=e(n,r),t.set(r,n),n)}}function Ql(e,t){return Ll.delimited(t,e,t)}function Jl(e,t){return e.reverse().reduce((function(e,t){return Ll.preceded(t,e)}),t)}function Kl(e,t,n,r){return Ll.then(Ll.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=p(e);return e=n.next().value,n=n.next().value,r(e,n,t)}))}function ql(e,t,n,r,o){return Ll.then(Ll.then(Ll.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=p(e);return[e=n.next().value,n=n.next().value,t]})),r,(function(e,t){var n=p(e);e=n.next().value;var r=n.next().value;return n=n.next().value,o(e,r,n,t)}))}function _l(e,t,n,r,o,a){return Ll.then(Ll.then(Ll.then(Ll.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=p(e);return[e=n.next().value,n=n.next().value,t]})),r,(function(e,t){var n=p(e);return[e=n.next().value,n.next().value,n=n.next().value,t]})),o,(function(e,t){var n=p(e);e=n.next().value;var r=n.next().value,o=n.next().value;return n=n.next().value,a(e,r,o,n,t)}))}function Vl(e){return Ll.map(e,(function(e){return[e]}))}function Wl(e,t){return Ll.map(Ll.or(e),(function(){return t}))}function Zl(e){return function(t,n){return(t=e.exec(t.substring(n)))&&0===t.index?Ll.okWithValue(n+t[0].length,t[0]):Ll.error(n,[e.source],!1)}}var $l=Ll.or([Ll.token(" "),Ll.token("\t"),Ll.token("\r"),Ll.token("\n")]),zl=Ll.token("(:"),es=Ll.token(":)"),ts=Ll.token("(#"),ns=Ll.token("#)"),rs=Ll.token("("),os=Ll.token(")"),as=Ll.token("["),us=Ll.token("]"),is=Ll.token("{"),cs=Ll.token("}"),ls=Ll.token("{{"),ss=Ll.token("}}"),ps=Ll.token("'"),fs=Ll.token("''"),hs=Ll.token('"'),ds=Ll.token('""'),ms=Ll.token("<![CDATA["),ys=Ll.token("]]>"),gs=Ll.token("/>"),vs=Ll.token("</"),ws=Ll.token("\x3c!--"),As=Ll.token("--\x3e"),xs=Ll.token("<?"),bs=Ll.token("?>"),Bs=Ll.token("&#x"),Es=Ll.token("&#"),Ns=Ll.token(":*"),Ts=Ll.token("*:"),Is=Ll.token(":="),Cs=Ll.token("&"),Fs=Ll.token(":"),Os=Ll.token(";"),Ss=Ll.token("*"),Gs=Ll.token("@"),Ds=Ll.token("$"),Rs=Ll.token("#"),ks=Ll.token("%"),Us=Ll.token("?"),Ms=Ll.token("="),Hs=Ll.followed(Ll.token("!"),Ll.not(Ll.peek(Ms),[])),Ps=Ll.followed(Ll.token("|"),Ll.not(Ll.peek(Ll.token("|")),[])),js=Ll.token("||"),Xs=Ll.token("!="),Ls=Ll.token("<"),Ys=Ll.token("<<"),Qs=Ll.token("<="),Js=Ll.token(">"),Ks=Ll.token(">>"),qs=Ll.token(">="),_s=Ll.token(","),Vs=Ll.token("."),Ws=Ll.token(".."),Zs=Ll.token("+"),$s=Ll.token("-"),zs=Ll.token("/"),ep=Ll.token("//"),tp=Ll.token("=>"),np=Ll.token("e"),rp=Ll.token("E");Ll.token("l"),Ll.token("L"),Ll.token("m"),Ll.token("M");var op=Ll.token("Q");Ll.token("x"),Ll.token("X");var ap=Ll.token("as"),up=Ll.token("cast"),ip=Ll.token("castable"),cp=Ll.token("treat"),lp=Ll.token("instance"),sp=Ll.token("of"),pp=Ll.token("node"),fp=Ll.token("nodes"),hp=Ll.token("delete"),dp=Ll.token("value"),mp=Ll.token("function"),yp=Ll.token("map"),gp=Ll.token("element"),vp=Ll.token("attribute"),wp=Ll.token("schema-element"),Ap=Ll.token("intersect"),xp=Ll.token("except"),bp=Ll.token("union"),Bp=Ll.token("to"),Ep=Ll.token("is"),Np=Ll.token("or"),Tp=Ll.token("and"),Ip=Ll.token("div"),Cp=Ll.token("idiv"),Fp=Ll.token("mod"),Op=Ll.token("eq"),Sp=Ll.token("ne"),Gp=Ll.token("lt"),Dp=Ll.token("le"),Rp=Ll.token("gt"),kp=Ll.token("ge"),Up=Ll.token("amp"),Mp=Ll.token("quot"),Hp=Ll.token("apos"),Pp=Ll.token("if"),jp=Ll.token("then"),Xp=Ll.token("else"),Lp=Ll.token("allowing"),Yp=Ll.token("empty"),Qp=Ll.token("at"),Jp=Ll.token("in"),Kp=Ll.token("for"),qp=Ll.token("let"),_p=Ll.token("where"),Vp=Ll.token("collation"),Wp=Ll.token("group"),Zp=Ll.token("by"),$p=Ll.token("order"),zp=Ll.token("stable"),ef=Ll.token("return"),tf=Ll.token("array"),nf=Ll.token("document"),rf=Ll.token("namespace"),of=Ll.token("text"),af=Ll.token("comment"),uf=Ll.token("processing-instruction"),cf=Ll.token("lax"),lf=Ll.token("strict"),sf=Ll.token("validate"),pf=Ll.token("type"),ff=Ll.token("declare"),hf=Ll.token("default"),df=Ll.token("boundary-space"),mf=Ll.token("strip"),yf=Ll.token("preserve"),gf=Ll.token("no-preserve"),vf=Ll.token("inherit"),wf=Ll.token("no-inherit"),Af=Ll.token("greatest"),xf=Ll.token("least"),bf=Ll.token("copy-namespaces"),Bf=Ll.token("decimal-format"),Ef=Ll.token("case"),Nf=Ll.token("typeswitch"),Tf=Ll.token("some"),If=Ll.token("every"),Cf=Ll.token("satisfies"),Ff=Ll.token("replace"),Of=Ll.token("with"),Sf=Ll.token("copy"),Gf=Ll.token("modify"),Df=Ll.token("first"),Rf=Ll.token("last"),kf=Ll.token("before"),Uf=Ll.token("after"),Mf=Ll.token("into"),Hf=Ll.token("insert"),Pf=Ll.token("rename"),jf=Ll.token("switch"),Xf=Ll.token("variable"),Lf=Ll.token("external"),Yf=Ll.token("updating"),Qf=Ll.token("import"),Jf=Ll.token("schema"),Kf=Ll.token("module"),qf=Ll.token("base-uri"),_f=Ll.token("construction"),Vf=Ll.token("ordering"),Wf=Ll.token("ordered"),Zf=Ll.token("unordered"),$f=Ll.token("option"),zf=Ll.token("context"),eh=Ll.token("item"),th=Ll.token("xquery"),nh=Ll.token("version"),rh=Ll.token("encoding"),oh=Ll.token("document-node"),ah=Ll.token("namespace-node"),uh=Ll.token("schema-attribute"),ih=Ll.token("ascending"),ch=Ll.token("descending"),lh=Ll.token("empty-sequence"),sh=Ll.token("child::"),ph=Ll.token("descendant::"),fh=Ll.token("attribute::"),hh=Ll.token("self::"),dh=Ll.token("descendant-or-self::"),mh=Ll.token("following-sibling::"),yh=Ll.token("following::"),gh=Ll.token("parent::"),vh=Ll.token("ancestor::"),wh=Ll.token("preceding-sibling::"),Ah=Ll.token("preceding::"),xh=Ll.token("ancestor-or-self::"),bh=Ll.token("decimal-separator"),Bh=Ll.token("grouping-separator"),Eh=Ll.token("infinity"),Nh=Ll.token("minus-sign"),Th=Ll.token("NaN"),Ih=Ll.token("per-mille"),Ch=Ll.token("zero-digit"),Fh=Ll.token("digit"),Oh=Ll.token("pattern-separator"),Sh=Ll.token("exponent-separator"),Gh=Ll.token("schema-attribute("),Dh=Ll.token("document-node("),Rh=Ll.token("processing-instruction("),kh=Ll.token("processing-instruction()"),Uh=Ll.token("comment()"),Mh=Ll.token("text()"),Hh=Ll.token("namespace-node()"),Ph=Ll.token("node()"),jh=Ll.token("item()"),Xh=Ll.token("empty-sequence()"),Lh=new Map,Yh=new Map,Qh=Ll.or([Zl(/[\t\n\r -\uD7FF\uE000\uFFFD]/),Zl(/[\uD800-\uDBFF][\uDC00-\uDFFF]/)]),Jh=Ll.preceded(Ll.peek(Ll.not(Ll.or([zl,es]),['comment contents cannot contain "(:" or ":)"'])),Qh),Kh=Ll.map(Ll.delimited(zl,Ll.star(Ll.or([Jh,function(e,t){return Kh(e,t)}])),es,!0),(function(e){return e.join("")})),qh=Ll.or([$l,Kh]),_h=Ll.map(Ll.plus($l),(function(e){return e.join("")})),Vh=Yl(Ll.map(Ll.star(qh),(function(e){return e.join("")})),Lh),Wh=Yl(Ll.map(Ll.plus(qh),(function(e){return e.join("")})),Yh),Zh=Ll.or([Zl(/[A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),Ll.then(Zl(/[\uD800-\uDB7F]/),Zl(/[\uDC00-\uDFFF]/),(function(e,t){return e+t}))]),$h=Ll.or([Zh,Zl(/[\-\.0-9\xB7\u0300-\u036F\u203F\u2040]/)]),zh=Ll.then(Zh,Ll.star($h),(function(e,t){return e+t.join("")})),ed=Ll.map(zh,(function(e){return["prefix",e]})),td=Ll.or([Zh,Fs]),nd=Ll.or([$h,Fs]);Ll.then(td,Ll.star(nd),(function(e,t){return e+t.join("")}));var rd=Ll.map(zh,(function(e){var t={};return[(t.prefix="",t.URI=null,t),e]})),od=Ll.then(zh,Ll.preceded(Fs,zh),(function(e,t){var n={};return[(n.prefix=e,n.URI=null,n),t]})),ad=Ll.or([od,rd]),ud=Ll.followed(Jl([op,Vh,is],Ll.map(Ll.star(Zl(/[^{}]/)),(function(e){return e.join("").replace(/\s+/g," ").trim()}))),cs),id=Ll.then(ud,zh,(function(e,t){return[e,t]})),cd=Ll.or([Ll.map(id,(function(e){var t={};return[(t.prefix=null,t.URI=e[0],t),e[1]]})),ad]),ld=Ll.or([Ll.map(cd,(function(e){return["QName"].concat(h(e))})),Ll.map(Ss,(function(){return["star"]}))]),sd=Ll.map(Ll.preceded(Ds,cd),(function(e){return["varRef",["name"].concat(h(e))]})),pd=Ll.peek(Ll.or([rs,hs,ps,qh])),fd=Ll.map(Ll.or([sh,ph,fh,hh,dh,mh,yh]),(function(e){return e.substring(0,e.length-2)})),hd=Ll.map(Ll.or([gh,vh,wh,Ah,xh]),(function(e){return e.substring(0,e.length-2)})),dd=Kl(Cs,Ll.or([Gp,Rp,Up,Mp,Hp]),Os,(function(e,t,n){return e+t+n})),md=Ll.or([Kl(Bs,Zl(/[0-9a-fA-F]+/),Os,(function(e,t,n){return e+t+n})),Kl(Es,Zl(/[0-9]+/),Os,(function(e,t,n){return e+t+n}))]),yd=Wl([ds],'"'),gd=Wl([fs],"'"),vd=Vl(Wl([Uh],"commentTest")),wd=Vl(Wl([Mh],"textTest")),Ad=Vl(Wl([Hh],"namespaceTest")),xd=Vl(Wl([Ph],"anyKindTest")),bd=Zl(/[0-9]+/),Bd=Ll.then(Ll.or([Ll.then(Vs,bd,(function(e,t){return e+t})),Ll.then(bd,Ll.optional(Ll.preceded(Vs,Zl(/[0-9]*/))),(function(e,t){return e+(null!==t?"."+t:"")}))]),Kl(Ll.or([np,rp]),Ll.optional(Ll.or([Zs,$s])),bd,(function(e,t,n){return e+(t||"")+n})),(function(e,t){return["doubleConstantExpr",["value",e+t]]})),Ed=Ll.or([Ll.map(Ll.preceded(Vs,bd),(function(e){return["decimalConstantExpr",["value","."+e]]})),Ll.then(Ll.followed(bd,Vs),Ll.optional(bd),(function(e,t){return["decimalConstantExpr",["value",e+"."+(null!==t?t:"")]]}))]),Nd=Ll.map(bd,(function(e){return["integerConstantExpr",["value",e]]})),Td=Ll.followed(Ll.or([Bd,Ed,Nd]),Ll.peek(Ll.not(Zl(/[a-zA-Z]/),["no alphabetical characters after numeric literal"]))),Id=Ll.map(Ll.followed(Vs,Ll.peek(Ll.not(Vs,["context item should not be followed by another ."]))),(function(){return["contextItemExpr"]})),Cd=Ll.or([tf,vp,af,oh,gp,lh,mp,Pp,eh,yp,ah,pp,uf,uh,wp,jf,of,Nf]),Fd=Vl(Wl([Us],"argumentPlaceholder")),Od=Ll.or([Us,Ss,Zs]),Sd=Ll.preceded(Ll.peek(Ll.not(Zl(/[{}<&]/),["elementContentChar cannot be {, }, <, or &"])),Qh),Gd=Ll.map(Ll.delimited(ms,Ll.star(Ll.preceded(Ll.peek(Ll.not(ys,['CDataSection content may not contain "]]>"'])),Qh)),ys,!0),(function(e){return["CDataSection",e.join("")]})),Dd=Ll.preceded(Ll.peek(Ll.not(Zl(/["{}<&]/),['quotAttrValueContentChar cannot be ", {, }, <, or &'])),Qh),Rd=Ll.preceded(Ll.peek(Ll.not(Zl(/['{}<&]/),["aposAttrValueContentChar cannot be ', {, }, <, or &"])),Qh),kd=Ll.map(Ll.star(Ll.or([Ll.preceded(Ll.peek(Ll.not($s,[])),Qh),Ll.map(Jl([$s,Ll.peek(Ll.not($s,[]))],Qh),(function(e){return"-"+e}))])),(function(e){return e.join("")})),Ud=Ll.map(Ll.delimited(ws,kd,As,!0),(function(e){return["computedCommentConstructor",["argExpr",["stringConstantExpr",["value",e]]]]})),Md=Ll.filter(zh,(function(e){return"xml"!==e.toLowerCase()}),['A processing instruction target cannot be "xml"']),Hd=Ll.map(Ll.star(Ll.preceded(Ll.peek(Ll.not(bs,[])),Qh)),(function(e){return e.join("")})),Pd=Ll.then(Ll.preceded(xs,Ll.cut(Md)),Ll.cut(Ll.followed(Ll.optional(Ll.preceded(_h,Hd)),bs)),(function(e,t){return["computedPIConstructor",["piTarget",e],["piValueExpr",["stringConstantExpr",["value",t]]]]})),jd=Ll.map(ep,(function(){return["stepExpr",["xpathAxis","descendant-or-self"],["anyKindTest"]]})),Xd=Ll.or([cf,lf]),Ld=Ll.map(Ll.star(Ll.followed(Qh,Ll.peek(Ll.not(ns,["Pragma contents should not contain '#)'"])))),(function(e){return e.join("")})),Yd=Ll.map(Ll.followed(Ll.or([Op,Sp,Gp,Dp,Rp,kp]),pd),(function(e){return e+"Op"})),Qd=Ll.or([Ll.followed(Wl([Ep],"isOp"),pd),Wl([Ys],"nodeBeforeOp"),Wl([Ks],"nodeAfterOp")]),Jd=Ll.or([Wl([Ms],"equalOp"),Wl([Xs],"notEqualOp"),Wl([Qs],"lessThanOrEqualOp"),Wl([Ls],"lessThanOp"),Wl([qs],"greaterThanOrEqualOp"),Wl([Js],"greaterThanOp")]),Kd=Ll.map(Yf,(function(){return["annotation",["annotationName","updating"]]})),qd=Ll.or([yf,gf]),_d=Ll.or([vf,wf]),Vd=Ll.or([bh,Bh,Eh,Nh,Th,ks,Ih,Ch,Fh,Oh,Sh]),Wd=Ll.map(Jl([ff,Wh,df,Wh],Ll.or([yf,mf])),(function(e){return["boundarySpaceDecl",e]})),Zd=Ll.map(Jl([ff,Wh,_f,Wh],Ll.or([yf,mf])),(function(e){return["constructionDecl",e]})),$d=Ll.map(Jl([ff,Wh,Vf,Wh],Ll.or([Wf,Zf])),(function(e){return["orderingModeDecl",e]})),zd=Ll.map(Jl([ff,Wh,hf,Wh,$p,Wh,Yp,Wh],Ll.or([Af,xf])),(function(e){return["emptyOrderDecl",e]})),em=Ll.then(Jl([ff,Wh,bf,Wh],qd),Jl([Vh,_s,Vh],_d),(function(e,t){return["copyNamespacesDecl",["preserveMode",e],["inheritMode",t]]}));function tm(e){switch(e[0]){case"constantExpr":case"varRef":case"contextItemExpr":case"functionCallExpr":case"sequenceExpr":case"elementConstructor":case"computedElementConstructor":case"computedAttributeConstructor":case"computedDocumentConstructor":case"computedTextConstructor":case"computedCommentConstructor":case"computedNamespaceConstructor":case"computedPIConstructor":case"orderedExpr":case"unorderedExpr":case"namedFunctionRef":case"inlineFunctionExpr":case"dynamicFunctionInvocationExpr":case"mapConstructor":case"arrayConstructor":case"stringConstructor":case"unaryLookup":return e}return["sequenceExpr",e]}function nm(e){if(!(1<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e))throw Error("XQST0090: The character reference "+e+" ("+e.toString(16)+") does not reference a valid codePoint.")}function rm(e){return e.replace(/(&[^;]+);/g,(function(e){if(/^&#x/.test(e))return nm(e=parseInt(e.slice(3,-1),16)),String.fromCodePoint(e);if(/^&#/.test(e))return nm(e=parseInt(e.slice(2,-1),10)),String.fromCodePoint(e);switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return String.fromCharCode(34);case"&apos;":return String.fromCharCode(39)}throw Error('XPST0003: Unknown character reference: "'+e+'"')}))}function om(e,t,n){if(!e.length)return[];for(var r=[e[0]],o=1;o<e.length;++o){var a=r[r.length-1];"string"==typeof a&&"string"==typeof e[o]?r[r.length-1]=a+e[o]:r.push(e[o])}if("string"==typeof r[0]&&0===r.length)return[];if(!(r=r.reduce((function(e,t,o){if("string"!=typeof t)e.push(t);else if(n&&/^\s*$/.test(t)){var a=r[o+1];(a&&"CDataSection"===a[0]||(o=r[o-1])&&"CDataSection"===o[0])&&e.push(rm(t))}else e.push(rm(t));return e}),[])).length)return r;if(1<r.length||t)for(e=0;e<r.length;e++)"string"==typeof r[e]&&(r[e]=["stringConstantExpr",["value",r[e]]]);return r}function am(e){return e[0].prefix?e[0].prefix+":"+e[1]:e[1]}var um=Ll.then(cd,Ll.optional(Us),(function(e,t){return null!==t?["singleType",["atomicType"].concat(h(e)),["optional"]]:["singleType",["atomicType"].concat(h(e))]})),im=Ll.map(cd,(function(e){return["atomicType"].concat(h(e))})),cm=new Map;function lm(e){function t(e,t){return t.reduce((function(e,t){return[t[0],["firstOperand",e],["secondOperand",t[1]]]}),e)}function n(e,t,n){return Ll.then(e,Ll.star(Ll.then(Ql(t,Vh),Ll.cut(e),(function(e,t){return[e,t]}))),n)}function r(e,t,n,r){return n=void 0===n?"firstOperand":n,r=void 0===r?"secondOperand":r,Ll.then(e,Ll.optional(Ll.then(Ql(t,Vh),Ll.cut(e),(function(e,t){return[e,t]}))),(function(e,t){return null===t?e:[t[0],[n,e],[r,t[1]]]}))}function o(t){return e.vb?function(e,n){if(!(e=t(e,n)).success)return e;var r=l.has(n)?l.get(n):{offset:n,line:-1,ja:-1},o=l.has(e.offset)?l.get(e.offset):{offset:e.offset,line:-1,ja:-1};return l.set(n,r),l.set(e.offset,o),Ll.okWithValue(e.offset,["x:stackTrace",{start:r,end:o},e.value])}:t}function a(e,t){return Z(e,t)}function u(e,t){return Pe(e,t)}function i(e,t){return o(Ll.or([It,Dt,Lt,Ot,it,Pt,Rt,jt,kt,Mt,ut]))(e,t)}function c(e,t){return n(i,_s,(function(e,t){return 0===t.length?e:["sequenceExpr",e].concat(h(t.map((function(e){return e[1]}))))}))(e,t)}var l=new Map,s=Ll.preceded(as,Ll.followed(Ql(c,Vh),us)),f=Ll.map(e.Ya?Ll.or([Ql(Ll.star(Ll.or([dd,md,yd,Zl(/[^"&]/)])),hs),Ql(Ll.star(Ll.or([dd,md,gd,Zl(/[^'&]/)])),ps)]):Ll.or([Ql(Ll.star(Ll.or([yd,Zl(/[^"]/)])),hs),Ql(Ll.star(Ll.or([gd,Zl(/[^']/)])),ps)]),(function(e){return e.join("")})),d=Ll.or([Ll.map(Jl([gp,Vh],Ll.delimited(Ll.followed(rs,Vh),Ll.then(ld,Jl([Vh,_s,Vh],cd),(function(e,t){return[["elementName",e],["typeName"].concat(h(t))]})),Ll.preceded(Vh,os))),(function(e){var t=p(e);return["elementTest",e=t.next().value,t=t.next().value]})),Ll.map(Jl([gp,Vh],Ll.delimited(rs,ld,os)),(function(e){return["elementTest",["elementName",e]]})),Ll.map(Jl([gp,Vh],Ll.delimited(rs,Vh,os)),(function(){return["elementTest"]}))]),m=Ll.or([Ll.map(cd,(function(e){return["QName"].concat(h(e))})),Ll.map(Ss,(function(){return["star"]}))]),y=Ll.or([Ll.map(Jl([vp,Vh],Ll.delimited(Ll.followed(rs,Vh),Ll.then(m,Jl([Vh,_s,Vh],cd),(function(e,t){return[["attributeName",e],["typeName"].concat(h(t))]})),Ll.preceded(Vh,os))),(function(e){var t=p(e);return["attributeTest",e=t.next().value,t=t.next().value]})),Ll.map(Jl([vp,Vh],Ll.delimited(rs,m,os)),(function(e){return["attributeTest",["attributeName",e]]})),Ll.map(Jl([vp,Vh],Ll.delimited(rs,Vh,os)),(function(){return["attributeTest"]}))]),g=Ll.map(Jl([wp,Vh,rs],Ll.followed(cd,os)),(function(e){return["schemaElementTest"].concat(h(e))})),v=Ll.map(Ll.delimited(Gh,Ql(cd,Vh),os),(function(e){return["schemaAttributeTest"].concat(h(e))})),w=Ll.map(Ll.preceded(Dh,Ll.followed(Ql(Ll.optional(Ll.or([d,g])),Vh),os)),(function(e){return["documentTest"].concat(h(e?[e]:[]))})),A=Ll.or([Ll.map(Ll.preceded(Rh,Ll.followed(Ql(Ll.or([zh,f]),Vh),os)),(function(e){return["piTest",["piTarget",e]]})),Vl(Wl([kh],"piTest"))]),x=Ll.or([w,d,y,g,v,A,vd,wd,Ad,xd]),b=Ll.or([Ll.map(Ll.preceded(Ts,zh),(function(e){return["Wildcard",["star"],["NCName",e]]})),Vl(Wl([Ss],"Wildcard")),Ll.map(Ll.followed(ud,Ss),(function(e){return["Wildcard",["uri",e],["star"]]})),Ll.map(Ll.followed(zh,Ns),(function(e){return["Wildcard",["NCName",e],["star"]]}))]),B=Ll.or([b,Ll.map(cd,(function(e){return["nameTest"].concat(h(e))}))]),E=Ll.or([x,B]),N=Ll.then(Ll.optional(Gs),E,(function(e,t){return null!==e||"attributeTest"===t[0]||"schemaAttributeTest"===t[0]?["stepExpr",["xpathAxis","attribute"],t]:["stepExpr",["xpathAxis","child"],t]})),T=Ll.or([Ll.then(fd,E,(function(e,t){return["stepExpr",["xpathAxis",e],t]})),N]),I=Ll.map(Ws,(function(){return["stepExpr",["xpathAxis","parent"],["anyKindTest"]]})),C=Ll.or([Ll.then(hd,E,(function(e,t){return["stepExpr",["xpathAxis",e],t]})),I]),F=Ll.map(Ll.star(Ll.preceded(Vh,s)),(function(e){return 0<e.length?["predicates"].concat(h(e)):void 0})),O=Ll.then(Ll.or([C,T]),F,(function(e,t){return void 0===t?e:e.concat([t])})),S=Ll.or([Td,Ll.map(f,(function(t){return["stringConstantExpr",["value",e.Ya?rm(t):t]]}))]),G=Ll.or([Ll.delimited(rs,Ql(c,Vh),os),Ll.map(Ll.delimited(rs,Vh,os),(function(){return["sequenceExpr"]}))]),D=Ll.or([i,Fd]),R=Ll.map(Ll.delimited(rs,Ql(Ll.optional(Ll.then(D,Ll.star(Ll.preceded(Ql(_s,Vh),D)),(function(e,t){return[e].concat(h(t))}))),Vh),os),(function(e){return null!==e?e:[]})),k=Ll.preceded(Ll.not(Kl(Cd,Vh,rs,(function(){})),["cannot use reseved keyword for function names"]),Ll.then(cd,Ll.preceded(Vh,R),(function(e,t){return["functionCallExpr",["functionName"].concat(h(e)),null!==t?["arguments"].concat(h(t)):["arguments"]]}))),U=Ll.then(cd,Ll.preceded(Rs,Nd),(function(e,t){return["namedFunctionRef",["functionName"].concat(h(e)),t]})),M=Ll.delimited(is,Ql(Ll.optional(c),Vh),cs),H=Ll.map(M,(function(e){return e||["sequenceExpr"]})),P=Ll.or([Ll.map(Xh,(function(){return[["voidSequenceType"]]})),Ll.then(a,Ll.optional(Ll.preceded(Vh,Od)),(function(e,t){return[e].concat(h(null!==t?[["occurrenceIndicator",t]]:[]))}))]),j=Ll.then(Jl([ks,Vh],cd),Ll.optional(Ll.followed(Ll.then(Jl([rs,Vh],S),Ll.star(Jl([_s,Vh],S)),(function(e,t){return e.concat(t)})),os)),(function(e,t){return["annotation",["annotationName"].concat(h(e))].concat(h(t?["arguments",t]:[]))})),X=Ll.map(Jl([mp,Vh,rs,Vh,Ss,Vh],os),(function(){return["anyFunctionTest"]})),L=Ll.then(Jl([mp,Vh,rs,Vh],Ll.optional(n(P,_s,(function(e,t){return e.concat.apply(e,t.map((function(e){return e[1]})))})))),Jl([Vh,os,Wh,ap,Wh],P),(function(e,t){return["typedFunctionTest",["paramTypeList",["sequenceType"].concat(h(e||[]))],["sequenceType"].concat(h(t))]})),Y=Ll.then(Ll.star(j),Ll.or([X,L]),(function(e,t){return[t[0]].concat(h(e),h(t.slice(1)))})),Q=Ll.map(Jl([yp,Vh,rs,Vh,Ss,Vh],os),(function(){return["anyMapTest"]})),J=Ll.then(Jl([yp,Vh,rs,Vh],im),Jl([Vh,_s],Ll.followed(Ql(P,Vh),os)),(function(e,t){return["typedMapTest",e,["sequenceType"].concat(h(t))]})),K=Ll.or([Q,J]),q=Ll.map(Jl([tf,Vh,rs,Vh,Ss,Vh],os),(function(){return["anyArrayTest"]})),_=Ll.map(Jl([tf,Vh,rs],Ll.followed(Ql(P,Vh),os)),(function(e){return["typedArrayTest",["sequenceType"].concat(h(e))]})),V=Ll.or([q,_]),W=Ll.map(Ll.delimited(rs,Ql(a,Vh),os),(function(e){return["parenthesizedItemType",e]})),Z=Ll.or([x,Vl(Wl([jh],"anyItemType")),Y,K,V,im,W]),$=Ll.map(Jl([ap,Wh],P),(function(e){return["typeDeclaration"].concat(h(e))})),z=Ll.then(Ll.preceded(Ds,cd),Ll.optional(Ll.preceded(Wh,$)),(function(e,t){return["param",["varName"].concat(h(e))].concat(h(t?[t]:[]))})),ee=n(z,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),te=ql(Ll.star(j),Jl([Vh,mp,Vh,rs,Vh],Ll.optional(ee)),Jl([Vh,os,Vh],Ll.optional(Ll.map(Jl([ap,Vh],Ll.followed(P,Vh)),(function(e){return["typeDeclaration"].concat(h(e))})))),H,(function(e,t,n,r){return["inlineFunctionExpr"].concat(h(e),[["paramList"].concat(h(t||[]))],h(n?[n]:[]),[["functionBody",r]])})),ne=Ll.or([U,te]),re=Ll.map(i,(function(e){return["mapKeyExpr",e]})),oe=Ll.map(i,(function(e){return["mapValueExpr",e]})),ae=Ll.then(re,Ll.preceded(Ql(Fs,Vh),oe),(function(e,t){return["mapConstructorEntry",e,t]})),ue=Ll.preceded(yp,Ll.delimited(Ql(is,Vh),Ll.map(Ll.optional(n(ae,Ql(_s,Vh),(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))}))),(function(e){return e?["mapConstructor"].concat(h(e)):["mapConstructor"]})),Ll.preceded(Vh,cs))),ie=Ll.map(Ll.delimited(as,Ql(Ll.optional(n(i,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]})))).map((function(e){return["arrayElem",e]}))}))),Vh),us),(function(e){return["squareArray"].concat(h(null!==e?e:[]))})),ce=Ll.map(Ll.preceded(tf,Ll.preceded(Vh,M)),(function(e){return["curlyArray"].concat(h(null!==e?[["arrayElem",e]]:[]))})),le=Ll.map(Ll.or([ie,ce]),(function(e){return["arrayConstructor",e]})),se=Ll.or([zh,Nd,G,Ss]),pe=Ll.map(Ll.preceded(Us,Ll.preceded(Vh,se)),(function(e){return"*"===e?["unaryLookup",["star"]]:"string"==typeof e?["unaryLookup",["NCName",e]]:["unaryLookup",e]})),fe=Ll.or([dd,md,Wl([ls],"{"),Wl([ss],"}"),Ll.map(M,(function(e){return e||["sequenceExpr"]}))]),he=Ll.or([Gd,function(e,t){return Ae(e,t)},fe,Sd]),de=Ll.or([Ll.map(Dd,(function(e){return e.replace(/[\x20\x0D\x0A\x09]/g," ")})),fe]),me=Ll.or([Ll.map(Rd,(function(e){return e.replace(/[\x20\x0D\x0A\x09]/g," ")})),fe]),ye=Ll.map(Ll.or([Ql(Ll.star(Ll.or([yd,de])),hs),Ql(Ll.star(Ll.or([gd,me])),ps)]),(function(e){return om(e,!1,!1)})),ge=Ll.then(ad,Ll.preceded(Ql(Ms,Ll.optional(_h)),ye),(function(e,t){if(""===e[0].prefix&&"xmlns"===e[1]){if(t.length&&"string"!=typeof t[0])throw Error("XQST0022: A namespace declaration may not contain enclosed expressions");return["namespaceDeclaration",t.length?["uri",t[0]]:["uri"]]}if("xmlns"===e[0].prefix){if(t.length&&"string"!=typeof t[0])throw Error("XQST0022: The namespace declaration for 'xmlns:"+e[1]+"' may not contain enclosed expressions");return["namespaceDeclaration",["prefix",e[1]],t.length?["uri",t[0]]:["uri"]]}return["attributeConstructor",["attributeName"].concat(e),0===t.length?["attributeValue"]:1===t.length&&"string"==typeof t[0]?["attributeValue",t[0]]:["attributeValueExpr"].concat(t)]})),ve=Ll.map(Ll.star(Ll.preceded(_h,Ll.optional(ge))),(function(e){return e.filter(Boolean)})),we=Kl(Ll.preceded(Ls,ad),ve,Ll.or([Ll.map(gs,(function(){return null})),Ll.then(Ll.preceded(Js,Ll.star(he)),Jl([Vh,vs],Ll.followed(ad,Ll.then(Ll.optional(_h),Js,(function(){return null})))),(function(e,t){return[om(e,!0,!0),t]}))]),(function(e,t,n){var r=n;if(n&&n.length){r=am(e);var o=am(n[1]);if(r!==o)throw Error('XQST0118: The start and the end tag of an element constructor must be equal. "'+r+'" does not match "'+o+'"');r=n[0]}return["elementConstructor",["tagName"].concat(h(e))].concat(h(t.length?[["attributeList"].concat(h(t))]:[]),h(r&&r.length?[["elementContent"].concat(h(r))]:[]))})),Ae=Ll.or([we,Ud,Pd]),xe=Ll.map(Jl([nf,Vh],M),(function(e){return["computedDocumentConstructor"].concat(h(e?[["argExpr",e]]:[]))})),be=Ll.map(M,(function(e){return e?[["contentExpr",e]]:[]})),Be=Ll.then(Jl([gp,Vh],Ll.or([Ll.map(cd,(function(e){return["tagName"].concat(h(e))})),Ll.map(Ll.delimited(is,Ql(c,Vh),cs),(function(e){return["tagNameExpr",e]}))])),Ll.preceded(Vh,be),(function(e,t){return["computedElementConstructor",e].concat(h(t))})),Ee=Ll.then(Ll.preceded(vp,Ll.or([Ll.map(Jl([pd,Vh],cd),(function(e){return["tagName"].concat(h(e))})),Ll.map(Ll.preceded(Vh,Ll.delimited(is,Ql(c,Vh),cs)),(function(e){return["tagNameExpr",e]}))])),Ll.preceded(Vh,M),(function(e,t){return["computedAttributeConstructor",e,["valueExpr",t||["sequenceExpr"]]]})),Ne=Ll.map(M,(function(e){return e?[["prefixExpr",e]]:[]})),Te=Ll.map(M,(function(e){return e?[["URIExpr",e]]:[]})),Ie=Ll.then(Jl([rf,Vh],Ll.or([ed,Ne])),Ll.preceded(Vh,Te),(function(e,t){return["computedNamespaceConstructor"].concat(h(e),h(t))})),Ce=Ll.map(Jl([of,Vh],M),(function(e){return["computedTextConstructor"].concat(h(e?[["argExpr",e]]:[]))})),Fe=Ll.map(Jl([af,Vh],M),(function(e){return["computedCommentConstructor"].concat(h(e?[["argExpr",e]]:[]))})),Oe=Jl([uf,Vh],Ll.then(Ll.or([Ll.map(zh,(function(e){return["piTarget",e]})),Ll.map(Ll.delimited(is,Ql(c,Vh),cs),(function(e){return["piTargetExpr",e]}))]),Ll.preceded(Vh,M),(function(e,t){return["computedPIConstructor",e].concat(h(t?[["piValueExpr",t]]:[]))}))),Se=Ll.or([xe,Be,Ee,Ie,Ce,Fe,Oe]),Ge=Ll.or([Ae,Se]),De=Ll.or([S,sd,G,Id,k,Ge,ne,ue,le,pe]),Re=Ll.map(Jl([Us,Vh],se),(function(e){return"*"===e?["lookup",["star"]]:"string"==typeof e?["lookup",["NCName",e]]:["lookup",e]})),ke=Ll.then(Ll.map(De,(function(e){return tm(e)})),Ll.star(Ll.or([Ll.map(Ll.preceded(Vh,s),(function(e){return["predicate",e]})),Ll.map(Ll.preceded(Vh,R),(function(e){return["argumentList",e]})),Ll.preceded(Vh,Re)])),(function(e,t){function n(){i&&1===a.length?u.push(["predicate",a[0]]):0!==a.length&&u.push(["predicates"].concat(h(a))),a.length=0}function r(e){n(),0!==u.length?("sequenceExpr"===o[0][0]&&2<o[0].length&&(o=[["sequenceExpr"].concat(h(o))]),o=[["filterExpr"].concat(h(o))].concat(h(u)),u.length=0):e&&(o=[["filterExpr"].concat(h(o))])}var o=[e],a=[],u=[],i=!1;for(t=(e=p(t)).next();!t.done;t=e.next())switch(t=t.value,t[0]){case"predicate":a.push(t[1]);break;case"lookup":i=!0,n(),u.push(t);break;case"argumentList":r(!1),1<o.length&&(o=[["sequenceExpr",["pathExpr",["stepExpr"].concat(h(o))]]]),o=[["dynamicFunctionInvocationExpr",["functionItem"].concat(h(o))].concat(h(t[1].length?[["arguments"].concat(h(t[1]))]:[]))];break;default:throw Error("unreachable")}return r(!0),o})),Ue=Ll.or([Ll.map(ke,(function(e){return["stepExpr"].concat(h(e))})),O]),Me=Ll.followed(De,Ll.peek(Ll.not(Ll.preceded(Vh,Ll.or([s,R,Re])),["primary expression not followed by predicate, argumentList, or lookup"]))),He=Ll.or([Kl(Ue,Ll.preceded(Vh,jd),Ll.preceded(Vh,u),(function(e,t,n){return["pathExpr",e,t].concat(h(n))})),Ll.then(Ue,Ll.preceded(Ql(zs,Vh),u),(function(e,t){return["pathExpr",e].concat(h(t))})),Me,Ll.map(Ue,(function(e){return["pathExpr",e]}))]),Pe=Ll.or([Kl(Ue,Ll.preceded(Vh,jd),Ll.preceded(Vh,u),(function(e,t,n){return[e,t].concat(h(n))})),Ll.then(Ue,Ll.preceded(Ql(zs,Vh),u),(function(e,t){return[e].concat(h(t))})),Ll.map(Ue,(function(e){return[e]}))]),je=Ll.or([Ll.map(Jl([zs,Vh],Pe),(function(e){return["pathExpr",["rootExpr"]].concat(h(e))})),Ll.then(jd,Ll.preceded(Vh,Pe),(function(e,t){return["pathExpr",["rootExpr"],e].concat(h(t))})),Ll.map(Ll.followed(zs,Ll.not(Ll.preceded(Vh,e.Ya?Zl(/[*<a-zA-Z]/):Zl(/[*a-zA-Z]/)),["Single rootExpr cannot be by followed by something that can be interpreted as a relative path"])),(function(){return["pathExpr",["rootExpr"]]}))]),Xe=Yl(Ll.or([He,je]),cm),Le=Ll.preceded(sf,Ll.then(Ll.optional(Ll.or([Ll.map(Ll.preceded(Vh,Xd),(function(e){return["validationMode",e]})),Ll.map(Jl([Vh,pf,Vh],cd),(function(e){return["type"].concat(h(e))}))])),Ll.delimited(Ll.preceded(Vh,is),Ql(c,Vh),cs),(function(e,t){return["validateExpr"].concat(h(e?[e]:[]),[["argExpr",t]])}))),Ye=Ll.delimited(ts,Ll.then(Ll.preceded(Vh,cd),Ll.optional(Ll.preceded(Wh,Ld)),(function(e,t){return t?["pragma",["pragmaName",e],["pragmaContents",t]]:["pragma",["pragmaName",e]]})),Ll.preceded(Vh,ns)),Qe=Ll.map(Ll.followed(Ll.plus(Ye),Ll.preceded(Vh,Ll.delimited(is,Ql(Ll.optional(c),Vh),cs))),(function(e){return["extensionExpr"].concat(h(e))})),Je=o(n(Xe,Hs,(function(e,t){return 0===t.length?e:["simpleMapExpr","pathExpr"===e[0]?e:["pathExpr",["stepExpr",["filterExpr",tm(e)]]]].concat(t.map((function(e){return"pathExpr"===(e=e[1])[0]?e:["pathExpr",["stepExpr",["filterExpr",tm(e)]]]})))}))),Ke=Ll.or([Le,Qe,Je]),qe=Ll.or([Ll.then(Ll.or([Wl([$s],"unaryMinusOp"),Wl([Zs],"unaryPlusOp")]),Ll.preceded(Vh,(function(e,t){return qe(e,t)})),(function(e,t){return[e,["operand",t]]})),Ke]),_e=Ll.or([Ll.map(cd,(function(e){return["EQName"].concat(h(e))})),sd,G]),Ve=Ll.then(qe,Ll.star(Jl([Vh,tp,Vh],Ll.then(_e,Ll.preceded(Vh,R),(function(e,t){return[e,t]})))),(function(e,t){return t.reduce((function(e,t){return["arrowExpr",["argExpr",e],t[0],["arguments"].concat(h(t[1]))]}),e)})),We=Ll.then(Ve,Ll.optional(Jl([Vh,up,Wh,ap,pd,Vh],um)),(function(e,t){return null!==t?["castExpr",["argExpr",e],t]:e})),Ze=Ll.then(We,Ll.optional(Jl([Vh,ip,Wh,ap,pd,Vh],um)),(function(e,t){return null!==t?["castableExpr",["argExpr",e],t]:e})),$e=Ll.then(Ze,Ll.optional(Jl([Vh,cp,Wh,ap,pd,Vh],P)),(function(e,t){return null!==t?["treatExpr",["argExpr",e],["sequenceType"].concat(h(t))]:e})),ze=Ll.then($e,Ll.optional(Jl([Vh,lp,Wh,sp,pd,Vh],P)),(function(e,t){return null!==t?["instanceOfExpr",["argExpr",e],["sequenceType"].concat(h(t))]:e})),et=n(ze,Ll.followed(Ll.or([Wl([Ap],"intersectOp"),Wl([xp],"exceptOp")]),pd),t),tt=n(et,Ll.or([Wl([Ps],"unionOp"),Ll.followed(Wl([bp],"unionOp"),pd)]),t),nt=n(tt,Ll.or([Wl([Ss],"multiplyOp"),Ll.followed(Wl([Ip],"divOp"),pd),Ll.followed(Wl([Cp],"idivOp"),pd),Ll.followed(Wl([Fp],"modOp"),pd)]),t),rt=n(nt,Ll.or([Wl([$s],"subtractOp"),Wl([Zs],"addOp")]),t),ot=n(r(rt,Ll.followed(Wl([Bp],"rangeSequenceExpr"),pd),"startExpr","endExpr"),Wl([js],"stringConcatenateOp"),t),at=n(r(ot,Ll.or([Yd,Qd,Jd])),Ll.followed(Wl([Tp],"andOp"),pd),t),ut=n(at,Ll.followed(Wl([Np],"orOp"),pd),t),it=Ll.then(Ll.then(Jl([Pp,Vh,rs,Vh],c),Jl([Vh,os,Vh,jp,pd,Vh],i),(function(e,t){return[e,t]})),Jl([Vh,Xp,pd,Vh],i),(function(e,t){return["ifThenElseExpr",["ifClause",e[0]],["thenClause",e[1]],["elseClause",t]]})),ct=Ll.delimited(Lp,Wh,Yp),lt=Ll.map(Jl([Qp,Wh,Ds],cd),(function(e){return["positionalVariableBinding"].concat(h(e))})),st=_l(Ll.preceded(Ds,Ll.cut(cd)),Ll.cut(Ll.preceded(Vh,Ll.optional($))),Ll.cut(Ll.preceded(Vh,Ll.optional(ct))),Ll.cut(Ll.preceded(Vh,Ll.optional(lt))),Ll.cut(Ll.preceded(Ql(Jp,Vh),i)),(function(e,t,n,r,o){return["forClauseItem",["typedVariableBinding",["varName"].concat(h(e),h(t?[t]:[]))]].concat(h(n?[["allowingEmpty"]]:[]),h(r?[r]:[]),[["forExpr",o]])})),pt=Jl([Kp,Wh],n(st,_s,(function(e,t){return["forClause",e].concat(h(t.map((function(e){return e[1]}))))}))),ft=Kl(Ll.preceded(Ds,cd),Ll.preceded(Vh,Ll.optional($)),Ll.preceded(Ql(Is,Vh),i),(function(e,t,n){return["letClauseItem",["typedVariableBinding",["varName"].concat(h(e))].concat(h(t?[t]:[])),["letExpr",n]]})),ht=Ll.map(Jl([qp,Vh],n(ft,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))}))),(function(e){return["letClause"].concat(h(e))})),dt=Ll.or([pt,ht]),mt=Ll.map(Jl([_p,pd,Vh],i),(function(e){return["whereClause",e]})),yt=Ll.map(Ll.preceded(Ds,cd),(function(e){return["varName"].concat(h(e))})),gt=Ll.then(Ll.preceded(Vh,Ll.optional($)),Ll.preceded(Ql(Is,Vh),i),(function(e,t){return["groupVarInitialize"].concat(h(e?[["typeDeclaration"].concat(h(e))]:[]),[["varValue",t]])})),vt=Kl(yt,Ll.optional(gt),Ll.optional(Ll.map(Ll.preceded(Ql(Vp,Vh),f),(function(e){return["collation",e]}))),(function(e,t,n){return["groupingSpec",e].concat(h(t?[t]:[]),h(n?[n]:[]))})),wt=n(vt,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),At=Ll.map(Jl([Wp,Wh,Zp,Vh],wt),(function(e){return["groupByClause"].concat(h(e))})),xt=Kl(Ll.optional(Ll.or([ih,ch])),Ll.optional(Jl([Vh,Yp,Vh],Ll.or([Af,xf].map((function(e){return Ll.map(e,(function(e){return"empty "+e}))}))))),Ll.preceded(Vh,Ll.optional(Jl([Vp,Vh],f))),(function(e,t,n){return e||t||n?["orderModifier"].concat(h(e?[["orderingKind",e]]:[]),h(t?[["emptyOrderingMode",t]]:[]),h(n?[["collation",n]]:[])):null})),bt=Ll.then(i,Ll.preceded(Vh,xt),(function(e,t){return["orderBySpec",["orderByExpr",e]].concat(h(t?[t]:[]))})),Bt=n(bt,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),Et=Ll.then(Ll.or([Ll.map(Jl([$p,Wh],Zp),(function(){return!1})),Ll.map(Jl([zp,Wh,$p,Wh],Zp),(function(){return!0}))]),Ll.preceded(Vh,Bt),(function(e,t){return["orderByClause"].concat(h(e?[["stable"]]:[]),h(t))})),Nt=Ll.or([dt,mt,At,Et]),Tt=Ll.map(Jl([ef,Vh],i),(function(e){return["returnClause",e]})),It=Kl(dt,Ll.cut(Ll.star(Ll.preceded(Vh,Nt))),Ll.cut(Ll.preceded(Vh,Tt)),(function(e,t,n){return["flworExpr",e].concat(h(t),[n])})),Ct=n(P,Ps,(function(e,t){return 0===t.length?["sequenceType"].concat(h(e)):["sequenceTypeUnion",["sequenceType"].concat(h(e))].concat(h(t.map((function(e){return["sequenceType"].concat(h(e[1]))}))))})),Ft=Kl(Jl([Ef,Vh],Ll.optional(Ll.preceded(Ds,Ll.followed(Ll.followed(cd,Wh),ap)))),Ll.preceded(Vh,Ct),Jl([Wh,ef,Wh],i),(function(e,t,n){return["typeswitchExprCaseClause"].concat(e?[["variableBinding"].concat(h(e))]:[],[t],[["resultExpr",n]])})),Ot=ql(Ll.preceded(Nf,Ql(Ll.delimited(rs,Ql(c,Vh),os),Vh)),Ll.plus(Ll.followed(Ft,Vh)),Jl([hf,Wh],Ll.optional(Ll.preceded(Ds,Ll.followed(cd,Wh)))),Jl([ef,Wh],i),(function(e,t,n,r){return["typeswitchExpr",["argExpr",e]].concat(h(t),[["typeswitchExprDefaultClause"].concat(h(n||[]),[["resultExpr",r]])])})),St=Kl(Ll.preceded(Ds,cd),Ll.optional(Ll.preceded(Wh,$)),Ll.preceded(Ql(Jp,Wh),i),(function(e,t,n){return["quantifiedExprInClause",["typedVariableBinding",["varName"].concat(h(e))].concat(h(t?[t]:[])),["sourceExpr",n]]})),Gt=n(St,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),Dt=Kl(Ll.or([Tf,If]),Ll.preceded(Wh,Gt),Ll.preceded(Ql(Cf,Vh),i),(function(e,t,n){return["quantifiedExpr",["quantifier",e]].concat(h(t),[["predicateExpr",n]])})),Rt=Ll.map(Jl([hp,Wh,Ll.or([fp,pp]),Wh],i),(function(e){return["deleteExpr",["targetExpr",e]]})),kt=Kl(Jl([Ff,Wh],Ll.optional(Jl([dp,Wh,sp],Wh))),Jl([pp,Wh],i),Ll.preceded(Ql(Of,Wh),i),(function(e,t,n){return e?["replaceExpr",["replaceValue"],["targetExpr",t],["replacementExpr",n]]:["replaceExpr",["targetExpr",t],["replacementExpr",n]]})),Ut=Ll.then(sd,Ll.preceded(Ql(Is,Vh),i),(function(e,t){return["transformCopy",e,["copySource",t]]})),Mt=Kl(Jl([Sf,Wh],n(Ut,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))}))),Jl([Vh,Gf,Wh],i),Ll.preceded(Ql(ef,Wh),i),(function(e,t,n){return["transformExpr",["transformCopies"].concat(h(e)),["modifyExpr",t],["returnExpr",n]]})),Ht=Ll.or([Ll.followed(Ll.map(Ll.optional(Ll.followed(Jl([ap,Wh],Ll.or([Ll.map(Df,(function(){return["insertAsFirst"]})),Ll.map(Rf,(function(){return["insertAsLast"]}))])),Wh)),(function(e){return e?["insertInto",e]:["insertInto"]})),Mf),Ll.map(Uf,(function(){return["insertAfter"]})),Ll.map(kf,(function(){return["insertBefore"]}))]),Pt=Kl(Jl([Hf,Wh,Ll.or([fp,pp]),Wh],i),Ll.preceded(Wh,Ht),Ll.preceded(Wh,i),(function(e,t,n){return["insertExpr",["sourceExpr",e],t,["targetExpr",n]]})),jt=Ll.then(Jl([Pf,Wh,pp,Vh],i),Jl([Wh,ap,Wh],i),(function(e,t){return["renameExpr",["targetExpr",e],["newNameExpr",t]]})),Xt=Ll.then(Ll.plus(Ll.map(Jl([Ef,Wh],i),(function(e){return["switchCaseExpr",e]}))),Jl([Wh,ef,Wh],i),(function(e,t){return["switchExprCaseClause"].concat(h(e),[["resultExpr",t]])})),Lt=Kl(Jl([jf,Vh,rs],c),Jl([Vh,os,Vh],Ll.plus(Ll.followed(Xt,Vh))),Jl([hf,Wh,ef,Wh],i),(function(e,t,n){return["switchExpr",["argExpr",e]].concat(h(t),[["switchExprDefaultClause",["resultExpr",n]]])})),Yt=Ll.map(c,(function(e){return["queryBody",e]})),Qt=Jl([ff,Wh,rf,Wh],Ll.cut(Ll.then(zh,Ll.preceded(Ql(Ms,Vh),f),(function(e,t){return["namespaceDecl",["prefix",e],["uri",t]]})))),Jt=Ll.then(Jl([Xf,Wh,Ds,Vh],Ll.then(cd,Ll.optional(Ll.preceded(Vh,$)),(function(e,t){return[e,t]}))),Ll.cut(Ll.or([Ll.map(Jl([Vh,Is,Vh],i),(function(e){return["varValue",e]})),Ll.map(Jl([Wh,Lf],Ll.optional(Jl([Vh,Is,Vh],i))),(function(e){return["external"].concat(h(e?[["varValue",e]]:[]))}))])),(function(e,t){var n=p(e);return e=n.next().value,n=n.next().value,["varDecl",["varName"].concat(h(e))].concat(h(null!==n?[n]:[]),[t])})),Kt=ql(Jl([mp,Wh,Ll.peek(Ll.not(Cd,["Cannot use reserved function name"]))],cd),Ll.cut(Jl([Vh,rs,Vh],Ll.optional(ee))),Ll.cut(Jl([Vh,os],Ll.optional(Jl([Wh,ap,Wh],P)))),Ll.cut(Ll.preceded(Vh,Ll.or([Ll.map(H,(function(e){return["functionBody",e]})),Ll.map(Lf,(function(){return["externalDefinition"]}))]))),(function(e,t,n,r){return["functionDecl",["functionName"].concat(h(e)),["paramList"].concat(h(t||[]))].concat(h(n?[["typeDeclaration"].concat(h(n))]:[]),[r])})),qt=Jl([ff,Wh],Ll.then(Ll.star(Ll.followed(Ll.or([j,Kd]),Wh)),Ll.or([Jt,Kt]),(function(e,t){return[t[0]].concat(h(e),h(t.slice(1)))}))),_t=Ll.then(Jl([ff,Wh,hf,Wh],Ll.or([gp,mp])),Jl([Wh,rf,Wh],f),(function(e,t){return["defaultNamespaceDecl",["defaultNamespaceCategory",e],["uri",t]]})),Vt=Ll.or([Ll.map(Ll.followed(Jl([rf,Wh],zh),Ll.preceded(Vh,Ms)),(function(e){return["namespacePrefix",e]})),Ll.map(Jl([hf,Wh,gp,Wh],rf),(function(){return["defaultElementNamespace"]}))]),Wt=Jl([Qf,Wh,Jf],Kl(Ll.optional(Ll.preceded(Wh,Vt)),Ll.preceded(Vh,f),Ll.optional(Ll.then(Jl([Wh,Qp,Wh],f),Ll.star(Jl([Vh,_s,Vh],f)),(function(e,t){return[e].concat(h(t))}))),(function(e,t,n){return["schemaImport"].concat(h(e?[e]:[]),[["targetNamespace",t]],h(n?[n]:[]))}))),Zt=Jl([Qf,Wh,Kf],Kl(Ll.optional(Ll.followed(Jl([Wh,rf,Wh],zh),Ll.preceded(Vh,Ms))),Ll.preceded(Vh,f),Ll.optional(Ll.then(Jl([Wh,Qp,Wh],f),Ll.star(Jl([Vh,_s,Vh],f)),(function(e,t){return[e].concat(h(t))}))),(function(e,t){return["moduleImport",["namespacePrefix",e],["targetNamespace",t]]}))),$t=Ll.or([Wt,Zt]),zt=Ll.map(Jl([ff,Wh,hf,Wh,Vp,Wh],f),(function(e){return["defaultCollationDecl",e]})),en=Ll.map(Jl([ff,Wh,qf,Wh],f),(function(e){return["baseUriDecl",e]})),tn=Ll.then(Jl([ff,Wh],Ll.or([Ll.map(Jl([Bf,Wh],cd),(function(e){return["decimalFormatName"].concat(h(e))})),Ll.map(Jl([hf,Wh],Bf),(function(){return null}))])),Ll.star(Ll.then(Ll.preceded(Wh,Vd),Ll.preceded(Ql(Ms,Wh),f),(function(e,t){return["decimalFormatParam",["decimalFormatParamName",e],["decimalFormatParamValue",t]]}))),(function(e,t){return["decimalFormatDecl"].concat(h(e?[e]:[]),h(t))})),nn=Ll.or([Wd,zt,en,Zd,$d,zd,em,tn]),rn=Ll.then(Jl([ff,Wh,$f,Wh],cd),Ll.preceded(Wh,f),(function(e,t){return["optionDecl",["optionName",e],["optionContents",t]]})),on=Ll.then(Jl([ff,Wh,zf,Wh,eh],Ll.optional(Jl([Wh,ap],Z))),Ll.or([Ll.map(Ll.preceded(Ql(Is,Vh),i),(function(e){return["varValue",e]})),Ll.map(Jl([Wh,Lf],Ll.optional(Ll.preceded(Ql(Is,Vh),i))),(function(){return["external"]}))]),(function(e,t){return["contextItemDecl"].concat(h(e?[["contextItemType",e]]:[]),[t])})),an=Ll.then(Ll.star(Ll.followed(Ll.or([_t,nn,Qt,$t]),Ll.cut(Ql(Os,Vh)))),Ll.star(Ll.followed(Ll.or([on,qt,rn]),Ll.cut(Ql(Os,Vh)))),(function(e,t){return 0===e.length&&0===t.length?null:["prolog"].concat(h(e),h(t))})),un=Jl([Kf,Wh,rf,Wh],Ll.then(Ll.followed(zh,Ql(Ms,Vh)),Ll.followed(f,Ql(Os,Vh)),(function(e,t){return["moduleDecl",["prefix",e],["uri",t]]}))),cn=Ll.then(un,Ll.preceded(Vh,an),(function(e,t){return["libraryModule",e].concat(h(t?[t]:[]))})),ln=Ll.then(an,Ll.preceded(Vh,Yt),(function(e,t){return["mainModule"].concat(h(e?[e]:[]),[t])})),sn=Ll.map(Jl([th,Vh],Ll.followed(Ll.or([Ll.then(Ll.preceded(rh,Wh),f,(function(e){return["encoding",e]})),Ll.then(Jl([nh,Wh],f),Ll.optional(Jl([Wh,rh,Wh],f)),(function(e,t){return[["version",e]].concat(h(t?[["encoding",t]]:[]))}))]),Ll.preceded(Vh,Os))),(function(e){return["versionDecl"].concat(h(e))})),pn=Ll.then(Ll.optional(Ql(sn,Vh)),Ll.or([cn,ln]),(function(e,t){return["module"].concat(h(e?[e]:[]),[t])})),fn=Ll.complete(Ql(pn,Vh));return function(e,t){l.clear(),t=fn(e,t);for(var n=1,r=1,o=0;o<e.length+1;o++){if(l.has(o)){var a=l.get(o);a.line=r,a.ja=n}"\r"===(a=e[o])||"\n"===a?(r++,n=1):n++}return t}}var sm=lm({vb:!1,Ya:!1}),pm=lm({vb:!0,Ya:!1}),fm=lm({vb:!1,Ya:!0}),hm=lm({vb:!0,Ya:!0});function dm(e,t){var n=!!t.$;if(t=!!t.debug,Lh.clear(),Yh.clear(),cm.clear(),!0===(n=n?t?hm(e,0):fm(e,0):t?pm(e,0):sm(e,0)).success)return n.value;throw t=(e=e.substring(0,n.offset).split("\n"))[e.length-1].length+1,new ti({start:{offset:n.offset,line:e.length,ja:t},end:{offset:n.offset+1,line:e.length,ja:t+1}},"",Error("XPST0003: Failed to parse script. Expected "+[].concat(h(new Set(n.expected)))))}var mm="http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/XMLSchema http://www.w3.org/2001/XMLSchema-instance http://www.w3.org/2005/xpath-functions http://www.w3.org/2005/xpath-functions/math http://www.w3.org/2012/xquery http://www.w3.org/2005/xpath-functions/array http://www.w3.org/2005/xpath-functions/map".split(" ");function ym(e,t,n,r,o){var a=Pa(e,"functionName"),u=Xa(a,"prefix")||"",i=Xa(a,"URI"),c=ja(a);if(null===i&&!(i=""===u?null===t.v?"http://www.w3.org/2005/xpath-functions":t.v:t.aa(u))&&u)throw Ia(u);if(mm.includes(i))throw ba();if(a=(u=Ya(e,"annotation").map((function(e){return Pa(e,"annotationName")}))).every((function(e){return!Xa(e,"URI")&&"private"!==ja(e)})),u=u.some((function(e){return!Xa(e,"URI")&&"updating"===ja(e)})),!i)throw Ba();var l=Ja(e),s=Ya(Pa(e,"paramList"),"param"),p=s.map((function(e){return Pa(e,"varName")})),f=s.map((function(e){return Ja(e)}));if(e=Pa(e,"functionBody")){if(t.xa(i,c,f.length))throw Error("XQST0049: The function Q{"+i+"}"+c+"#"+f.length+" has already been declared.");if(!o)return;var d=Sl(e[1],{ua:!1,$:!0}),m=new Oa(t),y=p.map((function(e){var n=Xa(e,"URI"),r=Xa(e,"prefix");return e=ja(e),r&&null===n&&(n=t.aa(r||"")),Ua(m,n,e)}));o=u?{j:f,arity:p.length,callFunction:function(e,t,n){var r=O.apply(3,arguments),o=jt(Pt(e,-1,null,Ie.empty()),y.reduce((function(e,t,n){return e[t]=Ce(r[n]),e}),Object.create(null)));return d.s(o,t)},Eb:!1,I:!0,hb:a,localName:c,namespaceURI:i,i:l}:{j:f,arity:p.length,callFunction:function(e,t,n){var r=O.apply(3,arguments),o=jt(Pt(e,-1,null,Ie.empty()),y.reduce((function(e,t,n){return e[t]=Ce(r[n]),e}),Object.create(null)));return io(d,o,t)},Eb:!1,I:!1,hb:a,localName:c,namespaceURI:i,i:l},n.push({ca:d,Mb:m}),r.push({arity:p.length,ca:d,Ib:o,localName:c,namespaceURI:i,hb:a})}else{if(u)throw Error("Updating external function declarations are not supported");o={j:f,arity:p.length,callFunction:function(e,t,n){var r=O.apply(3,arguments),o=n.xa(i,c,p.length,!0);if(!o)throw Error("XPST0017: Function Q{"+i+"}"+c+" with arity of "+p.length+" not registered. "+ha(c));if(o.i.type!==l.type||o.j.some((function(e,t){return e.type!==f[t].type})))throw Error("External function declaration types do not match actual function");return o.callFunction.apply(o,[e,t,n].concat(h(r)))},Eb:!0,I:!1,localName:c,namespaceURI:i,hb:a,i:l}}Ra(t,i,c,p.length,o)}function gm(e,t,n,r){var o=[],a=[];Ya(e,"*").forEach((function(e){switch(e[0]){case"moduleImport":case"namespaceDecl":case"defaultNamespaceDecl":case"functionDecl":case"varDecl":break;default:throw Error("Not implemented: only module imports, namespace declarations, and function declarations are implemented in XQuery modules")}}));var u=new Set;Ya(e,"moduleImport").forEach((function(e){var n=ja(Pa(e,"namespacePrefix"));if(e=ja(Pa(e,"targetNamespace")),u.has(e))throw Error('XQST0047: The namespace "'+e+'" is imported more than once.');u.add(e),ka(t,n,e)})),Ya(e,"namespaceDecl").forEach((function(e){var n=ja(Pa(e,"prefix"));if(e=ja(Pa(e,"uri")),"xml"===n||"xmlns"===n)throw Na();if("http://www.w3.org/XML/1998/namespace"===e||"http://www.w3.org/2000/xmlns/"===e)throw Na();ka(t,n,e)}));for(var i=null,c=null,l=p(Ya(e,"defaultNamespaceDecl")),s=l.next();!s.done;s=l.next()){var f=s.value;if(s=ja(Pa(f,"defaultNamespaceCategory")),!(f=ja(Pa(f,"uri"))))throw Ba();if("http://www.w3.org/XML/1998/namespace"===f||"http://www.w3.org/2000/xmlns/"===f)throw Na();if("function"===s){if(i)throw Ea();i=f}else if("element"===s){if(c)throw Ea();c=f}}i&&(t.v=i),c&&ka(t,"",c),Ya(e,"functionDecl").forEach((function(e){ym(e,t,o,a,n)}));var h=[];return Ya(e,"varDecl").forEach((function(e){var r=Qa(Pa(e,"varName")),a=r.namespaceURI;if(null===a&&!(a=t.aa(r.prefix))&&r.prefix)throw Ia(r.prefix);if(mm.includes(a))throw ba();var u,i,c=Pa(e,"external");if(e=Pa(e,"varValue"),null!==c?null!==(c=Pa(c,"varValue"))&&(u=Pa(c,"*")):null!==e&&(u=Pa(e,"*")),h.some((function(e){return e.namespaceURI===a&&e.localName===r.localName})))throw Error("XQST0049: The variable "+(a?"Q{"+a+"}":"")+r.localName+" has already been declared.");if(Ua(t,a||"",r.localName),n&&(u&&(i=Sl(u,{ua:!1,$:!0})),u&&!Da(t,a||"",r.localName))){var l=null;Ma(t,a,r.localName,(function(e,t){return l?l():(l=Ce(io(i,e,t)))()})),o.push({ca:i,Mb:t}),h.push({ca:i,localName:r.localName,namespaceURI:a})}})),a.forEach((function(e){if(!e.Ib.I&&e.ca.I)throw Vr("The function Q{"+e.namespaceURI+"}"+e.localName+" is updating but the %updating annotation is missing.")})),{Ma:a.map((function(e){return e.Ib})),Va:h,source:r,ra:function(e){u.forEach((function(e){Pl(t,e)})),o.forEach((function(t){var n=t.ca,r=t.Mb;u.forEach((function(e){Pl(r,e)})),e.Ma.forEach((function(e){r.xa(e.namespaceURI,e.localName,e.arity,!0)||e.hb&&Ra(r,e.namespaceURI,e.localName,e.arity,e)})),e.Va.forEach((function(e){r.ib(e.namespaceURI,e.localName)||Ua(r,e.namespaceURI,e.localName)})),n.v(r)}))}}}function vm(e,t,n,r,o,a,u){var i=t.$?"XQuery":"XPath";return null!==(n=t.La?null:Rl(e,i,n,r,o,t.debug,a,u))?{state:n.rc?1:2,ca:n.ca}:{state:0,hc:"string"==typeof e?dm(e,t):Ul(e)}}function wm(e,t,n,r){var o=Pa(e,"mainModule");if(!o)throw Error("Can not execute a library module.");var a=Pa(o,"prolog");if(a){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");jl(),(r=gm(a,n,!0,r)).ra(r)}return wu(e,new Iu(n)),il(e=La(o,["queryBody","*"]),t)}function Am(e,t,n,r,o,a,u){var i=new va(n,r,a,u),c=new Oa(i);switch(0<Object.keys(o).length&&jl(),Object.keys(o).forEach((function(e){var t=o[e];Pl(c,t),ka(c,e,t)})),"string"==typeof e&&(e=Xl(e)),(n=vm(e,t,n,r,o,a,u)).state){case 2:return{ia:c,ca:n.ca};case 1:return n.ca.v(c),kl(e,t.$?"XQuery":"XPath",i,o,n.ca,t.debug,a),{ia:c,ca:n.ca};case 0:return(n=wm(n.hc,t,c,e)).v(c),t.La||kl(e,t.$?"XQuery":"XPath",i,o,n,t.debug,a),{ia:c,ca:n}}}function xm(e,t,n,r){e=e.first();var o=t.first().h.reduce((function(e,t){return e[t.key.value]=Ce(t.value()),e}),Object.create(null));t=o["."]?o["."]():Ie.empty(),delete o["."];try{if(se(e.type,1))var a=e.value;else{if(!se(e.type,54))throw Jt("Unable to convert selector argument of type "+me[e.type]+" to either an "+me[1]+" or an "+me[54]+" representing an XQueryX program while calling 'fontoxpath:evaluate'");a=e.value.node}var u=Am(a,{ua:!1,$:!0,debug:r.debug,La:r.La},(function(e){return n.aa(e)}),Object.keys(o).reduce((function(e,t){return e[t]=t,e}),{}),{},"http://www.w3.org/2005/xpath-functions",(function(e,t){return n.Ua(e,t)})),i=u.ca,c=u.ia,l=!t.G(),s=new Rt({N:l?t.first():null,Ka:l?0:-1,Da:t,Aa:Object.keys(o).reduce((function(e,t){return e[c.ib(null,t)]=o[t],e}),Object.create(null))});return{sc:i.h(s,r).value,pc:e}}catch(t){sa(e.value,t)}}function bm(e,t,n){if(1!==t.node.nodeType&&9!==t.node.nodeType)return[];var r=Qe(e,t).reduce((function(t,r){for(var o=(r=p(bm(e,r,n))).next();!o.done;o=r.next())t.push(o.value);return t}),[]);return n(t)&&r.unshift(t),r}function Bm(e,t,n,r,o){if(!(e=o.first()))throw Qt("The context is absent, it needs to be present to use id function.");if(!se(e.type,53))throw Jt("The context item is not a node, it needs to be node to use id function.");var a=t.h,u=r.O().reduce((function(e,t){return t.value.split(/\s+/).forEach((function(t){e[t]=!0})),e}),Object.create(null));for(t=e.value;9!==t.node.nodeType;)if(null===(t=Ve(a,t)))throw Error("FODC0001: the root node of the target node is not a document node.");return t=bm(a,t,(function(e){return!(1!==e.node.nodeType||!(e=Ye(a,e,"id"))||!u[e]||(u[e]=!1,0))})),Ie.create(t.map((function(e){return et(e)})))}function Em(e,t,n,r,o){if(!(e=o.first()))throw Qt("The context is absent, it needs to be present to use idref function.");if(!se(e.type,53))throw Jt("The context item is not a node, it needs to be node to use idref function.");var a=t.h,u=r.O().reduce((function(e,t){return e[t.value]=!0,e}),Object.create(null));for(t=e.value;9!==t.node.nodeType;)if(null===(t=Ve(a,t)))throw Error("FODC0001: the root node of the context node is not a document node.");return t=bm(a,t,(function(e){return 1===e.node.nodeType&&!!(e=Ye(a,e,"idref"))&&e.split(/\s+/).some((function(e){return u[e]}))})),Ie.create(t.map((function(e){return et(e)})))}function Nm(e){switch(typeof e){case"object":return Array.isArray(e)?Ie.m(new $e(e.map((function(e){return Ce(Nm(e))})))):null===e?Ie.empty():Ie.m(new ot(Object.keys(e).map((function(t){return{key:ne(t,1),value:Ce(Nm(e[t]))}}))));case"number":return Ie.m(ne(e,3));case"string":return Ie.m(ne(e,1));case"boolean":return e?Ie.ba():Ie.W();default:throw Error("Unexpected type in JSON parse")}}function Tm(e,t,n,r,o){var a=(e=rt(e,t,n,o,Ie.m(ne("duplicates",1)))).G()?"use-first":e.first().value;return r.M((function(e){return Ie.m(new ot(e.reduce((function(e,t){return t.h.forEach((function(t){var n=e.findIndex((function(e){return nt(e.key,t.key)}));if(0<=n)switch(a){case"reject":throw Error("FOJS0003: Duplicate encountered when merging maps.");case"use-last":return void e.splice(n,1,t);case"combine":return void e.splice(n,1,{key:t.key,value:Ce(Ie.create(e[n].value().O().concat(t.value().O())))});default:return}e.push(t)})),e}),[])))}))}function Im(e,t,n){var r=1,o=e.value;e=e.Qa(!0);var a=null,u=Math.max(t-1,0);return-1!==e&&(a=Math.max(0,(null===n?e:Math.max(0,Math.min(e,n+(t-1))))-u)),Ie.create({next:function(e){for(;r<t;)o.next(e),r++;return null!==n&&r>=t+n?ie:(e=o.next(e),r++,e)}},a)}function Cm(e){return e.map((function(e){return se(e.type,19)?Hn(e,3):e}))}function Fm(e){if((e=Cm(e)).some((function(e){return Number.isNaN(e.value)})))return[ne(NaN,3)];if(!(e=Wi(e)))throw Error("FORG0006: Incompatible types to be converted to a common type");return e}function Om(e,t,n,r,o,a){return tt([o,a],(function(e){var t=p(e);if(e=t.next().value,t=t.next().value,1/0===e.value)return Ie.empty();if(-1/0===e.value)return t&&1/0===t.value?Ie.empty():r;if(t){if(isNaN(t.value))return Ie.empty();1/0===t.value&&(t=null)}return isNaN(e.value)?Ie.empty():Im(r,Math.round(e.value),t?Math.round(t.value):null)}))}function Sm(e,t,n,r,o){if(r.G())return o;if(!(e=Wi(e=Cm(r.O()))))throw Error("FORG0006: Incompatible types to be converted to a common type");if(!e.every((function(e){return se(e.type,2)})))throw Error("FORG0006: items passed to fn:sum are not all numeric.");return t=e.reduce((function(e,t){return e+t.value}),0),e.every((function(e){return se(e.type,5)}))?Ie.m(ne(t,5)):e.every((function(e){return se(e.type,3)}))?Ie.m(ne(t,3)):e.every((function(e){return se(e.type,4)}))?Ie.m(ne(t,4)):Ie.m(ne(t,6))}var Gm=[].concat(Lo,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"boolean",j:[{type:59,g:2}],i:{type:0,g:3},callFunction:function(e,t,n,r){return r.ha()?Ie.ba():Ie.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"true",j:[],i:{type:0,g:3},callFunction:function(){return Ie.ba()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"not",j:[{type:59,g:2}],i:{type:0,g:3},callFunction:function(e,t,n,r){return!1===r.ha()?Ie.ba():Ie.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"false",j:[],i:{type:0,g:3},callFunction:function(){return Ie.W()}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"last",j:[],i:{type:5,g:3},callFunction:function(e){if(null===e.N)throw Qt("The fn:last() function depends on dynamic context, which is absent.");var t=!1;return Ie.create({next:function(){if(t)return ie;var n=e.Da.Qa();return t=!0,ce(ne(n,5))}},1)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"position",j:[],i:{type:5,g:3},callFunction:function(e){if(null===e.N)throw Qt("The fn:position() function depends on dynamic context, which is absent.");return Ie.m(ne(e.Ka+1,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-dateTime",j:[],i:{type:10,g:3},callFunction:function(e){return Ie.m(ne(Ut(e),10))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-date",j:[],i:{type:7,g:3},callFunction:function(e){return Ie.m(ne(At(Ut(e),7),7))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-time",j:[],i:{type:8,g:3},callFunction:function(e){return Ie.m(ne(At(Ut(e),8),8))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"implicit-timezone",j:[],i:{type:17,g:3},callFunction:function(e){return Ie.m(ne(Mt(e),17))}}],Qo,$o,aa,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"years-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.gb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"months-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.cb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"days-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.bb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getHours(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getMinutes(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-duration",j:[{type:18,g:0}],i:{type:4,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getSeconds(),4))}}],ia,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",j:[{type:1,g:2},{type:53,g:3}],i:{type:54,g:2},callFunction:Bm},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",j:[{type:1,g:2}],i:{type:54,g:2},callFunction:function(e,t,n,r){return Bm(e,t,n,r,Ie.m(e.N))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",j:[{type:1,g:2},{type:53,g:3}],i:{type:53,g:2},callFunction:Em},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",j:[{type:1,g:2}],i:{type:53,g:2},callFunction:function(e,t,n,r){return Em(e,t,n,r,Ie.m(e.N))}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"parse-json",j:[{type:1,g:3}],i:{type:59,g:0},callFunction:function(e,t,n,r){try{var o=JSON.parse(r.first().value)}catch(e){throw Error("FOJS0001: parsed JSON string contains illegal JSON.")}return Nm(o)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"contains",j:[{type:61,g:3},{type:46,g:3}],i:{type:0,g:3},callFunction:function(e,t,n,r,o){return tt([r,o],(function(e){var t=(e=p(e)).next().value,n=e.next().value;return t.h.some((function(e){return nt(e.key,n)}))?Ie.ba():Ie.W()}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"entry",j:[{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r,o){return r.map((function(e){return new ot([{key:e,value:Ce(o)}])}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"for-each",j:[{type:61,g:3},{type:59,g:2}],i:{type:59,g:2},callFunction:function(e,t,n,r,o){return tt([r,o],(function(r){var o=(r=p(r)).next().value,a=r.next().value;return Lt(o.h.map((function(r){return a.value.call(void 0,e,t,n,Ie.m(r.key),r.value())})))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"get",j:[{type:61,g:3},{type:46,g:3}],i:{type:59,g:2},callFunction:rt},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"keys",j:[{type:61,g:3}],i:{type:46,g:2},callFunction:function(e,t,n,r){return tt([r],(function(e){return e=p(e).next().value,Ie.create(e.h.map((function(e){return e.key})))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",j:[{type:61,g:2},{type:61,g:3}],i:{type:61,g:3},callFunction:Tm},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",j:[{type:61,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r){return Tm(e,t,n,r,Ie.m(new ot([{key:ne("duplicates",1),value:function(){return Ie.m(ne("use-first",1))}}])))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"put",j:[{type:61,g:3},{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r,o,a){return tt([r,o],(function(e){var t=(e=p(e)).next().value,n=e.next().value;return e=t.h.concat(),0<=(t=e.findIndex((function(e){return nt(e.key,n)})))?e.splice(t,1,{key:n,value:Ce(a)}):e.push({key:n,value:Ce(a)}),Ie.m(new ot(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"remove",j:[{type:61,g:3},{type:46,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r,o){return tt([r],(function(e){var t=p(e).next().value.h.concat();return o.M((function(e){return e.forEach((function(e){var n=t.findIndex((function(t){return nt(t.key,e)}));0<=n&&t.splice(n,1)})),Ie.m(new ot(t))}))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"size",j:[{type:61,g:3}],i:{type:5,g:3},callFunction:function(e,t,n,r){return r.map((function(e){return ne(e.h.length,5)}))}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pi",j:[],i:{type:3,g:3},callFunction:function(){return Ie.m(ne(Math.PI,3))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.pow(Math.E,e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp10",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.pow(10,e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.log(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log10",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.log10(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pow",j:[{type:3,g:0},{type:2,g:3}],i:{type:3,g:0},callFunction:function(e,t,n,r,o){return o.M((function(e){var t=p(e).next().value;return r.map((function(e){return 1!==Math.abs(e.value)||Number.isFinite(t.value)?ne(Math.pow(e.value,t.value),3):ne(1,3)}))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sqrt",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.sqrt(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sin",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.sin(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"cos",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.cos(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"tan",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.tan(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"asin",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.asin(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"acos",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.acos(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.atan(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan2",j:[{type:3,g:0},{type:3,g:3}],i:{type:3,g:0},callFunction:function(e,t,n,r,o){return o.M((function(e){var t=p(e).next().value;return r.map((function(e){return ne(Math.atan2(e.value,t.value),3)}))}))}}],Ur,hr,[{namespaceURI:"http://fontoxpath/operators",localName:"to",j:[{type:5,g:0},{type:5,g:0}],i:{type:5,g:2},callFunction:function(e,t,n,r,o){if(e=r.first(),o=o.first(),null===e||null===o)return Ie.empty();var a=e.value;return o=o.value,a>o?Ie.empty():Ie.create({next:function(){return ce(ne(a++,5))}},o-a+1)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"QName",j:[{type:1,g:0},{type:1,g:3}],i:{type:23,g:3},callFunction:function(e,t,n,r,o){return tt([r,o],(function(e){var t=p(e);if(e=t.next().value,!$t(t=t.next().value.value,23))throw Error("FOCA0002: The provided QName is invalid.");if(null===(e=e&&e.value||null)&&t.includes(":"))throw Error("FOCA0002: The URI of a QName may not be empty if a prefix is provided.");if(r.G())return Ie.m(ne(new Fe("",null,t),23));if(!t.includes(":"))return Ie.m(ne(new Fe("",e,t),23));var n=p(t.split(":"));return t=n.next().value,n=n.next().value,Ie.m(ne(new Fe(t,e,n),23))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"prefix-from-QName",j:[{type:23,g:0}],i:{type:24,g:0},callFunction:function(e,t,n,r){return tt([r],(function(e){return null===(e=p(e).next().value)?Ie.empty():(e=e.value).prefix?Ie.m(ne(e.prefix,24)):Ie.empty()}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"local-name-from-QName",j:[{type:23,g:0}],i:{type:24,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(e.value.localName,24)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"namespace-uri-from-QName",j:[{type:23,g:0}],i:{type:20,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(e.value.namespaceURI||"",20)}))}}],[{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r.Z({empty:function(){return Ie.ba()},multiple:function(){return Ie.W()},m:function(){return Ie.W()}})},localName:"empty",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r.Z({empty:function(){return Ie.W()},multiple:function(){return Ie.ba()},m:function(){return Ie.ba()}})},localName:"exists",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return Im(r,1,1)},localName:"head",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return Im(r,2,null)},localName:"tail",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:5,g:3},{type:59,g:2}],callFunction:function(e,t,n,r,o,a){return r.G()?a:a.G()?r:(e=r.O(),0>(o=o.first().value-1)?o=0:o>e.length&&(o=e.length),t=e.slice(o),Ie.create(e.slice(0,o).concat(a.O(),t)))},localName:"insert-before",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:5,g:3}],callFunction:function(e,t,n,r,o){return e=o.first().value,!(r=r.O()).length||1>e||e>r.length||r.splice(e-1,1),Ie.create(r)},localName:"remove",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return Ie.create(e.reverse())}))},localName:"reverse",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:3,g:3}],callFunction:function(e,t,n,r,o){return Om(e,t,n,r,o,Ie.empty())},localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:3,g:3},{type:3,g:3}],callFunction:Om,localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r},localName:"unordered",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){var o=Vt(r,t).O();return Ie.create(o).filter((function(e,t){return o.slice(0,t).every((function(t){return!Pr(e,t)}))}))},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:46,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:46,g:2},{type:46,g:3}],callFunction:function(e,t,n,r,o){return o.M((function(n){var o=p(n).next().value;return Vt(r,t).map((function(t,n){return Fi("eqOp",t.type,o.type)(t,o,e)?ne(n+1,5):ne(-1,5)})).filter((function(e){return-1!==e.value}))}))},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:46,g:2},{type:46,g:3},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:59,g:2},{type:59,g:2}],callFunction:function(e,t,n,r,o){var a=!1,u=Lr(e,t,n,r,o);return Ie.create({next:function(){if(a)return ie;var e=u.next(0);return e.done?e:(a=!0,ce(ne(e.value,0)))}})},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2},{type:59,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){var o=!1;return Ie.create({next:function(){if(o)return ie;var e=r.Qa();return o=!0,ce(ne(e,5))}})},localName:"count",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){if(r.G())return r;if(!(e=Wi(e=Cm(r.O()))))throw Error("FORG0006: Incompatible types to be converted to a common type");if(!e.every((function(e){return se(e.type,2)})))throw Error("FORG0006: items passed to fn:avg are not all numeric.");return t=e.reduce((function(e,t){return e+t.value}),0)/e.length,e.every((function(e){return se(e.type,5)||se(e.type,3)}))?Ie.m(ne(t,3)):e.every((function(e){return se(e.type,4)}))?Ie.m(ne(t,4)):Ie.m(ne(t,6))},localName:"avg",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){return r.G()?r:(e=Fm(r.O()),Ie.m(e.reduce((function(e,t){return e.value<t.value?t:e}))))},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){return r.G()?r:(e=Fm(r.O()),Ie.m(e.reduce((function(e,t){return e.value>t.value?t:e}))))},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){return Sm(e,t,n,r,Ie.m(ne(0,5)))},localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:3}},{j:[{type:46,g:2},{type:46,g:0}],callFunction:Sm,localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(!r.G()&&!r.wa())throw Error("FORG0003: The argument passed to fn:zero-or-one contained more than one item.");return r},localName:"zero-or-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(r.G())throw Error("FORG0004: The argument passed to fn:one-or-more was empty.");return r},localName:"one-or-more",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:1}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(!r.wa())throw Error("FORG0005: The argument passed to fn:exactly-one is empty or contained more than one item.");return r},localName:"exactly-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:3}},{j:[{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,o){if(r.G())return r;var a=o.first(),u=a.o;if(1!==u.length)throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return r.filter((function(r){if(r=tr(u[0],Ie.m(r),t,"fn:filter",!1),!(r=a.value.call(void 0,e,t,n,r)).wa()||!se(r.first().type,0))throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return r.first().value}))},localName:"filter",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,o){if(r.G())return r;var a=o.first(),u=a.o;if(1!==u.length)throw Error("XPTY0004: signature of function passed to fn:for-each is incompatible.");var i,c=r.value;return Ie.create({next:function(r){for(;;){if(!i){var o=c.next(0);if(o.done)return o;o=tr(u[0],Ie.m(o.value),t,"fn:for-each",!1),i=a.value.call(void 0,e,t,n,o).value}if(!(o=i.next(r)).done)return o;i=null}}})},localName:"for-each",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,o,a){if(r.G())return r;var u=a.first(),i=u.o;if(2!==i.length)throw Error("XPTY0004: signature of function passed to fn:fold-left is incompatible.");return r.M((function(r){return r.reduce((function(r,o){return r=tr(i[0],r,t,"fn:fold-left",!1),o=tr(i[1],Ie.m(o),t,"fn:fold-left",!1),u.value.call(void 0,e,t,n,r,o)}),o)}))},localName:"fold-left",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,o,a){if(r.G())return r;var u=a.first(),i=u.o;if(2!==i.length)throw Error("XPTY0004: signature of function passed to fn:fold-right is incompatible.");return r.M((function(r){return r.reduceRight((function(r,o){return r=tr(i[0],r,t,"fn:fold-right",!1),o=tr(i[1],Ie.m(o),t,"fn:fold-right",!1),u.value.call(void 0,e,t,n,o,r)}),o)}))},localName:"fold-right",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(!t.v)throw Error("serialize() called but no xmlSerializer set in execution parameters.");if(!(e=r.O()).every((function(e){return se(e.type,53)})))throw Error("Expected argument to fn:serialize to resolve to a sequence of Nodes.");return Ie.m(ne(e.map((function(e){return t.v.serializeToString(ra(e.value,t,!1))})).join(""),1))},localName:"serialize",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}}],Nr,[{j:[{type:59,g:3},{type:61,g:3}],callFunction:function(e,t,n,r,o){var a,u;return Ie.create({next:function(){if(!a){var e=xm(r,o,n,t);a=e.sc,u=e.pc}try{return a.next(0)}catch(e){sa(u.value,e)}}})},localName:"evaluate",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:59,g:2}},{j:[],callFunction:function(){return Ie.m(ne(n,1))},localName:"version",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:1,g:3}}],[{j:[{type:23,g:3},{type:5,g:3}],callFunction:function(e,t,n,r,o){return tt([r,o],(function(e){var t=p(e);e=t.next().value,t=t.next().value;var r=n.xa(e.value.namespaceURI,e.value.localName,t.value);return null===r?Ie.empty():(e=new Oe({j:r.j,arity:t.value,localName:e.value.localName,namespaceURI:e.value.namespaceURI,i:r.i,value:r.callFunction}),Ie.m(e))}))},localName:"function-lookup",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{g:0,type:60}},{j:[{type:60,g:3}],callFunction:function(e,t,n,r){return tt([r],(function(e){return(e=p(e).next().value).Sa()?Ie.empty():Ie.m(ne(new Fe("",e.l,e.B),23))}))},localName:"function-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[{type:60,g:3}],callFunction:function(e,t,n,r){return tt([r],(function(e){return e=p(e).next().value,Ie.m(ne(e.v,5))}))},localName:"function-arity",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}}]);function Dm(e){this.h=e}(o=Dm.prototype).createAttributeNS=function(e,t){return this.h.createAttributeNS(e,t)},o.createCDATASection=function(e){return this.h.createCDATASection(e)},o.createComment=function(e){return this.h.createComment(e)},o.createDocument=function(){return this.h.createDocument()},o.createElementNS=function(e,t){return this.h.createElementNS(e,t)},o.createProcessingInstruction=function(e,t){return this.h.createProcessingInstruction(e,t)},o.createTextNode=function(e){return this.h.createTextNode(e)};var Rm=Symbol("IS_XPATH_VALUE_SYMBOL");function km(e){return function(t,n){return t=Ot(new Xe(null===n?new ke:n),t,we(e)),(n={})[Rm]=!0,n.Hb=t,n}}function Um(e){return e&&"object"==typeof e&&"lookupNamespaceURI"in e?function(t){return e.lookupNamespaceURI(t||null)}:function(){return null}}function Mm(e){return function(t){var n=t.localName;return t.prefix?null:{namespaceURI:e,localName:n}}}function Hm(e,t,n,r,o,a){if(null==r&&(r=r||{}),o)var u=o.logger||{trace:console.log.bind(console)},i=o.documentWriter,c=o.moduleImports,l=o.namespaceResolver,s=o.functionNameResolver,f=o.nodesFactory,h=o.xmlSerializer;else u={trace:console.log.bind(console)},c={},h=i=f=l=null,s=void 0;var d=new Xe(null===n?new ke:n);n=c||Object.create(null),c=void 0===o.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":o.defaultFunctionNamespaceURI;var m=Am(e,a,l||Um(t),r,n,c,s||Mm(c));for(e=t?St(d,t):Ie.empty(),t=!f&&a.$?new lo(t):new Dm(f),i=i?new He(i):Me,f=Object.keys(r).reduce((function(e,t){var n=r[t];return e["Q{}"+t+"[0]"]=n&&"object"==typeof n&&Rm in n?function(){return Ie.create(n.Hb)}:function(){return St(d,r[t])},e}),Object.create(null)),l={},n=(s=p(Object.keys(m.ia.Ia))).next();!n.done;l={Za:l.Za},n=s.next())l.Za=n.value,f[l.Za]||(f[l.Za]=function(e){return function(){return(0,m.ia.Ia[e.Za])(y,g)}}(l));var y=new Rt({N:e.first(),Ka:0,Da:e,Aa:f}),g=new Xt(a.debug,a.La,d,t,i,o.currentContext,new Map,u,h);return{Bb:y,Cb:g,ca:m.ca}}function Pm(e,t){var n={},r=0,o=!1,a=null;return{next:function(){if(o)return ie;for(var u={};r<e.h.length;){e:{var i=e.h[r].key.value;if(!a){u.pb=e.h[r];var c=u.pb.value().Z({default:function(e){return e},multiple:function(e){return function(){throw Error("Serialization error: The value of an entry in a map is expected to be a single item or an empty sequence. Use arrays when putting multiple values in a map. The value of the key "+e.pb.key.value+" holds multiple items")}}(u)}).first();if(null===c){n[i]=null,r++;break e}a=Xm(c,t)}c=a.next(0),a=null,n[i]=c.value,r++}u={pb:u.pb}}return o=!0,ce(n)}}}function jm(e,t){var n=[],r=0,o=!1,a=null;return{next:function(){if(o)return ie;for(;r<e.P.length;){if(!a){var u=e.P[r]().Z({default:function(e){return e},multiple:function(){throw Error("Serialization error: The value of an entry in an array is expected to be a single item or an empty sequence. Use nested arrays when putting multiple values in an array.")}}).first();if(null===u){n[r++]=null;continue}a=Xm(u,t)}u=a.next(0),a=null,n[r++]=u.value}return o=!0,ce(n)}}}function Xm(e,t){if(se(e.type,61))return Pm(e,t);if(se(e.type,62))return jm(e,t);if(se(e.type,23)){var n=e.value;return{next:function(){return ce("Q{"+(n.namespaceURI||"")+"}"+n.localName)}}}switch(e.type){case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:var r=e.value;return{next:function(){return ce(xt(r))}};case 47:case 53:case 54:case 55:case 56:case 57:case 58:var o=e.value;return{next:function(){return ce(ra(o,t,!1))}};default:return{next:function(){return ce(e.value)}}}}Gm.forEach((function(e){ma(e.namespaceURI,e.localName,e.j,e.i,e.callFunction)}));var Lm={ANY:0,NUMBER:1,STRING:2,BOOLEAN:3,NODES:7,FIRST_NODE:9,STRINGS:10,MAP:11,ARRAY:12,NUMBERS:13,ALL_RESULTS:14,ASYNC_ITERATOR:99};function Ym(e,t,n,r){switch(n){case 3:return t.ha();case 2:return(t=Vt(t,r).O()).length?t.map((function(e){return Hn(e,1).value})).join(" "):"";case 10:return(t=Vt(t,r).O()).length?t.map((function(e){return e.value+""})):[];case 1:return null!==(t=t.first())&&se(t.type,2)?t.value:NaN;case 9:if(null===(t=t.first()))return null;if(!se(t.type,53))throw Error("Expected XPath "+ca(e)+" to resolve to Node. Got "+me[t.type]);return ra(t.value,r,!1);case 7:if(!(t=t.O()).every((function(e){return se(e.type,53)})))throw Error("Expected XPath "+ca(e)+" to resolve to a sequence of Nodes.");return t.map((function(e){return ra(e.value,r,!1)}));case 11:if(1!==(t=t.O()).length)throw Error("Expected XPath "+ca(e)+" to resolve to a single map.");if(!se((t=t[0]).type,61))throw Error("Expected XPath "+ca(e)+" to resolve to a map");return Pm(t,r).next(0).value;case 12:if(1!==(t=t.O()).length)throw Error("Expected XPath "+ca(e)+" to resolve to a single array.");if(!se((t=t[0]).type,62))throw Error("Expected XPath "+ca(e)+" to resolve to an array");return jm(t,r).next(0).value;case 13:return t.O().map((function(t){if(!se(t.type,2))throw Error("Expected XPath "+ca(e)+" to resolve to numbers");return t.value}));case 99:var o=t.value,a=null,u=!1,i=function(){for(;!u;){if(!a){var e=o.next(0);if(e.done){u=!0;break}a=Xm(e.value,r)}return e=a.next(0),a=null,e}return Promise.resolve({done:!0,value:null})};return"asyncIterator"in Symbol?((t={})[Symbol.asyncIterator]=function(){return this},t.next=function(){return new Promise((function(e){return e(i())})).catch((function(t){sa(e,t)}))}):t={next:function(){return new Promise((function(e){return e(i())}))}},t;case 14:return t.O().map((function(e){return Xm(e,r).next(0).value}));default:return(t=t.O()).every((function(e){return se(e.type,53)&&!se(e.type,47)}))?1===(t=t.map((function(e){return ra(e.value,r,!1)}))).length?t[0]:t:1===t.length?se((t=t[0]).type,62)?jm(t,r).next(0).value:se(t.type,61)?Pm(t,r).next(0).value:_t(t,r).first().value:Vt(Ie.create(t),r).O().map((function(e){return e.value}))}}Lm[Lm.ANY]="ANY",Lm[Lm.NUMBER]="NUMBER",Lm[Lm.STRING]="STRING",Lm[Lm.BOOLEAN]="BOOLEAN",Lm[Lm.NODES]="NODES",Lm[Lm.FIRST_NODE]="FIRST_NODE",Lm[Lm.STRINGS]="STRINGS",Lm[Lm.MAP]="MAP",Lm[Lm.ARRAY]="ARRAY",Lm[Lm.NUMBERS]="NUMBERS",Lm[Lm.ALL_RESULTS]="ALL_RESULTS",Lm[Lm.ASYNC_ITERATOR]="ASYNC_ITERATOR";var Qm=!1,Jm=null,Km={getPerformanceSummary:function(){var e=Jm.getEntriesByType("measure").filter((function(e){return e.name.startsWith("XPath: ")}));return Array.from(e.reduce((function(e,t){var n=t.name.substring(7);return e.has(n)?((n=e.get(n)).times+=1,n.totalDuration+=t.duration):e.set(n,{xpath:n,times:1,totalDuration:t.duration,average:0}),e}),new Map).values()).map((function(e){return e.average=e.totalDuration/e.times,e})).sort((function(e,t){return t.totalDuration-e.totalDuration}))},setPerformanceImplementation:function(e){Jm=e},startProfiling:function(){if(null===Jm)throw Error("Performance API object must be set using `profiler.setPerformanceImplementation` before starting to profile");Jm.clearMarks(),Jm.clearMeasures(),Qm=!0},stopProfiling:function(){Qm=!1}},qm=0,_m={XPATH_3_1_LANGUAGE:"XPath3.1",XQUERY_3_1_LANGUAGE:"XQuery3.1",XQUERY_UPDATE_3_1_LANGUAGE:"XQueryUpdate3.1"};function Vm(e,t,n,r,o,a){if(o=o||0,!e||"string"!=typeof e&&!("nodeType"in e))throw new TypeError("Failed to execute 'evaluateXPath': xpathExpression must be a string or an element depicting an XQueryX DOM tree.");a=a||{};try{var u=Hm(e,t,n||null,r||{},a,{ua:"XQueryUpdate3.1"===a.language,$:"XQuery3.1"===a.language||"XQueryUpdate3.1"===a.language,debug:!!a.debug,La:!!a.disableCache}),i=u.Bb,c=u.Cb,l=u.ca}catch(t){sa(e,t)}if(l.I)throw Error("XUST0001: Updating expressions should be evaluated as updating expressions");if(3===o&&t&&"object"==typeof t&&"nodeType"in t&&(n=l.B(),t=Re(t),null!==n&&!t.includes(n)))return!1;try{t=e,Qm&&("string"!=typeof t&&(t=ca(t)),Jm.mark(t+(0===qm?"":"@"+qm)),qm++);var s=Ym(e,io(l,i,c),o,c);return o=e,Qm&&("string"!=typeof o&&(o=ca(o)),i=o+(0==--qm?"":"@"+qm),Jm.measure("XPath: "+o,i),Jm.clearMarks(i)),s}catch(t){sa(e,t)}}Object.assign(Vm,{tc:14,ANY_TYPE:0,Tb:12,Ub:99,BOOLEAN_TYPE:3,Wb:9,Zb:11,ac:7,bc:13,NUMBER_TYPE:1,cc:10,STRING_TYPE:2,uc:"XPath3.1",vc:"XQuery3.1",fc:"XQueryUpdate3.1"});var Wm={};function Zm(e,t,n,r,o){return Vm(e,t,n,r,Vm.Ub,o)}function $m(e,t,n,r){var o={};return o.pendingUpdateList=e.fa.map((function(e){return e.h(r)})),o.xdmValue=Ym(t,Ie.create(e.J),n,r),o}function zm(e,t,n,r,o){var a,u,i,c,l,s,p,f,h,d;return F(new C(new E((function(m){switch(m.h){case 1:o=o||{},jl();try{c=Hm(e,t,n||null,r||{},o||{},{ua:!0,$:!0,debug:!!o.debug,La:!!o.disableCache}),a=c.Bb,u=c.Cb,i=c.ca}catch(t){sa(e,t)}if(i.I){m.h=2;break}l=[];var y=(s=Zm(e,t,n,r,Object.assign(Object.assign({},o),{language:"XQueryUpdate3.1"}))).next();return m.h=3,{value:y};case 3:p=m.l;case 4:if(p.done){m.h=6;break}return l.push(p.value),y=s.next(),m.h=7,{value:y};case 7:p=m.l,m.h=4;break;case 6:return f={},m.return(Promise.resolve((f.pendingUpdateList=[],f.xdmValue=l,f)));case 2:try{d=i.s(a,u),h=d.next(0)}catch(t){sa(e,t)}return m.return($m(h.value,e,o.returnType,u))}}))))}function ey(e,t,n,r,o){o=o||{},jl();try{var a=Hm(e,t,n||null,r||{},o||{},{ua:!0,$:!0,debug:!!o.debug,La:!!o.disableCache}),u=a.Bb,i=a.Cb,c=a.ca}catch(t){sa(e,t)}if(!c.I)return u={},(i={}).pendingUpdateList=[],i.xdmValue=Vm(e,t,n,r,o.i,Object.assign(Object.assign({},o),(u.language=Vm.fc,u))),i;try{var l=c.s(u,i).next(0)}catch(t){sa(e,t)}return $m(l.value,e,o.returnType,i)}function ty(e,t,n,r,o){return Vm(e,t,n,r,Vm.Tb,o)}function ny(e,t,n,r,o){return Vm(e,t,n,r,Vm.BOOLEAN_TYPE,o)}function ry(e,t,n,r,o){return Vm(e,t,n,r,Vm.Wb,o)}function oy(e,t,n,r,o){return Vm(e,t,n,r,Vm.Zb,o)}function ay(e,t,n,r,o){return Vm(e,t,n,r,Vm.ac,o)}function uy(e,t,n,r,o){return Vm(e,t,n,r,Vm.NUMBER_TYPE,o)}function iy(e,t,n,r,o){return Vm(e,t,n,r,Vm.bc,o)}function cy(e,t,n,r,o){return Vm(e,t,n,r,Vm.STRING_TYPE,o)}function ly(e,t,n,r,o){return Vm(e,t,n,r,Vm.cc,o)}function sy(e,t,n,r){t=new Xe(t||new ke),r=r?new He(r):Me,n=n?n=new Dm(n):null,wo(e=e.map(Jc),t,n,r)}function py(e,t,n){return{code:e,va:t,H:n,isAstAccepted:!0}}function fy(e){return{isAstAccepted:!1,reason:e}}function hy(e,t){return e.isAstAccepted?t(e):e}function dy(e,t){return e.isAstAccepted?t(e):[e,null]}function my(e,t,n){return hy(e,(function(e){switch(e.va.type){case 0:return e;case 1:return hy(hg(n,e,"nodes"),(function(e){return hy(hg(n,t,"contextItem"),(function(t){return py("(function () {\n\t\t\t\t\t\t\tconst { done, value } = "+e.code+"("+t.code+").next();\n\t\t\t\t\t\t\treturn done ? null : value;\n\t\t\t\t\t\t})()",{type:0},[].concat(h(e.H),h(t.H)))}))}));default:throw Error("invalid generated code type to convert to value: "+e.va.type)}}))}function yy(e,t,n,r){return e=my(e,n,r),t&&0===t.type&&3===t.g?e:hy(e,(function(e){return py("!!"+e.code,{type:0},e.H)}))}function gy(e,t,n){return t?e.isAstAccepted&&0!==e.va.type?fy("Atomization only implemented for single value"):se(t.type,1)?e:se(t.type,47)?hy(hg(n,e,"attr"),(function(e){return py("("+e.code+" ? domFacade.getData("+e.code+") : null)",{type:0},e.H)})):fy("Atomization only implemented for string and attribute"):fy("Can not atomize value if type was not annotated")}function vy(e,t,n,r){return r=gy(e=my(e,n,r),t,r),tn(t)?hy(r,(function(e){return py(e.code+" ?? ''",{type:0},e.H)})):r}function wy(e,t,n){return hy(hg(n,e,"node"),(function(e){return 1===e.va.type?e:t&&!se(t.type,53)?fy("Can not evaluate to node if expression does not result in nodes"):py("(function () {\n\t\t\t\tif ("+e.code+" !== null && !"+e.code+".nodeType) {\n\t\t\t\t\tthrow new Error('XPDY0050: The result of the expression was not a node');\n\t\t\t\t}\n\t\t\t\treturn "+e.code+";\n\t\t\t})()",{type:0},e.H)}))}function Ay(e,t,n,r){return hy(e,(function(e){switch(e.va.type){case 1:return hy(hg(r,e,"nodes"),(function(e){return hy(hg(r,n,"contextItem"),(function(t){return py("Array.from("+e.code+"("+t.code+"))",{type:0},[].concat(h(e.H),h(t.H)))}))}));case 0:return hy(hg(r,wy(e,t,r),"node"),(function(e){return py("("+e.code+" === null ? [] : ["+e.code+"])",{type:0},e.H)}));default:return fy("Unsupported code type to evaluate to nodes")}}))}function xy(e,t){return hy(e,(function(e){return hy(t,(function(t){if(0!==e.va.type||0!==t.va.type)throw Error("can only use emitAnd with value expressions");return py(e.code+" && "+t.code,{type:0},[].concat(h(e.H),h(t.H)))}))}))}function by(e,t,n,r){return(e=La(e,[t,"*"]))?r.h(e,n,r):[fy(t+" expression not found"),null]}Object.assign(Vm,(Wm.ALL_RESULTS_TYPE=14,Wm.ANY_TYPE=0,Wm.ARRAY_TYPE=12,Wm.ASYNC_ITERATOR_TYPE=99,Wm.BOOLEAN_TYPE=3,Wm.FIRST_NODE_TYPE=9,Wm.MAP_TYPE=11,Wm.NODES_TYPE=7,Wm.NUMBERS_TYPE=13,Wm.NUMBER_TYPE=1,Wm.STRINGS_TYPE=10,Wm.STRING_TYPE=2,Wm.XPATH_3_1_LANGUAGE="XPath3.1",Wm.XQUERY_3_1_LANGUAGE="XQuery3.1",Wm.XQUERY_UPDATE_3_1_LANGUAGE="XQueryUpdate3.1",Wm));var By={},Ey=(By.equalOp="eqOp",By.notEqualOp="neOp",By.lessThanOrEqualOp="leOp",By.lessThanOp="ltOp",By.greaterThanOrEqualOp="geOp",By.greaterThanOp="gtOp",By),Ny={},Ty=(Ny.eqOp="eqOp",Ny.neOp="neOp",Ny.leOp="geOp",Ny.ltOp="gtOp",Ny.geOp="leOp",Ny.gtOp="ltOp",Ny);function Iy(e,t,n,r){var o=Xa(La(e,["firstOperand","*"]),"type"),a=Xa(La(e,["secondOperand","*"]),"type");if(!o||!a)return fy("Can not generate code for value compare without both types");var u=[47,1];if(!u.includes(o.type)||!u.includes(a.type))return fy("Unsupported types in compare: ["+me[o.type]+", "+me[a.type]+"]");if(!(u=new Map([["eqOp","==="],["neOp","!=="]])).has(t))return fy(t+" not yet implemented");var i=u.get(t);return u=(t=p(by(e,"firstOperand",n,r))).next().value,t.next(),t=gy(t=my(u,n,r),o,r),hy(hg(r,t,"first"),(function(t){var u=p(by(e,"secondOperand",n,r)),c=u.next().value;return u.next(),u=gy(u=my(c,n,r),a,r),hy(hg(r,u,"second"),(function(e){var n=[];return tn(o)&&n.push(t.code+" === null"),tn(a)&&n.push(e.code+" === null"),py("("+(n.length?n.join(" || ")+" ? null : ":"")+t.code+" "+i+" "+e.code+")",{type:0},[].concat(h(t.H),h(e.H)))}))}))}function Cy(e,t,n,r,o,a){var u=Xa(La(e,[t,"*"]),"type"),i=Xa(La(e,[n,"*"]),"type");if(!u||!i)return fy("Can not generate code for general compare without both types");var c=[47,1];if(!c.includes(u.type)||!c.includes(i.type))return fy("Unsupported types in compare: ["+me[u.type]+", "+me[i.type]+"]");if(!(c=new Map([["eqOp","==="],["neOp","!=="]])).has(r))return fy(r+" not yet implemented");var l=c.get(r);return r=(t=p(by(e,t,o,a))).next().value,t.next(),u=gy(t=my(r,o,a),u,a),hy(hg(a,u,"single"),(function(t){var r=p(by(e,n,o,a)),u=r.next().value;return r.next(),hy(hg(a,u,"multiple"),(function(e){if(1!==e.va.type)return fy("can only generate general compare for a single value and a generator");var n=dg(a,mg(a,"n")),r=gy(n,i,a);return hy(o,(function(o){return hy(r,(function(r){return py("(function () {\n\t\t\t\t\t\t\t\t\tfor (const "+n.code+" of "+e.code+"("+o.code+")) {\n\t\t\t\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t\t\t\tif ("+r.code+" "+l+" "+t.code+") {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t})()",{type:0},[].concat(h(t.H),h(n.H),h(o.H),h(e.H)))}))}))}))}))}function Fy(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}var Oy={"false#0":Ly,"local-name#0":jy,"local-name#1":jy,"name#0":Py,"name#1":Py,"not#1":Xy,"true#0":Yy},Sy={},Gy=(Sy["http://fontoxml.com/fontoxpath"]=["version#0"],Sy[""]=["root#1","path#1"],Sy);function Dy(e,t,n,r){var o=p(r.h(e,n,r)),a=o.next().value;if(o.next(),e=Xa(e,"type"),!t||2===t.g||1===t.g)return fy("Not supported: sequence arguments with multiple items");if(se(t.type,53))return wy(t=my(a,n,r),e,r);switch(t.type){case 59:return my(a,n,r);case 0:return yy(a,e,n,r);case 1:return vy(a,e,n,r)}return fy("Argument types not supported: "+(e?me[e.type]:"unknown")+" -> "+me[t.type])}function Ry(e,t,n,r){if(e.length!==t.length||t.some((function(e){return 4===e})))return fy("Not supported: variadic function or mismatch in argument count");if(0===e.length)return py("",{type:0},[]);var o=p(e);e=o.next().value;var a=f(o);o=(t=p(t)).next().value;var u=f(t);return e=hg(r,Dy(e,o,n,r),"arg"),0===a.length?e:hy(e,(function(e){return hy(Ry(a,u,n,r),(function(t){return py(e.code+", "+t.code,{type:0},[].concat(h(e.H),h(t.H)))}))}))}function ky(e,t){return hy(e,(function(e){return t&&2!==t.g&&1!==t.g&&([0,1].includes(t.type)||se(t.type,53))?e:fy("Function return type "+me[t.type]+" not supported")}))}function Uy(e,t,n){var r=Qa(Pa(e,"functionName")),o=r.localName,a=r.namespaceURI,u=(r=Ya(Pa(e,"arguments"),"*")).length,i=o+"#"+u,c=a===n.B;if(c){var l=Oy[i];if(void 0!==l)return l(e,t,n)}return(e=Gy[c?"":a])&&!e.includes(i)?fy("Not supported: built-in function not on allow list: "+i):(e=da(a,o,u))?e.I?fy("Not supported: updating functions"):ky(t=hy(t=Ry(r,e.j,t,n),(function(e){return py("runtimeLib.callFunction(domFacade, "+Fy(a)+", "+Fy(o)+", ["+e.code+"], options)",{type:0},e.H)})),e.i):fy("Unknown function / arity: "+i)}function My(e,t){return hy(hg(t,e,"contextItem"),(function(e){return py(e.code,{type:0},[].concat(h(e.H),["if ("+e.code+" === undefined || "+e.code+" === null) {\n\t\t\t\t\tthrow errXPDY0002('The function which was called depends on dynamic context, which is absent.');\n\t\t\t\t}"]))}))}function Hy(e,t,n,r){if((e=La(e,["arguments","*"]))&&"contextItemExpr"!==e[0]){var o=Xa(e,"type");if(!o||!se(o.type,53))return fy("name function only implemented if arg is a node");o=(e=p(n.h(e,t,n))).next().value,e.next(),e=o}else e=My(t,n);return hy(hg(n,t=my(e,t,n),"arg"),(function(e){return py("("+e.code+" ? "+r(e.code)+" : '')",{type:0},e.H)}))}function Py(e,t,n){return Hy(e,t,n,(function(e){return"((("+e+".prefix || '').length !== 0 ? "+e+".prefix + ':' : '')\n\t\t+ ("+e+".localName || "+e+".target || ''))"}))}function jy(e,t,n){return Hy(e,t,n,(function(e){return"("+e+".localName || "+e+".target || '')"}))}function Xy(e,t,n){var r=La(e,["arguments","*"]);e=Xa(r,"type");var o=(r=p(n.h(r,t,n))).next().value;return r.next(),hy(t=yy(o,e,t,n),(function(e){return py("!"+e.code,{type:0},e.H)}))}function Ly(){return py("false",{type:0},[])}function Yy(){return py("true",{type:0},[])}function Qy(e,t,n,r){var o=p(by(e,"firstOperand",n,r)),a=o.next().value;o=o.next().value;var u=Xa(La(e,["firstOperand","*"]),"type");a=yy(a,u,n,r);var i=(u=p(by(e,"secondOperand",n,r))).next().value;return u=u.next().value,[a=hy(a,(function(o){var a=Xa(La(e,["secondOperand","*"]),"type");return hy(a=yy(i,a,n,r),(function(e){return py("("+o.code+" "+t+" "+e.code+")",{type:0},[].concat(h(o.H),h(e.H)))}))})),o="&&"===t?Uu(o,u):o===u?o:null]}function Jy(e,t,n){return hy(e,(function(e){return hy(t,(function(t){return hy(n,(function(n){return py("for ("+e.code+") {\n\t\t\t\t\t\t"+t.H.join("\n")+"\n\t\t\t\t\t\tif (!("+t.code+")) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t"+n.H.join("\n")+"\n\t\t\t\t\t\t"+n.code+"\n\t\t\t\t\t}",{type:2},e.H)}))}))}))}function Ky(e,t,n,r,o){var a=t?', "'+t+'"':"";return Jy(t=hy(r,(function(e){return hy(o,(function(t){return py("let "+e.code+" = domFacade.getFirstChild("+t.code+a+");\n\t\t\t\t\t\t\t"+e.code+";\n\t\t\t\t\t\t\t"+e.code+" = domFacade.getNextSibling("+e.code+a+")",{type:2},[].concat(h(e.H),h(t.H)))}))})),e,n)}function qy(e,t,n,r,o){var a=Uu(t,"type-2"),u=hy(o,(function(e){return py("("+e.code+" && "+e.code+".nodeType === /*ELEMENT_NODE*/ 1 ? domFacade.getAllAttributes("+e.code+(a?', "'+a+'"':"")+") : [])",{type:0},e.H)}));return Jy(t=hy(r,(function(e){return hy(u,(function(t){return py("const "+e.code+" of "+t.code,{type:2},[].concat(h(e.H),h(t.H)))}))})),e,n)}function _y(e,t,n,r,o){var a=t?', "'+t+'"':"";return Vy(r,t=hy(o,(function(e){return py("domFacade.getParentNode("+e.code+a+")",{type:0},e.H)})),e,n)}function Vy(e,t,n,r){var o=xy(e,n);return hy(e,(function(e){return hy(t,(function(t){return hy(o,(function(n){return hy(r,(function(r){return py("const "+e.code+" = "+t.code+";\n\t\t\t\t\t\t"+n.H.join("\n")+"\n\t\t\t\t\t\tif ("+n.code+") {\n\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t"+r.code+"\n\t\t\t\t\t\t}",{type:2},[].concat(h(e.H),h(t.H)))}))}))}))}))}function Wy(e,t,n,r,o,a){switch(e=ja(e)){case"attribute":return[qy(t,n,r,o,a),"type-1"];case"child":return[Ky(t,n,r,o,a),null];case"parent":return[_y(t,n,r,o,a),null];case"self":return[Vy(o,a,t,r),n];default:return[fy("Unsupported: the "+e+" axis"),null]}}var Zy={dc:"textTest",Vb:"elementTest",$b:"nameTest",ec:"Wildcard",Sb:"anyKindTest"},$y=Object.values(Zy);function zy(e){return[hy(e,(function(e){return py(e.code+".nodeType === /*TEXT_NODE*/ 3",{type:0},[])})),"type-3"]}function eg(e,t){if(null===e.namespaceURI&&"*"!==e.prefix){if(!(t=t.aa(e.prefix||"")||null)&&e.prefix)throw Error("XPST0081: The prefix "+e.prefix+" could not be resolved.");e.namespaceURI=t}}function tg(e,t,n,r){eg(e,r);var o=e.prefix,a=e.namespaceURI,u=e.localName;return dy(n,(function(e){var n=py(t?e.code+".nodeType\n\t\t\t\t\t\t&& ("+e.code+".nodeType === /*ELEMENT_NODE*/ 1\n\t\t\t\t\t\t|| "+e.code+".nodeType === /*ATTRIBUTE_NODE*/ 2)":e.code+".nodeType\n\t\t\t\t\t\t&& "+e.code+".nodeType === /*ELEMENT_NODE*/ 1",{type:0},[]);if("*"===o)return"*"===u?[n,t?"type-1-or-type-2":"type-1"]:[xy(n,py(e.code+".localName === "+Fy(u),{type:0},[])),"name-"+u];n="*"===u?n:xy(n,py(e.code+".localName === "+Fy(u),{type:0},[]));var r=py(Fy(a),{type:0},[]);return r=""===o&&t?hy(r,(function(t){return py(e.code+".nodeType === /*ELEMENT_NODE*/ 1 ? "+t.code+" : null",{type:0},t.H)})):r,[xy(n,r=hy(r,(function(t){return py("("+e.code+".namespaceURI || null) === (("+t.code+") || null)",{type:0},t.H)}))),"name-"+u]}))}function ng(e,t,n){var r=(e=Pa(e,"elementName"))&&Pa(e,"star");return null===e||r?[hy(t,(function(e){return py(e.code+".nodeType === /*ELEMENT_NODE*/ 1",{type:0},[])})),"type-1"]:tg(e=Qa(Pa(e,"QName")),!1,t,n)}function rg(e){return[hy(e,(function(e){return py("!!"+e.code+".nodeType",{type:0},[])})),null]}function og(e,t,n,r){var o=e[0];switch(o){case Zy.Vb:return ng(e,n,r);case Zy.dc:return zy(n);case Zy.$b:return tg(Qa(e),t,n,r);case Zy.ec:return Pa(e,"star")?null!==(o=Pa(e,"uri"))?e=tg({localName:"*",namespaceURI:ja(o),prefix:""},t,n,r):(o=Pa(e,"NCName"),e="star"===Pa(e,"*")[0]?tg({localName:ja(o),namespaceURI:null,prefix:"*"},t,n,r):tg({localName:"*",namespaceURI:null,prefix:ja(o)},t,n,r)):e=tg({localName:"*",namespaceURI:null,prefix:"*"},t,n,r),e;case Zy.Sb:return rg(n);default:return[fy("Test not implemented: '"+o),null]}}function ag(e,t,n){var r=p(n.h(e,t,n)),o=r.next().value;return r=r.next().value,[yy(o,Xa(e,"type"),t,n),r]}function ug(e,t,n){var r=p((e=e?Ya(e,"*"):[]).reduce((function(e,r){var o=(e=p(e)).next().value,a=e.next().value;if(!o)return ag(r,t,n);var u=a;return dy(o,(function(e){var o=p(ag(r,t,n)),i=o.next().value;return o=o.next().value,u=Uu(a,o),[hy(i,(function(t){return py(e.code+" && "+t.code,{type:0},[].concat(h(e.H),h(t.H)))})),u]}))}),[null,null]));return e=r.next().value,r=r.next().value,[e?hy(e,(function(e){return py("(function () {\n\t\t\t\t\t\t\t"+e.H.join("\n")+"\n\t\t\t\t\t\t\treturn "+e.code+";\n\t\t\t\t\t\t})()",{type:0},[])})):null,r]}function ig(e,t,n,r){if(0===e.length)return[hy(n,(function(e){return py("yield "+e.code+";",{type:2},e.H)})),null];var o=(e=p(e)).next().value,a=f(e);if(0<Ya(o,"lookup").length)return[fy("Unsupported: lookups"),null];var u=dg(r,mg(r,"contextItem")),i=(e=p(ug(e=Pa(o,"predicates"),u,r))).next().value,c=e.next().value;if(e=Pa(o,"xpathAxis")){if(!(o=Pa(o,$y)))return[fy("Unsupported test in step"),null];var l=ja(e);return o=(l=p(og(o,t="attribute"===l||"self"===l&&t,u,r))).next().value,l=l.next().value,o=null===i?o:xy(o,i),c=Uu(l,c),l=(t=p(ig(a,t,u,r))).next().value,t.next(),Wy(e,o,c,l,u,n)}return(e=La(o,["filterExpr","*"]))?(e=(c=p(r.h(e,n,r))).next().value,c=c.next().value,[hy(e,(function(e){var t=0===a.length?py("",{type:2},[]):py("if ("+u.code+" !== null && !"+u.code+".nodeType) {\n\t\t\t\t\t\t\t\t\tthrow new Error('XPTY0019: The result of E1 in a path expression E1/E2 should evaluate to a sequence of nodes.');\n\t\t\t\t\t\t\t\t}",{type:2},[]),o=p(ig(a,!0,u,r)),c=o.next().value;return o.next(),o=null===i?c:hy(i,(function(e){return hy(c,(function(t){return py("if ("+e.code+") {\n\t\t\t\t\t\t\t\t\t"+t.H.join("\n")+"\n\t\t\t\t\t\t\t\t\t"+t.code+"\n\t\t\t\t\t\t\t\t}",{type:2},e.H)}))})),hy(o,(function(r){switch(e.va.type){case 1:return hy(n,(function(n){return py("for (const "+u.code+" of "+e.code+"("+n.code+")) {\n\t\t\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t\t\t"+r.code+"\n\t\t\t\t\t\t\t\t}",{type:2},[].concat(h(u.H),h(e.H),h(t.H)))}));case 0:return py("const "+u.code+" = "+e.code+";\n\t\t\t\t\t\t\t"+t.code+"\n\t\t\t\t\t\t\tif ("+u.code+" !== null) {\n\t\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t\t"+r.code+"\n\t\t\t\t\t\t\t}",{type:2},[].concat(h(u.H),h(e.H),h(t.H)));default:return fy("Unsupported generated code type for filterExpr")}}))})),c]):[fy("Unsupported: unknown step type"),null]}function cg(e){return hy(e,(function(e){return py("(function () {\n\t\t\t\tlet n = "+e.code+";\n\t\t\t\twhile (n.nodeType !== /*DOCUMENT_NODE*/9) {\n\t\t\t\t\tn = domFacade.getParentNode(n);\n\t\t\t\t\tif (n === null) {\n\t\t\t\t\t\tthrow new Error('XPDY0050: the root node of the context node is not a document node.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn n;\n\t\t\t})()",{type:0},e.H)}))}function lg(e,t,n){return dy(t,(function(t){if(0<Ya(e,"lookup").length)return[fy("Unsupported: lookups"),null];var r=Pa(e,"predicates"),o=p(ug(r,t,n));r=o.next().value,o=o.next().value;var a=Pa(e,$y);if(!a)return[fy("Unsupported test in step"),null];var u=p(og(a,!0,t,n));return a=u.next().value,u=u.next().value,r=null===r?a:xy(a,r),o=Uu(u,o),[hy(r,(function(e){return py("(("+e.code+") ? "+t.code+" : null)",{type:0},[].concat(h(t.H),h(e.H)))})),o]}))}function sg(e,t,n){var r=Ya(e,"stepExpr");if(1===r.length){var o=Pa(r[0],"xpathAxis");if(o&&"self"===ja(o))return lg(r[0],t,n)}var a=dg(n,mg(n,"contextItem"));return t=(e=Pa(e,"rootExpr"))?hg(n,cg(a),"root"):a,n=(r=p(ig(r,!e,t,n))).next().value,r=r.next().value,[hy(n,(function(e){return py("(function* ("+a.code+") {\n\t\t\t"+e.H.join("\n")+"\n\t\t\t"+e.code+"\n\t\t})",{type:1},[])})),r]}function pg(e,t,n){var r=e[0];switch(r){case"contextItemExpr":return[t,null];case"pathExpr":return sg(e,t,n);case"andOp":return Qy(e,"&&",t,n);case"orOp":return Qy(e,"||",t,n);case"stringConstantExpr":return[py(e=Fy(e=Pa(e,"value")[1]||""),{type:0},[]),null];case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":case"isOp":case"nodeBeforeOp":case"nodeAfterOp":e:switch(r){case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":case"isOp":e=Iy(e,r,t,n);break e;case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":var o=Xa(La(e,["firstOperand","*"]),"type"),a=Xa(La(e,["secondOperand","*"]),"type");e=o&&a?3===o.g&&3===a.g?Iy(e,Ey[r],t,n):3===o.g?Cy(e,"firstOperand","secondOperand",Ey[r],t,n):3===a.g?Cy(e,"secondOperand","firstOperand",Ty[Ey[r]],t,n):fy("General comparison for sequences is not implemented"):fy("types of compare are not known");break e;default:e=fy("Unsupported compare type: "+r)}return[e,null];case"functionCallExpr":return[Uy(e,t,n),null];default:return[fy("Unsupported: the base expression '"+r+"'."),null]}}function fg(e,t){this.o=new Map,this.v=new Map,this.aa=e,this.B=t,this.h=pg}function hg(e,t,n){return hy(t,(function(t){var r=e.o.get(t);return r||(r=py(r=mg(e,n),t.va,[].concat(h(t.H),["const "+r+" = "+t.code+";"])),e.o.set(t,r),e.o.set(r,r)),r}))}function dg(e,t){return t=py(t,{type:0},[]),e.o.set(t,t),t}function mg(e,t){t=void 0===t?"v":t;var n=e.v.get(t)||0;return e.v.set(t,n+1),t+n}function yg(e){var t=Ya(e,"*");if("pathExpr"===e[0])return!0;for(t=(e=p(t)).next();!t.done;t=e.next())if(yg(t.value))return!0;return!1}function gg(e,t,n){if(n=n||{},t=t||0,"string"==typeof e){e=Xl(e);var r={$:"XQuery3.1"===n.language||"XQueryUpdate3.1"===n.language,debug:!1};try{var o=dm(e,r)}catch(t){sa(e,t)}}else o=Ul(e);if(!(e=Pa(o,"mainModule")))return fy("Unsupported: XQuery Library modules are not supported.");if(Pa(e,"prolog"))return fy("Unsupported: XQuery Prologs are not supported.");if(r=void 0===n.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":n.defaultFunctionNamespaceURI,wu(o,n=new Iu(new Oa(new va((e=new fg(n.namespaceResolver||Um(null),r)).aa,{},r,n.functionNameResolver||Mm("http://www.w3.org/2005/xpath-functions"))))),n=Pa(o,"mainModule"))if(Pa(n,"prolog"))e=fy("Unsupported: XQuery.");else{var a=La(n,["queryBody","*"]);n=dg(e,"contextItem");var u=p(e.h(a,n,e));r=u.next().value,u.next();e:switch(a=Xa(a,"type"),t){case 9:e=wy(t=my(r,n,e),a,e);break e;case 7:e=Ay(r,a,n,e);break e;case 3:e=yy(r,a,n,e);break e;case 2:e=vy(r,a,n,e);break e;default:e=fy("Unsupported: the return type '"+t+"'.")}e.isAstAccepted&&(e="\n\t\t"+e.H.join("\n")+"\n\t\treturn "+e.code+";",t="\n\treturn (contextItem, domFacade, runtimeLib, options) => {\n\t\tconst {\n\t\t\terrXPDY0002,\n\t\t} = runtimeLib;",yg(o)&&(t+='\n\t\tif (!contextItem) {\n\t\t\tthrow errXPDY0002("Context is needed to evaluate the given path expression.");\n\t\t}\n\n\t\tif (!contextItem.nodeType) {\n\t\t\tthrow new Error("Context item must be subtype of node().");\n\t\t}\n\t\t'),e={code:t+(e+"}\n//# sourceURL=generated.js"),isAstAccepted:!0})}else e=fy("Unsupported: Can not execute a library module.");return e}function vg(e,t,n){var r=e.stack;r&&(r.includes(e.message)&&(r=r.substr(r.indexOf(e.message)+e.message.length).trim()),(r=r.split("\n")).splice(10),r=(r=r.map((function(e){return e.startsWith("    ")||e.startsWith("\t")?e:"    "+e}))).join("\n")),e=Error.call(this,"Custom XPath function Q{"+n+"}"+t+" raised:\n"+e.message+"\n"+r),this.message=e.message,"stack"in e&&(this.stack=e.stack)}function wg(e,t,n){return 0===t.g?e.G()?null:Xm(e.first(),n).next(0).value:2===t.g||1===t.g?e.O().map((function(e){if(se(e.type,47))throw Error("Cannot pass attribute nodes to custom functions");return Xm(e,n).next(0).value})):Xm(e.first(),n).next(0).value}function Ag(e){if("object"==typeof e)return e;if(2!==(e=e.split(":")).length)throw Error("Do not register custom functions in the default function namespace");var t=p(e);e=t.next().value,t=t.next().value;var n=ga[e];if(!n){if(n="generated_namespace_uri_"+e,ga[e])throw Error("Prefix already registered: Do not register the same prefix twice.");ga[e]=n}return{localName:t,namespaceURI:n}}function xg(e,t,n,r){var o=(e=Ag(e)).namespaceURI,a=e.localName;if(!o)throw Ba();var u=t.map((function(e){return we(e)})),i=we(n);ma(o,a,u,i,(function(e,t,n){var c=Array.from(arguments);c.splice(0,3),c=c.map((function(e,n){return wg(e,u[n],t)}));var l={};l.currentContext=t.l,l.domFacade=t.h.h;try{var s=r.apply(void 0,[l].concat(h(c)))}catch(e){throw new vg(e,a,o)}return s&&"object"==typeof s&&Object.getOwnPropertySymbols(s).includes(Rm)?Ie.create(s.Hb):St(t.h,s,i)}))}A(vg,Error);var bg={callFunction:function(e,t,n,r,o){var a=da(t,n,r.length);if(!a)throw Error("function not found for codegen function call");t=new Rt({N:null,Ka:0,Da:Ie.empty(),Aa:{}});var u=new Xe(e);return e=new Xt(!1,!1,u,null,null,o?o.currentContext:null,null),wg(r=a.callFunction.apply(a,[t,e,null].concat(h(r.map((function(e,t){return St(u,e,a.j[t])}))))),{type:59,g:0},e)},errXPDY0002:Qt};function Bg(e,t,n,r){return n=n||new ke,e()(null!=t?t:null,n,bg,r)}var Eg={},Ng=(Eg["http://www.w3.org/2005/XQueryX"]="xqx",Eg["http://www.w3.org/2007/xquery-update-10"]="xquf",Eg["http://fontoxml.com/fontoxpath"]="x",Eg);function Tg(e,t){switch(e){case"copySource":case"insertAfter":case"insertAsFirst":case"insertAsLast":case"insertBefore":case"insertInto":case"modifyExpr":case"newNameExpr":case"replacementExpr":case"replaceValue":case"returnExpr":case"sourceExpr":case"targetExpr":case"transformCopies":case"transformCopy":return{localName:e,ub:t||"http://www.w3.org/2005/XQueryX"};case"deleteExpr":case"insertExpr":case"renameExpr":case"replaceExpr":case"transformExpr":return{localName:e,ub:"http://www.w3.org/2007/xquery-update-10"};case"x:stackTrace":return{localName:"stackTrace",ub:"http://fontoxml.com/fontoxpath"};default:return{localName:e,ub:"http://www.w3.org/2005/XQueryX"}}}function Ig(e,t,n,r,o){if("string"==typeof n)return 0===n.length?null:t.createTextNode(n);if(!Array.isArray(n))throw new TypeError("JsonML element should be an array or string");var a=(r=Tg(n[0],r)).localName;r=r.ub;var u=t.createElementNS(r,Ng[r]+":"+a),i=n[1],c=1;if("object"==typeof i&&!Array.isArray(i)){if(null!==i)for(var l=(c=p(Object.keys(i))).next();!l.done;l=c.next()){var s=i[l=l.value];null!==s&&("type"===l?void 0!==s&&e.setAttributeNS(u,r,"fontoxpath:"+l,ge(s)):("start"!==l&&"end"!==l||"stackTrace"!==a||(s=JSON.stringify(s)),o&&"prefix"===l&&""===s||e.setAttributeNS(u,r,Ng[r]+":"+l,s)))}c=2}for(a=c,i=n.length;a<i;++a)null!==(c=Ig(e,t,n[a],r,o))&&e.insertBefore(u,c,null);return u}function Cg(e,t,n,r){r=void 0===r?Me:r,e=Xl(e);try{var o=dm(e,{$:"XQuery3.1"===t.language||"XQueryUpdate3.1"===t.language,debug:t.debug})}catch(t){sa(e,t)}var a=new va(t.namespaceResolver||function(){return null},{},void 0===t.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":t.defaultFunctionNamespaceURI,t.functionNameResolver||function(){return null});a=new Oa(a);var u=Pa(o,["mainModule","libraryModule"]),i=Pa(u,"moduleDecl");return i&&ka(a,ja(Pa(i,"prefix")),i=ja(Pa(i,"uri"))),(u=Pa(u,"prolog"))&&gm(u,a,!1,e),!1!==t.annotateAst&&vu(o,new Iu(a)),a=new ke,t=Ig(r,n,o,null,!1===t.wc),r.insertBefore(t,n.createComment(e),a.getFirstChild(t)),t}function Fg(e){return Promise.resolve(e)}function Og(e,t){if(vu(t=dm(e,{$:!0,debug:(t=void 0===t?{debug:!1}:t).debug}),new Iu(void 0)),!(t=Pa(t,"libraryModule")))throw Error("XQuery module must be declared in a library module.");var n=Pa(t,"moduleDecl"),r=Pa(n,"uri"),o=ja(r);if(r=ja(n=Pa(n,"prefix")),ka(n=new Oa(new va((function(){return null}),Object.create(null),"http://www.w3.org/2005/xpath-functions",Mm("http://www.w3.org/2005/xpath-functions"))),r,o),null!==(t=Pa(t,"prolog"))){try{var a=gm(t,n,!0,e)}catch(t){sa(e,t)}a.Ma.forEach((function(e){if(o!==e.namespaceURI)throw Error("XQST0048: Functions and variables declared in a module must reside in the module target namespace.")})),Hl(o,a)}else Hl(o,{Ma:[],Va:[],ra:null,source:e});return o}var Sg=new Map;function Gg(e){var t;e:{if(t=Gl.get(e))for(var n=p(Object.keys(t)),r=n.next();!r.done;r=n.next())if(t[r=r.value]&&t[r].length){t=t[r][0].h;break e}t=null}if(t)return t;if(Sg.has(e))return Sg.get(e);if(null===(t=La(t="string"==typeof e?dm(e,{$:!1}):Ul(e),["mainModule","queryBody","*"])))throw Error("Library modules do not have a specificity");return t=Sl(t,{ua:!1,$:!1}),Sg.set(e,t),t}function Dg(e){return Gg(e).B()}function Rg(e,t){return Oo(Gg(e).o,Gg(t).o)}var kg=new ke;return void 0!==r&&(r.compareSpecificity=Rg,r.compileXPathToJavaScript=gg,r.domFacade=kg,r.evaluateXPath=Vm,r.evaluateXPathToArray=ty,r.evaluateXPathToAsyncIterator=Zm,r.evaluateXPathToBoolean=ny,r.evaluateXPathToFirstNode=ry,r.evaluateXPathToMap=oy,r.evaluateXPathToNodes=ay,r.evaluateXPathToNumber=uy,r.evaluateXPathToNumbers=iy,r.evaluateXPathToString=cy,r.evaluateXPathToStrings=ly,r.evaluateUpdatingExpression=zm,r.evaluateUpdatingExpressionSync=ey,r.executeJavaScriptCompiledXPath=Bg,r.executePendingUpdateList=sy,r.getBucketForSelector=Dg,r.getBucketsForNode=Re,r.precompileXPath=Fg,r.registerXQueryModule=Og,r.registerCustomXPathFunction=xg,r.parseScript=Cg,r.profiler=Km,r.createTypedValueFactory=km,r.finalizeModuleRegistration=jl,r.Language=_m,r.ReturnType=Lm),r}(o,a))}],["hide-if-classifies",null]]);
callback.get = snippet => graph.get(snippet);
callback.has = snippet => graph.has(snippet);
export default callback;